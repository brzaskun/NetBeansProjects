<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <p:panelGrid columns="4" style="width: 600px">
        <h:form id="formpi" style="width: 400px" >
            <p:growl id="messages"/>
            <p:panel header="wybierz osobę: " /><br/>
            <p:selectOneMenu value="#{ZestawienieView.wybranyudzialowiec}">
                <f:selectItem itemLabel="wybierz osobe" itemValue="wybierz osobe"/>
                <f:selectItems value="#{ZestawienieView.listawybranychudzialowcow}"/>
                <p:ajax event="change" update=":formpit" listener="#{ZestawienieView.obliczPit()}"/>
            </p:selectOneMenu>
            <br/><br/>
            <p:panel header="wprowadzone PIT-y: " /><br/>

            <p:dataTable id="tablicapit" value="#{pitView.lista}" var="loop" selectionMode="single" selection="#{pitView.biezacyPit}" rowKey="#{loop.id}" sortBy="#{loop.pkpirM}" >
                <p:ajax event="rowSelect" update=":formpi2:zestawieniepitview" global="false"/>
                <p:column headerText="okres rozliczeniowy: ">
                    <h:outputText value="#{loop.pkpirR}-"/><h:outputText value="#{loop.pkpirM}"/>
                </p:column>
                 <p:column headerText="udzialowiec: ">
                     <h:outputText value="#{loop.udzialowiec}"/>
                </p:column>
                <p:column headerText="należna zaliczka: ">
                    <h:outputText value="#{loop.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                </p:column>
            </p:dataTable>
            <p:commandButton value="usun pit"  actionListener="#{pitView.usun()}" update=":formpi:tablicapit" style="width: 120px;"/>
        </h:form>
        <h:form id="formpi2">
            <p:panel header="przegląd wybranego PIT-u" style="margin-left: 50px;width: 350px"/><br/>
            <p:panelGrid id="zestawieniepitview" columns="2" style="margin-left: 50px; width: 350px; height: 670px;">
                <h:outputText value="firma"/><h:outputText value="#{pitView.biezacyPit.podatnik}"/>
                <h:outputText value="podatnik"/><h:outputText value="#{pitView.biezacyPit.udzialowiec}"/> 
                <h:outputText value="pkpirR"/><h:outputText value="#{pitView.biezacyPit.pkpirR}"/>
                <h:outputText value="pkpirM"/><h:outputText value="#{pitView.biezacyPit.pkpirM}"/>
                <h:outputText value="przychody narast."/><h:outputText value="#{pitView.biezacyPit.przychody}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="koszty narast."/><h:outputText value="#{pitView.biezacyPit.koszty}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="przychody udział"/><h:outputText value="#{pitView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="koszty udział"/><h:outputText value="#{pitView.biezacyPit.kosztyudzial}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="wynik od pocz. rok"/><h:outputText value="#{pitView.biezacyPit.wynik}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="strata z lat ub"/><h:outputText value="#{pitView.biezacyPit.strata}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="ZUS 51"/><h:outputText value="#{pitView.biezacyPit.zus51}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="podstawa opod."/><h:outputText value="#{pitView.biezacyPit.podstawa}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="podatek"/><h:outputText value="#{pitView.biezacyPit.podatek}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="ZUS 52"/><h:outputText value="#{pitView.biezacyPit.zus52}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="podatek należny od pocz rok"/><h:outputText value="#{pitView.biezacyPit.pododpoczrok}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="zaliczki za pop.m-ce"/><h:outputText value="#{pitView.biezacyPit.nalzalodpoczrok}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="należna zal. za m-c"/><h:outputText value="#{pitView.biezacyPit.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="do zapłaty"/><h:outputText value="#{pitView.biezacyPit.dozaplaty}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                <h:outputText value="termin płatności"/><h:outputText value="#{pitView.biezacyPit.terminwplaty}"/>
                <h:outputText value="przelano"/><h:outputText value="#{pitView.biezacyPit.przelano}"/>
                <h:outputText value="zamknięty"/><h:outputText value="#{pitView.biezacyPit.zamkniety}"/>
            </p:panelGrid>
        </h:form>
        <h:form id="formpit">
            <p:growl id="messages" showDetail="true"/>
            <p:panel header="dane nowego PIT-u: #{ZestawienieView.wybranyudzialowiec} #{ZestawienieView.wybranyprocent}%" style="margin-left: 50px;width: 400px"/><br/>
            <p:panelGrid id="zestawieniepit" columns="2" style="margin-left: 50px; width: 400px;">
                <h:outputText value="firma"/><h:inputText value="#{ZestawienieView.biezacyPit.podatnik}"/>
                <h:outputText value="podatnik"/><h:inputText value="#{ZestawienieView.biezacyPit.udzialowiec}"/>
                <h:outputText value="pkpirR"/><h:inputText value="#{ZestawienieView.biezacyPit.pkpirR}"/>
                <h:outputText value="pkpirM"/><h:inputText value="#{ZestawienieView.biezacyPit.pkpirM}"/>
                <h:outputText value="przychody narast."/><h:inputText value="#{ZestawienieView.biezacyPit.przychody}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="koszty narast."/><h:inputText value="#{ZestawienieView.biezacyPit.koszty}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                 <h:outputText value="przychody udział"/><h:inputText value="#{ZestawienieView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="koszty udział"/><h:inputText value="#{ZestawienieView.biezacyPit.kosztyudzial}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="wynik od pocz. rok"/><h:inputText value="#{ZestawienieView.biezacyPit.wynik}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="strata z lat ub"/><h:inputText value="#{ZestawienieView.biezacyPit.strata}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="ZUS 51"/><h:inputText value="#{ZestawienieView.biezacyPit.zus51}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="podstawa opod."/><h:inputText value="#{ZestawienieView.biezacyPit.podstawa}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="podatek"/><h:inputText value="#{ZestawienieView.biezacyPit.podatek}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="ZUS 52"/><h:inputText value="#{ZestawienieView.biezacyPit.zus52}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="podatek należny od pocz rok"/><h:inputText value="#{ZestawienieView.biezacyPit.pododpoczrok}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="zaliczki za pop.m-ce"/><h:inputText value="#{ZestawienieView.biezacyPit.nalzalodpoczrok}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="należna zal. za m-c"/><h:inputText value="#{ZestawienieView.biezacyPit.naleznazal}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="do zapłaty"/><h:inputText value="#{ZestawienieView.biezacyPit.dozaplaty}" style=" font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:inputText>
                <h:outputText value="termin płatności"/><h:inputText value="#{ZestawienieView.biezacyPit.terminwplaty}"/>
                <h:outputText value="przelano"/><h:inputText value="#{ZestawienieView.biezacyPit.przelano}"/>
                <h:outputText value="zamknięty"/><h:inputText value="#{ZestawienieView.biezacyPit.zamkniety}"/>
            </p:panelGrid>
            <br/>
            <p:panelGrid  columns="2" style="margin-left: 160px">
                
                <p:commandButton value="drukuj" type="button" style="width: 120px">
                    <p:printer target="formpit:zestawieniepit" /></p:commandButton>
                <p:commandButton value="zachowaj pit"  action="#{ZestawienieView.zachowajPit()}" update="@form :formpi:" type="submit" style="width: 120px"/>
            </p:panelGrid>
        </h:form>
    </p:panelGrid>
</ui:composition>   

