<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ck="http://code.google.com/ck-jsf-editor"
    >
    <p:tabView id="akordeon">
        <p:tab title="wprowadź treść">
            <h:form id="formmail">
                <p:panelGrid columns="2">
                    <p:column>
                        <p:growl id="messages" autoUpdate="true"/>
                        <ck:editor id="ckEd" value="#{adminMailView.zawartoscmaila}" width="1200" uiColor="#ffffff" height="600" />
                        <p:commandButton value="Reset" onclick="eduardo.setContents('');
                                return false;" style="padding: 10px; width: 120px;"/>
                        <p:commandButton value="Save" actionListener="#{adminMailView.zachowajMaila}" style="padding: 10px; width: 120px;" update=":akordeon:wysylanie:wprowadzonymail">
                            <f:ajax execute="ckEd"/>
                        </p:commandButton>
                    </p:column>
                </p:panelGrid>
            </h:form>
        </p:tab>
        <p:tab title="adresaci">
            <p:dataTable value="#{adminMailView.klientList}" var="loop" rowIndexVar="index" style="width: 1000px;">
                <f:facet name="header">
                    <h:outputText value="Wykaz adresatów"/>
                </f:facet>
                <p:column headerText="lp">
                    <h:outputText value="#{index}"/>
                </p:column>
                <p:column headerText="nazwa">
                    <h:outputText value="#{loop.npelna}"/>
                </p:column>
                <p:column headerText="adres">
                    <h:outputText value="#{loop.email}"/>
                </p:column>
            </p:dataTable>
        </p:tab>
        <p:tab title="wyslij maila">
            <h:form>
                <p:ajaxStatus style="width:64px;height:64px;position:fixed;right:250px;bottom:250px">
                    <f:facet name="start"><p:graphicImage url="/resources/images/ajax_loaderc.gif"/></f:facet>
                    <f:facet name="success"><h:outputText value="" /></f:facet>
                </p:ajaxStatus>
            </h:form>
            <h:form id="wysylanie">
                <p:panelGrid columns="1">
                    <p:column>
                        <p:panel header="wprowadzona wiadomość" style="width: 800px; height: 450px;">
                            <h:outputText id="wprowadzonymail" value="#{adminMailView.zawartoscmaila}"/>
                        </p:panel>
                    </p:column>
                    <p:column>
                        <h:outputLabel value="wprowadz temat wiadomości: " for=":akordeon:wprowadzonymail"/>
                        <h:inputText value="#{adminMailView.tematwiadomosci}" label="temat wiadomości" style="width: 500px;"/>
                    </p:column>
                    <p:column>
                        <p:commandButton value="wyslij" actionListener="#{adminMailView.wyslijAdminMail()}" label="temat wiadomości" style="width: 500px;" update=":akordeon:formmaile:wyslenemaile"/>
                    </p:column>
                </p:panelGrid>
            </h:form>
        </p:tab>
        <p:tab title="wyslane maile">
            <h:form id="formmaile">
                <p:dataTable id="wyslenemaile" value="#{adminMailView.wyslanemaile}" var="loop" rowIndexVar="index" style="width: 1400px;" sortBy="#{loop.id}" sortOrder="descending">
                <f:facet name="header">
                    <h:outputText value="Wykaz wysłanych maili"/>
                </f:facet>
                <p:column headerText="lp">
                    <h:outputText value="#{loop.id}"/>
                </p:column>
                    <p:column headerText="data wysyłki" width="150">
                    <h:outputText value="#{loop.datawysylki}"/>
                </p:column>
                    <p:column headerText="tytuł" width="250">
                    <h:outputText value="#{loop.tytul}"/>
                </p:column>
                <p:column headerText="treść">
                    <h:outputText value="#{loop.tresc}"/>
                </p:column>
                <p:column headerText="liczba maili">
                    <h:outputText value="#{loop.maile.size()}"/>
                </p:column>
            </p:dataTable>
                </h:form>
        </p:tab>
    </p:tabView>

</ui:composition>   

