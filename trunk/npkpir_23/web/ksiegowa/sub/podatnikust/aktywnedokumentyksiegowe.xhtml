<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <p:tab title="Aktywne dokumenty księgowe podatnika"> 
        <h:form id="form6" >
            <h:outputText value="Rodzaje dokumentów księgowych" style="font-size: 15px"/>
            <p:growl id="messages" />
            <p:panelGrid columns="1" style="max-width: 1200px">
                <p:dataTable id="pDokKsi" value="#{podatnikView.rodzajeDokumentowLista}"  var="loop" selection="#{podatnikView.wybranyRodzajDokumentu}"
                             paginator="true" paginatorPosition="top" rows="7" selectionMode="single" rowKey="#{loop.rodzajedokPK.skrotNazwyDok}"
                             sortBy="#{loop.rodzajedokPK.skrotNazwyDok}"
                             >
                    <p:ajax event="rowSelect" update=":akordeon:form7" listener="#{podatnikView.przygotujdoedycjiDokKsi}" />
                    <p:column headerText="skrót" style="text-align: center; height: 30px;" width="40">
                        <h:outputText value="#{loop.rodzajedokPK.skrotNazwyDok}" />
                    </p:column>
                    <p:column headerText="nazwa pelna" width="150">
                        <h:outputText value="#{loop.nazwa}" />
                    </p:column>
                    <p:column headerText="rodzaj transakcji">
                        <h:outputText value="#{loop.rodzajtransakcji}" />
                    </p:column>
                    <p:column headerText="wzorzec" style="text-align: center;" width="50">
                        <h:outputText value="#{loop.wzorzec}"/>
                    </p:column>
                    <p:column headerText="kategoria" style="text-align: center;">
                        <h:outputText value="#{loop.kategoriadokumentu eq 1 ? 'koszt z VAT' : (loop.kategoriadokumentu eq 2 ? 'przychód z VAT' : (loop.kategoriadokumentu eq 3 ? 'koszt bez VAT' : (loop.kategoriadokumentu eq 4 ? 'przychód bez VAT': (loop.kategoriadokumentu eq 5 ? 'dokument prosty' : 'płatność'))))}" />
                    </p:column>

                    <p:column headerText="kg" width="30" style="text-align: center;">
                        <h:outputText value="#{loop.pokazkg eq true ? 'tak' : 'nie'}" />
                    </p:column>
                    <p:column headerText="szt" width="30" style="text-align: center;">
                        <h:outputText value="#{loop.pokazszt eq true ? 'tak' : 'nie'}" />
                    </p:column>
                    <p:column headerText="konto rozrach." style="text-align: center;" rendered="#{WpisView.ksiegirachunkowe}">
                        <h:outputText value="#{loop.kontorozrachunkowe.pelnynumer}" />
                    </p:column>
                    <p:column headerText="konto VAT" style="text-align: center;" rendered="#{WpisView.ksiegirachunkowe}">
                        <h:outputText value="#{loop.kontovat.pelnynumer}" />
                    </p:column>
                    <p:column headerText="konto RZiS" style="text-align: center;" rendered="#{WpisView.ksiegirachunkowe}">
                        <h:outputText value="#{loop.kontoRZiS.pelnynumer}" />
                    </p:column>
                    <p:column id="deleteColumn" headerText="usuń" style="text-align: center; width: 50px;">
                        <p:commandButton actionListener="#{podatnikView.usunDokKsi(loop)}" id="delete" icon="ui-icon ui-icon-trash" type="submit" />
                    </p:column>
                    <br/>
                </p:dataTable>
            </p:panelGrid>
        </h:form>
        <h:form id="form7" > 
            <f:ajax >
            <p:focus for="parametryDokKsi"/><br/>
            <h:outputText value="Wpisz nowy dokument/Edytuj dane dokumentu" style="padding: 5px; margin-bottom: 10px;"/>
            
                <p:panelGrid id="parametryDokKsi" columns="8" >
                    <h:outputText value="skrót: " />
                    <p:inputText value="#{podatnikView.selectedDokKsi.rodzajedokPK.skrotNazwyDok}" />
                    <h:outputText value=" nazwa pelna: " />
                    <p:inputText value="#{podatnikView.selectedDokKsi.nazwa}" />
                    <h:outputText value=" rodzaj transakcji: " />
                    <p:selectOneMenu value="#{podatnikView.selectedDokKsi.rodzajtransakcji}" >
                        <f:selectItems value="#{Trans.transListView}"/>
                    </p:selectOneMenu>
                    <h:outputText value=" wzorzec:* " />
                    <p:inputText value="#{podatnikView.selectedDokKsi.wzorzec}" />
                    <h:outputText value=" kategoria dokumentu: " />
                    <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kategoriadokumentu}"  rendered="#{WpisView.ksiegirachunkowe}">
                        <f:selectItem itemLabel="koszt z VAT" itemValue="1"/>
                        <f:selectItem itemLabel="przychód z VAT" itemValue="2"/>
                        <f:selectItem itemLabel="dokument prosty" itemValue="5"/>
                        <f:selectItem itemLabel="#{mgs.płatności}" itemValue="0"/>
                        <p:ajax event="change" global="false" partialSubmit="true" update   =":akordeon:form7:parametryDokKsi1"/>
                    </p:selectOneMenu>
                    <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kategoriadokumentu}"  rendered="#{!WpisView.ksiegirachunkowe}">
                        <f:selectItem itemLabel="koszt z VAT" itemValue="1"/>
                        <f:selectItem itemLabel="przychód z VAT" itemValue="2"/>
                        <f:selectItem itemLabel="koszt bez VAT" itemValue="3"/>
                        <f:selectItem itemLabel="przychód bez VAT" itemValue="4"/>
                        <f:selectItem itemLabel="dokument prosty" itemValue="5"/>
                        <p:ajax event="change" global="false" partialSubmit="true" update   =":akordeon:form7:parametryDokKsi1"/>
                    </p:selectOneMenu>
                    <h:outputText value=" pokaż kg: " />
                    <h:selectBooleanCheckbox value="#{podatnikView.selectedDokKsi.pokazkg}" />
                    <h:outputText value=" pokaż szt: " />
                    <h:selectBooleanCheckbox value="#{podatnikView.selectedDokKsi.pokazszt}" />
                </p:panelGrid>
                <p:panelGrid id="parametryDokKsi1" columns="3" rendered="#{WpisView.ksiegirachunkowe}">

                    <p:column headerText="konto rozrach." style="text-align: center;" >
                        <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kontorozrachunkowe}" style="width: 250px;" converter="KontoConv"  rendered="#{podatnikView.selectedDokKsi.kategoriadokumentu == 0}">
                            <f:selectItem itemLabel="wybierz konto kasowe" itemValue="" />
                            <f:selectItems value="#{podatnikView.listaKontKasaBank}" var="item" itemLabel="#{item.pelnynumer} #{item.nazwapelna}" itemValue="#{item}"/>
                        </p:selectOneMenu>
                        <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kontorozrachunkowe}" style="width: 250px;" converter="KontoConv"  rendered="#{podatnikView.selectedDokKsi.kategoriadokumentu != 0}">
                            <f:selectItem itemLabel="wybierz konto rozrachunkowe" itemValue="" />
                            <f:selectItems value="#{podatnikView.listaKontRozrachunkowych}" var="item" itemLabel="#{item.pelnynumer} #{item.nazwapelna}" itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </p:column>
                    <p:column headerText="konto VAT" style="text-align: center;" rendered="#{WpisView.ksiegirachunkowe}">
                        <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kontovat}" style="width: 250px;" converter="KontoConv">
                            <f:selectItem itemLabel="wybierz konto dla vat" itemValue="" />
                            <f:selectItems value="#{podatnikView.listaKontVAT}" var="item" itemLabel="#{item.pelnynumer} #{item.nazwapelna}" itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </p:column>
                    <p:column headerText="konto RZiS" style="text-align: center;" rendered="#{WpisView.ksiegirachunkowe}">
                        <p:selectOneMenu value="#{podatnikView.selectedDokKsi.kontoRZiS}" style="width: 250px;" converter="KontoConv">
                            <f:selectItem itemLabel="wybierz konto dla netto" itemValue="" />
                            <f:selectItems value="#{podatnikView.listakontoRZiS}" var="item" itemLabel="#{item.pelnynumer} #{item.nazwapelna}" itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </p:column>
                </p:panelGrid>
            
            <p:panelGrid columns="2" style="column-width: 350px; width: 700px">
                <p:commandButton actionListener="#{podatnikView.dodajDokKsi()}" value="dodaj dokument" update=":akordeon:form6, :akordeon:form7" />
                <p:commandButton actionListener="#{podatnikView.editdok()}" value="edytuj dokument" update=":akordeon:form6, :akordeon:form7" />
            </p:panelGrid>
            <p:panelGrid columns="1" style="margin-top: 15px;">
                <h:outputText value="*Dopuszczalne elementy wzorca: n - numer kolejny w roku, N - numer kolejny w miesiącu,	m - numer miesiąca, r - numer roku, s - dowolny ciąg znaków za wyjątkiem: /"/>
            </p:panelGrid>
                
                </f:ajax>
        </h:form>
    </p:tab>
</ui:composition> 
