
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">
    <h:form id="formX">
    <p:panel id="panelDodawaniaDokumentu">
        <p:panel menuTitle="Wprowadzanie danych nowych klientów" header="Wprowadzanie danych nowych klientów (* - dane fakultatywne)" style="width: 1200px;" >
            <p:growl id="mess_add" />
            <p:focus id="focus" context="polawprowadzania" />
            <p:panelGrid id="polawprowadzania" columns="5" >
                <h:outputLabel value="nazwa pełna" style="font-weight: 700"/>
                <h:outputLabel value="nazwa skrocona" style="font-weight: 700"/>
                <h:outputLabel value="nip" style="font-weight: 700"/>
                <h:outputLabel value="kod pocztowy" style="font-weight: 700"/>
                <h:outputLabel value="miejscowość" style="font-weight: 700"/>
                <p:inputText id="nazwaPole" value="#{KlView.selected.npelna}"  accesskey="s" title="pełna nazwa kontrahenta" maxlength="55" style="width: 200px" required="true" requiredMessage="Pole nazwy pełnej nie może byc puste" onfocus="selcolor();">
                    <p:watermark for="nazwaPole" value="pełna nazwa kontrahenta 55znakow" /> 
                </p:inputText>
                <p:inputText id="symbolPole" value="#{KlView.selected.nskrocona}" maxlength="20" style="width: 200px" required="true" requiredMessage="Pole nazwa skrocona nie może byc puste">
                    <p:watermark for="symbolPole" value="hasłowo, np:FORTEX" /> 
                </p:inputText>
                <p:inputText id="nipPole" value="#{KlView.selected.nip}" maxlength="20" style="width: 200px">
                    <p:watermark for="nipPole" value="bez -" /> 
                </p:inputText>
                <p:inputMask id="kodPole" value="#{KlView.selected.kodpocztowy}" maxlength="6" style="width: 200px" required="true" requiredMessage="Pole kod pocztowy nie może byc puste" mask="99-999"/>
                <p:autoComplete id="miejscowoscPole" value="#{KlView.selected.miejscowosc}" completeMethod="#{miasta.complete}"
                                var="p" itemLabel="#{p}" itemValue="#{p}" 
                                minQueryLength="1" maxResults="10" maxlength="20"  forceSelection="false" 
                                effect="clip" autocomplete="true" queryDelay="100" 
                                required="true" requiredMessage="Pole miejscowosc nie może byc puste" style="width: 200px">
                    <p:ajax event="change" partialSubmit="true" global="false"/>
                </p:autoComplete>
                
                <h:outputLabel value="ulica" style="font-weight: 700"/>
                <h:outputLabel value="dom" style="font-weight: 700"/>
                <h:outputLabel value="lokal" style="font-weight: 700"/>
                <h:outputLabel value="kolumna w pkpir" style="font-weight: 700"/>
                <h:outputLabel value="" style="font-weight: 700"/>
               
                <p:inputText id="ulicaPole" value="#{KlView.selected.ulica}"   style="width: 200px" required="true" requiredMessage="Pole ulica nie może byc puste"/>
                <p:inputText id="domPole" value="#{KlView.selected.dom}" style="width: 200px" required="true" requiredMessage="Pole dom nie może byc puste"/>
                <p:inputText id="lokalPole" value="#{KlView.selected.lokal}"  style="width: 200px"/>

                <p:selectOneMenu id="pkpirPole" value="#{KlView.selected.pkpirKolumna}"   style="width: 200px" effect="clip" effectSpeed="100" height="190">
                    <f:selectItems value="#{kolmn.kolumnList}" />
                </p:selectOneMenu>
                 
                <p:commandButton value="dodaj" action="#{KlView.dodajKlienta()}" accesskey="w" update="@form :formY" />
            
            </p:panelGrid>
            <p:panelGrid id="polawprowadzania1" columns="5" >
                <h:outputLabel value="kraj*" style="font-weight: 700"/>
                <h:outputLabel value="konto bankowe*" style="font-weight: 700"/>
                <h:outputLabel value="email*" style="font-weight: 700"/>
                <h:outputLabel value="znacznik1*" style="font-weight: 700"/>
                <h:outputLabel value="pesel*" style="font-weight: 700"/>
                <p:autoComplete id="krajPole" value="#{KlView.selected.krajnazwa}" completeMethod="#{panstwa.complete}"
                                var="p" itemLabel="#{p}" itemValue="#{p}" 
                                minQueryLength="1" maxResults="10" maxlength="25"  forceSelection="true" 
                                effect="clip" autocomplete="true" queryDelay="100" 
                                style="width: 200px" >
                    <p:ajax event="change" partialSubmit="true" global="false"/>
                </p:autoComplete>
                <p:inputText id="bankPole" value="#{KlView.selected.kontobank}" maxlength="26" style="width: 200px" />
                <p:inputText id="emailPole" value="#{KlView.selected.email}" style="width: 200px" >
                    <p:ajax event="focus" listener="#{KlView.dodajpustegomaila}"/>
                </p:inputText>
                
                <p:inputText id="znacznik1Pole" value="#{KlView.selected.znacznik1}" style="width: 200px" />
                 <p:inputText id="peselPole" value="#{KlView.selected.pesel}" maxlength="11" style="width: 200px"/>
            </p:panelGrid>
           
        </p:panel>
    </p:panel>
    <p:separator/>
    </h:form>
<!--    Wykaz wprowadzonych kontrahentów-->
    <h:form id="formY">
        <p:growl/>
        <p:dataTable var="wpis" value="#{KlView.kl1}"  id="tabelaKontr" editable="true"
                 paginator="true" paginatorAlwaysVisible="true" rows="20"
                 paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                 rowsPerPageTemplate="20,28,36,50" 
                 rowKey="#{wpis.nip}" selection="#{KlView.selected}" selectionMode="single"
                 emptyMessage="Nie ma klientów" style="margin-left: 2%; width: 90%;">
            <p:ajax event="rowEdit" update=":formX:mess_add" listener="#{KlView.edit}" />
        <f:facet name="header">  
            <h:outputText value="Wykaz klientów" />  
        </f:facet>

            <p:column id="Column1" headerText="lp" sortBy="nip}"  filterBy="nip" filterMatchMode="startsWith" filterMaxLength="10">  
            <f:facet name="header">  
                <h:outputText value="nip" />  
            </f:facet> 
            <h:outputText value="#{wpis.nip}" />
        </p:column>
            <p:column id="Column2" headerText="lp" sortBy="npelna}" filterBy="npelna" filterMatchMode="contains" width="300">  
            <f:facet name="header">  
                <h:outputText value="nazwa pełna" />  
            </f:facet> 
             <p:cellEditor>  
                    <f:facet name="output">  
                        <h:outputText value="#{wpis.npelna}"/>
                    </f:facet>  
                    <f:facet name="input">  
                        <p:inputText value="#{wpis.npelna}"/>
                    </f:facet>  
                </p:cellEditor>
        </p:column>

            <p:column id="Column2a" headerText="lp" sortBy="nskrocona}" filterBy="nskrocona" filterMatchMode="contains" width="300">  
            <f:facet name="header">  
                <h:outputText value="nazwa skrócona" />  
            </f:facet> 
             <p:cellEditor>  
                    <f:facet name="output">  
                        <h:outputText value="#{wpis.nskrocona}"/>
                    </f:facet>  
                    <f:facet name="input">  
                        <p:inputText value="#{wpis.nskrocona}"/>
                    </f:facet>  
                </p:cellEditor>
        </p:column>
            <p:column id="Column3" sortBy="miejscowosc}" filterBy="miejscowosc" filterMatchMode="contains" width="200">  
            <f:facet name="header">  
                <h:outputText value="miejscowość" />  
            </f:facet> 
            <h:outputText value="#{wpis.kodpocztowy} #{wpis.miejscowosc}" />
        </p:column>
         <p:column id="Column31" sortBy="ulica}" filterBy="ulica" filterMatchMode="contains" width="200">  
            <f:facet name="header">  
                <h:outputText value="ulica" />  
            </f:facet> 
            <h:outputText value="#{wpis.ulica} #{wpis.dom}/#{wpis.lokal}" />
        </p:column>
            <p:column id="Column4" headerText="lp" sortBy="pkpirKolumna}" filterBy="pkpirKolumna" filterMatchMode="contains" >  
            <f:facet name="header">  
                <h:outputText value="kolumna" />  
            </f:facet>
                <p:cellEditor>  
                    <f:facet name="output">  
                        <h:outputText value="#{wpis.pkpirKolumna}"/>
                    </f:facet>  
                    <f:facet name="input">  
                         <p:selectOneMenu id="pkpirPole" value="#{wpis.pkpirKolumna}"   style="width: 200px" effect="clip" effectSpeed="100" height="190">
                    <f:selectItems value="#{kolmn.kolumnList}" />
                </p:selectOneMenu>
                    </f:facet>  
                </p:cellEditor>
        </p:column>
            <p:column id="Column4a" headerText="lp" sortBy="email}" filterBy="email" filterMatchMode="contains" >  
            <f:facet name="header">  
                <h:outputText value="email" />  
            </f:facet>
                <p:cellEditor>  
                    <f:facet name="output">  
                        <h:outputText value="#{wpis.email}"/>
                    </f:facet>  
                    <f:facet name="input">  
                        <p:inputText value="#{wpis.email}"/>
                    </f:facet>  
                </p:cellEditor>
        </p:column>
        <p:column id="editColumn" headerText="edytuj">
            <p:rowEditor />  
        </p:column>
        <p:column id="deleteColumn" headerText="usuń">
            <p:commandButton actionListener="#{KlView.destroy(wpis)}" onclick="confirmation.show()" id="delete" icon="ui-icon ui-icon-trash" type="submit" update=":formY" />
        </p:column>

    </p:dataTable>
    </h:form>
</ui:composition>   


