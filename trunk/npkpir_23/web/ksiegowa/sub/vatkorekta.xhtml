<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    >

    <h:form id="formX">
        <p:growl id="msg" autoUpdate="true"/>
        <p:panel header="Wykaz wysłanych deklaracji"/>
        <p:dataTable value="#{vatKorektaView.deklaracjeWyslane}" var="item" sortBy="#{item.miesiac}" rowIndexVar="row"
                    id="dokumentyLista" emptyMessage="brak deklaracji do wyslania"
                    paginator="true" paginatorAlwaysVisible="true" rows="1"
                    paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                    rowsPerPageTemplate="1, 6,12,18,24,32,50" sortOrder="descending"
                     >
            <p:column style="width: 3%;">
                <p:rowToggler/>
            </p:column>
            <p:ajax event="rowEdit" update=":formX:msg" listener="#{deklaracjevatView.edit}" />
            <p:column headerText="wersja" width="60">
                <h:outputText value="#{item.wzorschemy}"/>
            </p:column>
            <p:column headerText="dane">
                <p:dataGrid columns="1" value="#{item.selected}" var="loop">
                    <h:panelGrid columns="4">
                        <h:outputText value="rodzaj deklaracji"/><h:outputText value="#{loop.rodzajdeklaracji}" style="font-weight: 900;"/>
                        <h:outputText value="podatnik"/><h:outputText value="#{item.podatnik}" style="font-weight: 900;"/>
                        <h:outputText value="miesięczna/kwartalna"/><h:outputText value="#{item.miesiackwartal eq false ? 'miesięczna' : 'kwartalna'}" style="font-weight: 900;"/>
                        <h:outputText value="okres rozliczeniowy"/><h:outputText value="#{item.rok}#{item.rok != null ? '/' : null}#{item.miesiac}" style="font-weight: 900;"/>
                        <h:outputText value="pierw./kor."/><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}" style="font-weight: 900;"/>
                        <h:outputText value="nazwa urzędu"/><h:outputText value="#{loop.nazwaurzedu}"/>
                        <h:outputText value="status"/><h:outputText value="#{item.status}"/>
                        <h:outputText value="opis"/><h:outputText value="#{item.opis}"/>
                        <h:outputText value="data wysyłki"/><h:outputText value="#{item.datazlozenia}"/>
                        <h:outputText value="data potwierdzenia"/><h:outputText value="#{item.dataupo}"/>
                    </h:panelGrid>
                    <h:panelGrid columns="4">
                        <h:outputText value="należny (p.46)"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI46}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="naliczony (p.55)"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI55}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="przeniesienie (p.47)"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI47}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="do zapłaty (p.58)"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI58}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="do zwrotu(p.60)"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI60}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="na rachunek bankowy 25 dni"/><h:outputText value="#{loop.pozycjeszczegolowe.poleI62}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                        <h:outputText value="kwota autoryzacyjna"/><h:outputText value="#{loop.kwotaautoryzacja}" style="float: right;">
                            <f:convertNumber minFractionDigits="0" locale="PL"/></h:outputText>
                    </h:panelGrid>
                </p:dataGrid>
            </p:column>
            <p:column id="previewColumn" headerText="operacje" width="70">
                <p:panelGrid columns="1">
                    <p:commandButton value="Pdf" actionListener="#{pdfVAT7.drukuj(item, row)}"  style="margin-left: 10px; width: 80px;"/>
                </p:panelGrid>
            </p:column>
            <p:column id="deleteColumn" headerText="usuń" width="70">
                <p:commandButton actionListener="#{deklaracjevatView.destroy(item)}" onclick="confirmation.show()" id="delete" icon="ui-icon ui-icon-trash" type="submit" style="width: 80px;"/>
            </p:column>
            <p:rowExpansion>
                <p:column id="ewidencjavat" headerText="treść wysyłki" width="300" resizable="true">
                    <h:outputText value="#{item.deklaracja}"/>
                </p:column>
            </p:rowExpansion>
        </p:dataTable>
    </h:form>
   
    
</ui:composition>   


