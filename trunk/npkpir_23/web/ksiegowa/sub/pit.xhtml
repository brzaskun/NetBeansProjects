<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:pe="http://primefaces.org/ui/extensions">
    
    <p:tabView id="akordeon" >
       
        <p:tab id="tab1" title="Przeglądaj PIT" rendered="#{infoView.ryczaltnieryczalt eq 'Firma aktuanie jest na ryczałcie' ? false : true}" >
            <p:panelGrid columns="4" style="width: 600px">
                <h:form id="formpi" style="width: 400px" >
                    <p:growl id="messages"/>

                    <p:panel header="wprowadzone PIT-y: " /><br/>

                    <p:dataTable id="tablicapit" value="#{pitView.lista}" var="loop" selectionMode="single" selection="#{pitView.biezacyPit}" rowKey="#{loop.id}" sortBy="#{loop.pkpirM}" >
                        <p:ajax event="rowSelect" update=":akordeon:formpi2:zestawieniepitview" global="false"/>
                        <p:column headerText="okres rozliczeniowy: ">
                            <h:outputText value="#{loop.pkpirR}-"/><h:outputText value="#{loop.pkpirM}"/>
                        </p:column>
                        <p:column headerText="udzialowiec: ">
                            <h:outputText value="#{loop.udzialowiec}"/>
                        </p:column>
                        <p:column headerText="należna zaliczka: ">
                            <h:outputText value="#{loop.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton value="usun pit"  actionListener="#{pitView.usun()}" update=":akordeon:formpi:tablicapit" style="width: 120px;"/>
                </h:form>
                <h:form id="formpi2">
                    <p:panel header="przegląd wybranego PIT-u" style="margin-left: 50px;width: 350px"/><br/>
                    <p:panelGrid id="zestawieniepitview" columns="2" style="margin-left: 50px; width: 350px; height: 670px;">
                        <h:outputText value="firma"/><h:outputText value="#{pitView.biezacyPit.podatnik}"/>
                        <h:outputText value="podatnik"/><h:outputText value="#{pitView.biezacyPit.udzialowiec}"/> 
                        <h:outputText value="pkpirR"/><h:outputText value="#{pitView.biezacyPit.pkpirR}"/>
                        <h:outputText value="pkpirM"/><h:outputText value="#{pitView.biezacyPit.pkpirM}"/>
                        <h:outputText value="przychody narast."/>
                        <h:outputText value="#{pitView.biezacyPit.przychody}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="koszty narast."/>
                        <h:outputText value="#{pitView.biezacyPit.koszty}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="udział"/><h:outputText value="#{pitView.biezacyPit.udzial}" style="padding-left: 20%; font-weight: 700; float: right;"/>
                        <h:outputText value="przychody udział"/>
                        <h:outputText value="#{pitView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="koszty udział"/>
                        <h:outputText value="#{pitView.biezacyPit.kosztyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="wynik od pocz. rok"/>
                        <h:outputText value="#{pitView.biezacyPit.wynik}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="ZUS 51"/>
                        <h:outputText value="#{pitView.biezacyPit.zus51}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="strata z lat ub"/>
                        <h:outputText value="#{pitView.biezacyPit.strata}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="podstawa opod."/>
                        <h:outputText value="#{pitView.biezacyPit.podstawa}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="podatek"/>
                        <h:outputText value="#{pitView.biezacyPit.podatek}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="ZUS 52"/>
                        <h:outputText value="#{pitView.biezacyPit.zus52}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="podatek należny od pocz rok"/>
                        <h:outputText value="#{pitView.biezacyPit.pododpoczrok}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="zaliczki za pop.m-ce"/>
                        <h:outputText value="#{pitView.biezacyPit.nalzalodpoczrok}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="należna zal. za m-c"/>
                        <h:outputText value="#{pitView.biezacyPit.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="do zapłaty"/>
                        <h:outputText value="#{pitView.biezacyPit.dozaplaty}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="termin płatności"/><h:outputText value="#{pitView.biezacyPit.terminwplaty}"/>
                        <h:outputText value="przelano"/><h:outputText value="#{pitView.biezacyPit.przelano}"/>
                        <h:outputText value="zamknięty"/><h:outputText value="#{pitView.biezacyPit.zamkniety}"/>
                       
                    </p:panelGrid>
                      <p:panelGrid  columns="3" style="margin-left: 50px">
                          <p:commandButton  value="Pdf" actionListener="#{sesjaView.dodajwydruk()}" action="#{pdfPIT5.drukujarch()}" onsuccess="wydrukpit5('#{WpisView.podatnikWpisu}');" oncomplete="$('#akordeon\\:formpi2\\:pitwysylka').show();" style="width: 120px;">
                                </p:commandButton>
                    <p:commandButton id="pitwysylka" value="Wyślij podatnikowi" actionListener="#{sesjaView.dodajmail()}" onclick="confirmation.show();" style="display: none;"/>
                          </p:panelGrid>
                </h:form>
            </p:panelGrid>
        </p:tab>
        <p:tab id="tab2" title="Oblicz PIT" rendered="#{infoView.ryczaltnieryczalt eq 'Firma aktuanie jest na ryczałcie' ? false : true}" >
                  <h:form>
        <p:ajaxStatus style="width:64px;height:64px;position:fixed;right:250px;bottom:250px">
            <f:facet name="start"><p:graphicImage url="/resources/images/ajax_loaderc.gif"/></f:facet>
            <f:facet name="success"><h:outputText value="Skonczono" /></f:facet>
            <f:facet name="error">Wystąpił nieoczekiewany błąd. Dane nie zostały utracone. Przejdź do strony logowania i zaloguj się ponownie</f:facet>
        </p:ajaxStatus>
    </h:form>
            <p:panelGrid columns="1" style="width: 400px">
                <h:form id="formpit">
                    <p:growl id="messages" />
                    <p:panelGrid  columns="2" >
                        <p:panelGrid  columns="1" >
                            <p:panel header="wybierz osobę: " style="width: 250px;"/>
                            <p:selectOneMenu value="#{ZestawienieView.wybranyudzialowiec}">
                                <f:selectItem itemLabel="wybierz osobe" itemValue="wybierz osobe"/>
                                <f:selectItems value="#{ZestawienieView.listawybranychudzialowcow}"/>
                                <p:ajax event="change" update=":akordeon:formpit" listener="#{ZestawienieView.obliczPit()}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <p:panelGrid  columns="1" >
                            <p:panel header="dane nowego PIT-u: #{ZestawienieView.wybranyudzialowiec} #{ZestawienieView.wybranyprocent}%" style="margin-left: 50px;width: 400px"/>
                            <p:panelGrid id="zestawieniepit" columns="2" style="margin-left: 50px; width: 400px;">
                                <h:outputText value="firma"/><h:inputText value="#{ZestawienieView.biezacyPit.podatnik}"/>
                                <h:outputText value="podatnik"/><h:inputText value="#{ZestawienieView.biezacyPit.udzialowiec}"/>
                                <h:outputText value="pkpirR"/><h:inputText value="#{ZestawienieView.biezacyPit.pkpirR}"/>
                                <h:outputText value="pkpirM"/><h:inputText value="#{ZestawienieView.biezacyPit.pkpirM}"/>
                                <h:outputText value="przychody narast."/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.przychody}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="koszty narast."/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.koszty}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="udział"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.udzial}" style="font-weight: 700; float: right;"/>
                                <h:outputText value="przychody udział"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="koszty udział"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.kosztyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="wynik od pocz. rok"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.wynik}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="ZUS 51 (z ręki)"/>
                                <p:panelGrid columns="2">
                                    <h:inputText value="#{ZestawienieView.biezacyPit.zus51}" style=" font-weight: 700; float: right;">
                                        <f:convertNumber locale="PL"/>
                                        <p:ajax event="keyup" listener="#{ZestawienieView.setZus51zreki(true)}" update=":akordeon:formpit:reka51"/>
                                    </h:inputText>
                                    <h:selectBooleanCheckbox id="reka51" label="z ręki" value="#{ZestawienieView.zus51zreki}"/>
                                </p:panelGrid>
                                <h:outputText value="strata z lat ub"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.strata}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="podstawa opod."/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.podstawa}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="podatek"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.podatek}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="ZUS 52 (z ręki)"/>
                                <p:panelGrid columns="2">
                                    <h:inputText value="#{ZestawienieView.biezacyPit.zus52}" style=" font-weight: 700; float: right;">
                                        <f:convertNumber locale="PL"/>
                                        <p:ajax event="keyup" listener="#{ZestawienieView.setZus52zreki(true)}" update=":akordeon:formpit:reka52"/>
                                    </h:inputText>
                                    <h:selectBooleanCheckbox id="reka52" label="z ręki" value="#{ZestawienieView.zus52zreki}"/>
                                </p:panelGrid>
                                <h:outputText value="podatek należny od pocz rok"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.pododpoczrok}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="zaliczki za pop.m-ce"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.nalzalodpoczrok}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="należna zal. za m-c"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.naleznazal}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="do zapłaty"/>
                                <h:inputText value="#{ZestawienieView.biezacyPit.dozaplaty}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:inputText>
                                <h:outputText value="termin płatności"/><h:inputText value="#{ZestawienieView.biezacyPit.terminwplaty}"/>
                                <h:outputText value="przelano"/><h:inputText value="#{ZestawienieView.biezacyPit.przelano}"/>
                                <h:outputText value="zamknięty"/><h:inputText value="#{ZestawienieView.biezacyPit.zamkniety}"/>
                            </p:panelGrid>
                            <p:panelGrid  columns="3" style="margin-left: 50px">
                                <p:commandButton  value="Pdf" actionListener="#{sesjaView.dodajwydruk()}" action="#{pdfPIT5.drukuj()}" onsuccess="wydrukpit5('#{WpisView.podatnikWpisu}');" style="width: 120px;">
                                </p:commandButton>

                                <p:commandButton value="przelicz"  action="#{ZestawienieView.obliczPit()}" update="@form, :akordeon:formpi:" type="submit" style="width: 120px"/>
                                <p:commandButton value="zachowaj pit"  action="#{ZestawienieView.zachowajPit()}" update="@form, :akordeon:formpi:" type="submit" style="width: 120px"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:panelGrid>
                </h:form>
            </p:panelGrid>
        </p:tab>
        <!--Plansza dla ryczałtu-->
        <p:tab id="tab3" title="Przeglądaj Ryczałt" rendered="#{infoView.ryczaltnieryczalt eq 'Firma aktuanie jest na ryczałcie' ? true : false}">
            <p:panelGrid columns="4" style="width: 600px">
                <h:form id="formpi1" style="width: 400px" >
                    <p:growl id="messages"/>

                    <p:panel header="wprowadzone PIT-y: " /><br/>

                    <p:dataTable id="tablicapit" value="#{ryczView.lista}" var="loop" selectionMode="single" selection="#{ryczView.biezacyPit}" rowKey="#{loop.id}" sortBy="#{loop.pkpirM}" >
                        <p:ajax event="rowSelect" update=":akordeon:formpi3:zestawieniepitview" global="false"/>
                        <p:column headerText="okres rozliczeniowy: ">
                            <h:outputText value="#{loop.pkpirR}-"/><h:outputText value="#{loop.pkpirM}"/>
                        </p:column>
                        <p:column headerText="udzialowiec: ">
                            <h:outputText value="#{loop.udzialowiec}"/>
                        </p:column>
                        <p:column headerText="należna zaliczka: ">
                            <h:outputText value="#{loop.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;"><f:convertNumber locale="PL"/></h:outputText>
                        </p:column>
                    </p:dataTable>
                    <p:commandButton value="usun pit"  actionListener="#{ryczView.usun()}" update=":akordeon:formpi1:tablicapit" style="width: 120px;"/>
                </h:form>
                <h:form id="formpi3">
                    <p:panel header="przegląd wybranego PIT-u" style="margin-left: 50px;width: 400px"/><br/>
                    <p:panelGrid id="zestawieniepitview" columns="2" style="margin-left: 50px; width: 400px; height: 670px;">
                        <h:outputText value="firma"/><h:outputText value="#{ryczView.biezacyPit.podatnik}"/>
                        <h:outputText value="podatnik"/><h:outputText value="#{ryczView.biezacyPit.udzialowiec}"/> 
                        <h:outputText value="rok"/><h:outputText value="#{ryczView.biezacyPit.pkpirR}"/>
                        <h:outputText value="miesiąc"/><h:outputText value="#{ryczView.biezacyPit.pkpirM}"/>
                        <h:outputText value="przychody za mc"/>
                        <p:panelGrid columns="2"  style="width: 200px;">
                            <ui:repeat value="#{ryczView.biezacyPit.listapodatkow}" var="wpis" varStatus="rowStat">
                                <h:outputText value="stawka: #{ryczView.biezacyPit.listapodatkow[rowStat.index].stawka}"/>
                                <h:outputText value="#{ryczView.biezacyPit.listapodatkow[rowStat.index].przychod}" style="padding-left: 20%; font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:outputText> <br/>
                            </ui:repeat>
                        </p:panelGrid>
                        <h:outputText value="udział"/><h:outputText value="#{ryczView.biezacyPit.udzial}" style="padding-left: 20%; font-weight: 700; float: right;"/>
                        <h:outputText value="przychody udział"/>
                        <h:outputText value="#{ryczView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="wynik od pocz. rok"/>
                        <h:outputText value="#{ryczView.biezacyPit.wynik}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="ZUS 51"/>
                        <h:outputText value="#{ryczView.biezacyPit.zus51}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="strata z lat ub"/>
                        <h:outputText value="#{ryczView.biezacyPit.strata}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="podstawa opod."/>
                        <h:outputText value="#{ryczView.biezacyPit.podstawa}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="podatek"/>
                        <h:outputText value="#{ryczView.biezacyPit.podatek}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="ZUS 52"/>
                        <h:outputText value="#{ryczView.biezacyPit.zus52}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="należna zaliczka"/>
                        <h:outputText value="#{ryczView.biezacyPit.naleznazal}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="do zapłaty"/>
                        <h:outputText value="#{ryczView.biezacyPit.dozaplaty}" style="padding-left: 20%; font-weight: 700; float: right;">
                            <f:convertNumber locale="PL"/></h:outputText>
                        <h:outputText value="termin płatności"/><h:outputText value="#{ryczView.biezacyPit.terminwplaty}"/>
                        <h:outputText value="przelano"/><h:outputText value="#{ryczView.biezacyPit.przelano}"/>
                        <h:outputText value="zamknięty"/><h:outputText value="#{ryczView.biezacyPit.zamkniety}"/>
                    </p:panelGrid>
                </h:form>
            </p:panelGrid>
        </p:tab>
        <p:tab id="tab4" title="Oblicz Ryczałt" rendered="#{infoView.ryczaltnieryczalt eq 'Firma aktuanie jest na ryczałcie' ? true : false}">
               <h:form>
        <p:ajaxStatus style="width:64px;height:64px;position:fixed;right:250px;bottom:250px">
            <f:facet name="start"><p:graphicImage url="/resources/images/ajax_loaderc.gif"/></f:facet>
            <f:facet name="success"><h:outputText value="Skonczono" /></f:facet>
            <f:facet name="error">Wystąpił nieoczekiewany błąd. Dane nie zostały utracone. Przejdź do strony logowania i zaloguj się ponownie</f:facet>
        </p:ajaxStatus>
    </h:form> 
            <h:form id="formpit1">
                <p:growl id="messages" showDetail="true"/>
                <p:panelGrid  columns="2" >
                    <p:panelGrid  columns="1" >
                        <p:panel header="wybierz osobę: " style="width: 250px;"/>
                        <p:selectOneMenu value="#{ZestawienieRyczaltView.wybranyudzialowiec}">
                            <f:selectItem itemLabel="wybierz osobe" itemValue="wybierz osobe"/>
                            <f:selectItems value="#{ZestawienieRyczaltView.listawybranychudzialowcow}"/>
                            <p:ajax event="change" update=":akordeon:formpit1" listener="#{ZestawienieRyczaltView.obliczPit()}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <p:panelGrid  columns="1" >
                        <p:panel header="dane nowego PIT-u: #{ZestawienieRyczaltView.wybranyudzialowiec} #{ZestawienieRyczaltView.wybranyprocent}%" style="margin-left: 50px;width: 400px"/>
                        <p:panelGrid id="zestawieniepit" columns="2" style="margin-left: 50px; width: 400px;">
                            <h:outputText value="firma"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.podatnik}"/>
                            <h:outputText value="podatnik"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.udzialowiec}"/>
                            <h:outputText value="rok"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.pkpirR}"/>
                            <h:outputText value="miesiąc"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.pkpirM}"/>
                            <h:outputText value="przychody za mc"/>
                            <ui:repeat value="#{ZestawienieRyczaltView.biezacyPit.listapodatkow}" var="wpis" varStatus="rowStat">
                                <h:outputText value="stawka: #{ZestawienieRyczaltView.biezacyPit.listapodatkow[rowStat.index].stawka}"/>
                                <h:outputText value="#{ZestawienieRyczaltView.biezacyPit.listapodatkow[rowStat.index].przychod}" style="padding-left: 20%; font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/></h:outputText> <br/>
                            </ui:repeat>
                            <h:outputText value="udział"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.udzial}" style="font-weight: 700; float: right;"/>
                            <h:outputText value="przychody udział"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.przychodyudzial}" style="padding-left: 20%; font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="wynik od pocz. rok"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.wynik}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="ZUS 51 (z ręki)"/>
                            <p:panelGrid columns="2">
                                <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.zus51}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/>
                                    <p:ajax event="keyup" listener="#{ZestawienieRyczaltView.setZus51zreki(true)}" update=":akordeon:formpit1:reka51"/>
                                </h:inputText>
                                <h:selectBooleanCheckbox id="reka51" label="z ręki" value="#{ZestawienieRyczaltView.zus51zreki}"/>
                            </p:panelGrid>
                            <h:outputText value="strata z lat ub"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.strata}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="podstawa opod."/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.podstawa}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="podatek"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.podatek}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="ZUS 52 (z ręki)"/>
                            <p:panelGrid columns="2">
                                <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.zus52}" style=" font-weight: 700; float: right;">
                                    <f:convertNumber locale="PL"/>
                                    <p:ajax event="keyup" listener="#{ZestawienieRyczaltView.setZus52zreki(true)}" update=":akordeon:formpit1:reka52"/>
                                </h:inputText>
                                <h:selectBooleanCheckbox id="reka52" label="z ręki" value="#{ZestawienieRyczaltView.zus52zreki}"/>
                            </p:panelGrid>
                            <h:outputText value="należna zal. za m-c"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.naleznazal}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="do zapłaty"/>
                            <h:inputText value="#{ZestawienieRyczaltView.biezacyPit.dozaplaty}" style=" font-weight: 700; float: right;">
                                <f:convertNumber locale="PL"/></h:inputText>
                            <h:outputText value="termin płatności"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.terminwplaty}"/>
                            <h:outputText value="przelano"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.przelano}"/>
                            <h:outputText value="zamknięty"/><h:inputText value="#{ZestawienieRyczaltView.biezacyPit.zamkniety}"/>
                        </p:panelGrid>
                        <p:panelGrid  columns="3" style="margin-left: 90px">
                           <p:commandButton  value="Pdf" actionListener="#{sesjaView.dodajwydruk()}" action="#{pdfPIT28.drukuj()}" onsuccess="wydrukpit5('#{WpisView.podatnikWpisu}');" style="width: 120px;">
                                </p:commandButton>

                            <p:commandButton value="przelicz"  action="#{ZestawienieRyczaltView.obliczPit()}" update="@form, :akordeon:formpi:" type="submit" style="width: 120px"/>
                            <p:commandButton value="zachowaj pit"  action="#{ZestawienieRyczaltView.zachowajPit()}" update="@form, :akordeon:formpi1:" type="submit" style="width: 120px"/>
                        </p:panelGrid>
                    </p:panelGrid>
                </p:panelGrid>
            </h:form>
        </p:tab>
        <!--Plansza dla ryczaltu-->

        <p:tab id="tab5" title="Straty z lat ubiegłych. Podatnik: #{podatnikView.selectedStrata.nazwapelna}">
            <h:form id="form1">
                <p:dataTable value="#{podatnikView.selectedStrata.stratyzlatub}" emptyMessage="Nie ma nic" var="loop" style="width: 600px;">
                    <p:column headerText="rok">
                        <h:outputText value="#{loop.rok}" />
                    </p:column>
                    <p:column headerText="kwota" width="100">
                        <h:outputText value="#{loop.kwota}" style="padding-left: 10%; float: right;">
                            <f:convertNumber currencyCode="GBP" type="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="50%" width="100">
                        <h:outputText value="#{loop.polowakwoty}" style="padding-left: 10%; float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="wykorzystano" width="100">
                        <h:outputText value="#{loop.wykorzystano}" style="padding-left: 10%; float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="zostało" width="100">
                        <h:outputText value="#{loop.zostalo}" style="padding-left: 10%; float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="usuń">
                        <p:commandButton icon="ui-icon-trash" actionListener="#{podatnikView.usunstrate(loop)}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
            <h:form id="form2">
                <p:growl id="messages"/>
                <p:focus for="panelstraty">
                    <p:panelGrid columns="2" id="panelstraty" style="margin-top: 10px;margin-bottom: 10px;">
                        <h:outputText value="rok"/>
                        <h:inputText value="#{podatnikView.stratarok}" accesskey="s"/>
                        <h:outputText value="kwota"/>
                        <pe:inputNumber value="#{podatnikView.stratakwota}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="width: 120px" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="0" />  
                        <h:outputText value="wykorzystano"/>
                        <pe:inputNumber value="#{podatnikView.stratawykorzystano}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="width: 120px" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="0" /> 
                    </p:panelGrid>
                </p:focus>
                <p:commandButton value="dodaj" actionListener="#{podatnikView.dodajstrate()}" update="@form"/>
            </h:form>
        </p:tab>
    </p:tabView>
</ui:composition>   

