<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">
    <p:commandButton  value="Zachowaj w pdf" actionListener="#{sesjaView.dodajwydruk()}" action="#{pdfObroty.drukuj()}" >
    </p:commandButton>
    <p:commandButton id="obrotywysylka" value="Wyślij podatnikowi" actionListener="#{sesjaView.dodajmail()}" onclick="confirmation.show();" style="display: none;">
    </p:commandButton>
    <p:panelGrid columns="4">
        <h:outputText value="   suma wartości netto wybranych dokumentów w zł: "/>
        <h:outputText  id="podsumowaniewybr" value="#{obrotyView.podsumowaniewybranychnetto}">
            <f:convertNumber minFractionDigits="2" locale="PL"/>
        </h:outputText>
        <h:outputText value=" -  suma wartości brutto wybranych dokumentów w zł: "/>
        <h:outputText  id="podsumowaniewybrnetto" value="#{obrotyView.podsumowaniewybranych}">
            <f:convertNumber minFractionDigits="2" locale="PL"/>
        </h:outputText>
    </p:panelGrid>
    <p:separator/>
    <p:outputPanel id="wrapper" deferred="true">

        <p:dataTable  var="wpis" value="#{obrotyView.obiektDOKmrjsfSelX}" id="dokumentyLista" filteredValue="#{obrotyView.dokumentyFiltered}"
                      selection="#{obrotyView.goscwybral}"  widgetVar="dokTable" filterDelay="600"
                      rowStyleClass="#{wpis.rodzTrans eq 'sprzedaz' ? 'old' : null}" rowKey="#{wpis.idDok}"
                      style="max-width: 1400px;" >
            <p:ajax event="toggleSelect" listener="#{obrotyView.sumawartosciwybranych}" update=":formX:podsumowaniewybr, :formX:podsumowaniewybrnetto"/>
            <p:ajax event="rowSelectCheckbox" listener="#{obrotyView.sumawartosciwybranych}" update=":formX:podsumowaniewybr, :formX:podsumowaniewybrnetto"/>
            <p:ajax event="rowUnselectCheckbox" listener="#{obrotyView.sumawartosciwybranych}" update=":formX:podsumowaniewybr, :formX:podsumowaniewybrnetto"/>
            <f:facet name="header">  
                <h:outputText value="Wykaz obrotow z kontrahentem" />
                <h:outputText value="- wyszukiwanie: " />  
                    <p:inputText id="globalFilter" onkeyup="dokTable.filter()" style="width:150px" />  
            </f:facet>
            <p:column selectionMode="multiple"  style="width: 5%;" >
            </p:column>
            <p:column id="idColumn" headerText="lp" filterStyle="display: none;" sortBy="idDok"  style="width: 5%;">  
                <h:outputText value="#{wpis.nrWpkpir}" />
            </p:column>
            <p:column id="dataColumn" headerText="data wyst" filterBy="dataWyst" filterMatchMode="contains" filterStyle="display: none;" sortBy="dataWyst"  style="width: 9%;">  
                <h:outputText value="#{wpis.dataWyst}">
                    <f:convertDateTime dateStyle="medium"  />
                </h:outputText>
            </p:column>
            <p:column id="kontrColumn" headerText="kontrahent" filterBy="kontr.npelna" filterMatchMode="contains" filterStyle="display: none;" sortBy="kontr.npelna" style="width: 14%;">  
                <h:outputText value="#{wpis.kontr.npelna}"  />
            </p:column>
            <p:column id="rodzTrColumn" headerText="rodzaj trans" filterBy="rodzTrans" filterMatchMode="contains" filterStyle="display: none;" sortBy="rodzTrans" style="width: 9%;">  
                <h:outputText value="#{wpis.rodzTrans}" />
            </p:column>
            <p:column id="typDokColumn" headerText="symbol dok" filterBy="typdokumentu" filterMatchMode="contains" filterStyle="display: none;" sortBy="typdokumentu" style="width: 9%;">  
                <h:outputText value="#{wpis.typdokumentu}" />
            </p:column>
            <p:column id="nrWlDokColumn" headerText="nr wł" filterBy="nrWlDk" filterMatchMode="contains" filterStyle="display: none;" sortBy="nrWlDk" style="width: 13%;">  
                <h:outputText value="#{wpis.nrWlDk}" />
            </p:column>
            <p:column id="opisColumn" headerText="opis" filterBy="opis" filterMatchMode="contains" filterStyle="display: none;" sortBy="opis"  style="width: 12%;">  
                <h:outputText value="#{wpis.opis}" />
            </p:column>
            <p:column id="kwotanettoColumn" headerText="netto" filterBy="netto" filterMatchMode="contains" filterStyle="display: none;" sortBy="netto" style="width: 12%;">  
                <h:outputText value="#{wpis.netto}" style="padding-left: 20%; font-weight: 700; float: right">
                    <f:convertNumber  locale="PL" minFractionDigits="2" />
                </h:outputText>
            </p:column>
            <p:column id="kwotabruttoColumn" headerText="brutto" filterBy="brutto" filterMatchMode="contains" filterStyle="display: none;" sortBy="brutto" style="width: 12%;">  
                <h:outputText value="#{wpis.brutto}" style="padding-left: 20%; font-weight: 700; float: right">
                    <f:convertNumber  locale="PL" minFractionDigits="2" />
                </h:outputText>
            </p:column>

        </p:dataTable>

    </p:outputPanel>
</ui:composition>   

