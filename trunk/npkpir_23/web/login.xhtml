
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:bcf="http://brzaskun.com/facelets">
    <f:view locale="#{localeChanger.locale}">
        <h:head>
            <meta http-equiv="Accept-Encoding" content="gzip"/>
            <h:outputStylesheet id="template" name="css/style.css"/>
            <h:outputScript library="js_common" name="language.js"/>
            <title>Biuro Rachunkowe Taxman</title>
        </h:head>
        <h:body>
                <p:notificationBar position="top" effect="slide" widgetVar="bar" styleClass="top" style="border: none;">  
                    <p style="text-align: center;"><h:outputText value="Witamy w programie księgowym Biura Rachunkowego Taxman" style="color: activecaption; font-size:24px; " /></p>  
                </p:notificationBar> 
                <p:panel style="margin-left: auto; margin-right: auto; width: 400px; border: none" >
                    <div style="height: 100px;  margin-left: auto; margin-right: auto;">
                        <p:messages id="logowanie"  autoUpdate="true"/>
                    </div>

                    <p:panelGrid columns="3" style="text-align: center; margin-top: 7%; margin-left: auto; margin-right: auto; width: 400px; border-style: hidden !important;">
                        <p:column >
                            <h:link outcome="pomoclogowanie" value="#{mgs.pomoc}"/>
                        </p:column>
                        <p:column>
                            <h:link outcome="zapomnialem" value="#{mgs['zapomialem.hasla']}"/>
                        </p:column>
                        <p:column>
                            <h:link outcome="rejestruj" value="#{mgs.rejestracja}"/>
                        </p:column>
                    </p:panelGrid>
                </p:panel>
            <h:form id="formlog1">
                <p:panel style="margin-top: 2%; margin-left: auto; margin-right: auto; width: 380px" header="">
                    <p:focus id="focus" context="logowaniepanel"/>
                    <p:panelGrid id="logowaniepanel" columns="2" style="margin-left: auto; margin-right: auto; margin-top: 4%; width: 350px; text-align: center;"  rendered="#{Logowanie.liczniklogowan gt 0}">
                        <h:outputText value="#{mgs.login}"/>
                        <h:inputText value="#{Logowanie.uzytk}" accesskey="s" required="true" style="width: 150px;" requiredMessage="Wpisz login!" autocomplete="true" onkeydown="bar.show()"/>
                        <h:outputText value="#{mgs.haslo}"/>
                        <h:inputSecret value="#{Logowanie.haslo}" required="true" style="width: 150px;" requiredMessage="Wpisz hasło!" autocomplete="true" />
                    </p:panelGrid>
                    <br/>
                    <p:panelGrid id="logowaniebutton" columns="1" style="margin-left: auto; margin-right: auto; width: 350px; text-align: center; border: none !important;">
                        <p:commandButton value="#{mgs.zaloguj}" action="#{Logowanie.login()}" ajax="false" style="width: 150px;" 
                                         icon="fa fa-user" rendered="#{Logowanie.liczniklogowan gt 0}"/>
                        <h:outputText value="Logowanie do systemu z tego numeru IP zostalo zablokowane na 24 godziny ze względów bezpieczeństwa. Podczas ostatniego loginu wielokrotnie podano złe dane logujące. Skontaktuj się z adminem lub odczekaj 24h." rendered="#{Logowanie.liczniklogowan eq 0}"/>
                    </p:panelGrid>
                    <!--                        <p:commandButton value="Wyloguj" action="{Logowanie.logout()}" update=":formlog1:logowanie" ajax="false"/>-->
                </p:panel>
            </h:form>
            <p:panel style="margin-left: auto; margin-right: auto; width: 400px; border: none; text-align: right;" >
                <h:form>
                    <p:commandButton styleClass="languagebutton" value="pl" actionListener="#{localeChanger.polishAction}" type="submit" ajax="false"/>
                    <p:commandButton styleClass="languagebutton" value="en" actionListener="#{localeChanger.englishAction}" type="submit" ajax="false"/>
                    <p:commandButton styleClass="languagebutton" value="de" actionListener="#{localeChanger.deutschAction}" type="submit" ajax="false"/>
                </h:form>
            </p:panel>
            <h:form id="infologowanie" >
                <p:panel style="margin-left: auto; margin-right: auto; width: 300px; border: none; text-align: center; font-size: smaller;" >
                    <h:outputFormat value="#{mgs.twojeIP1}" style="color: gray;">
                        <f:param value="#{Logowanie.ipusera}"/>
                    </h:outputFormat>
                    <br/>
                    <h:outputFormat value="#{mgs.twojeIP2}">
                        <f:param value="#{Logowanie.liczniklogowan}"/>
                    </h:outputFormat>
                </p:panel>
            </h:form>
            <!--eefe-->
        </h:body>
    </f:view>
</html>