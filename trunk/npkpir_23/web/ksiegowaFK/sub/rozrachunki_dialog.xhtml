
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:b="http://brzaskun.com/facelets">

  <!--to jest wlasciwy dialog-->
  <p:dialog id="dialogrozrachunki" header="Rozrachunki" widgetVar="dlgrozrachunki" resizable="false" >  
    <h:form id="formE" >
        <p:panelGrid columns="4">
            <h:outputText value="konto"/><h:inputText value="#{kontoZapisyFKView.wybranyzapis.konto}"/>
            <h:outputText value="dane:"/><h:outputText value="numer dok: #{kontoZapisyFKView.wybranyzapis.dokument.numer} data dok: #{kontoZapisyFKView.wybranyzapis.dokument.datawystawienia}" style="width: 900px;"/>
            <h:outputText value="kwota"/><h:inputText value="#{kontoZapisyFKView.wybranyzapis.kwotawn gt 0 ? kontoZapisyFKView.wybranyzapis.kwotawn : kontoZapisyFKView.wybranyzapis.kwotama}"/>
        </p:panelGrid>
        <p:dataTable id="dataList" value="#{kontoZapisyFKView.kontorozrachunki}" var="loop" rowIndexVar="row" style="width: 1000px;"
                     >
              <f:facet name="header">
                <h:outputText value="Dokumenty nie rozliczone"/>
            </f:facet>
            <p:column headerText="kwota rozliczenia" width="40">
                <h:inputText value="#{loop.kwotarozrachunku}"/>
            </p:column>
            <p:column headerText="kwota transakcji" width="40">
                <h:outputText value="#{loop.zapissparowany.kwotawn != 0 ? loop.zapissparowany.kwotawn : loop.zapissparowany.kwotama}" style="float: right;">
                        <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
            <p:column headerText="termin płatności" width="90">
                <h:outputText value="#{loop.zapissparowany.dokument.datawystawienia}"/>
            </p:column>
            <p:column headerText="opis transakcji" width="300">
                <h:outputText id="opis" value="#{loop.zapissparowany.opis}" />
            </p:column>
            <p:column headerText="nr rozrachunku" width="40">
                <h:outputText value="#{loop.zapissparowany.numer}"/>
            </p:column>
            <p:column headerText="id dokumentu" width="40">
                <h:outputText value="#{loop.zapissparowany.dokument.id}"/>
            </p:column>
            <p:column headerText="data wystawienia" width="40">
                <h:outputText value="#{loop.zapissparowany.dokument.datawystawienia}"/>
            </p:column>
            
            </p:dataTable>
        <p:commandButton value="zapisz" actionListener="#{dokfkView.dodaj()}" update=":formE" oncomplete="chowanienapoczatekdok();dlg123.hide();"/>
        </h:form>
    <p:separator />
    <h:form id="form1a" >
        <p:commandButton value="usun" actionListener="#{dokfkView.liczbawu}" update=":formE" oncomplete="aktualizujmapedialog(#{dokfkView.selected.konta.size()});"/>
    </h:form>
  </p:dialog>  
    
    
</ui:composition> 
