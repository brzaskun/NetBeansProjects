<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    >
<p:dialog id="dialogtrzeci" header="Zestawienie zaksięgowanych dokumentów" widgetVar="trzeci" 
              resizable="false"  onShow="ustawdialog('dialogtrzeci','menudokumenty');" closeOnEscape="true" onHide="resetujdialog('dialogtrzeci');" >
    <h:form>
        <p:hotkey bind="down" actionListener="#{dokfkView.moveDown()}" async="true"  oncomplete="przejdzwiersz();"/>
        <p:hotkey bind="up" actionListener="#{dokfkView.moveDown()}" async="true"  oncomplete="wrocwiersz();"/>
    </h:form>
         <h:form id="zestawieniedokumentow">
             <p:contextMenu id="contextmenuwpis" for=":zestawieniedokumentow:dataList">
                 <p:menuitem value="Pokazdokument" icon="ui-icon-circle-plus" update=":formwpisdokument:dataList" actionListener="#{dokfkView.wybranodokmessage}" oncomplete="pierwszy.show();"/>
         </p:contextMenu>
             <div style="height: 600px;">
                 <p:dataTable id="dataList" value="#{dokfkView.wykaz}" var="item" rowIndexVar="row" widgetVar="tablicadokumenty" 
                              selection="#{dokfkView.selected}" rowKey="#{item.dokfkPK}" selectionMode="single">
                     <p:ajax event="rowSelect"  listener="#{dokfkView.wybranodokmessage}" update=":formwpisdokument" />
            <p:column headerText="data" width="100">
                <h:outputText value="#{item.datawystawienia}"/>
            </p:column>
             <p:column headerText="symbol" width="150">
                  <h:outputText value="#{item.dokfkPK.seriadokfk}/#{item.dokfkPK.nrkolejny}/#{item.dokfkPK.rok}"/>
            </p:column>
            <p:column headerText="numer" width="100">
                    <h:outputText value="#{item.numer}"/>
            </p:column>
            <p:column headerText="zaksieg." width="80">
                    <h:outputText value="#{item.naniesionezapisy}"/>
            </p:column>
            <p:column headerText="konta">
                <p:dataTable var="wpis" value="#{item.konta}" editable="true">
                    <p:column headerText="id" width="70">
                            <h:outputText value="#{wpis.idwiersza}" />
                    </p:column>
                    <p:column headerText="opis" width="200">
                            <h:outputText value="#{wpis.opis}" rendered="#{wpis.typwiersza eq 0 ? true : false}"/>
                    </p:column>
                    <p:column headerText="wn" width="100">
                            <h:outputText value="#{wpis.kwotaWn}"  style="float: right;" rendered="#{wpis.typwiersza eq 1 || wpis.typwiersza eq 0 ? true : false}">  
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                            </h:outputText>
                     </p:column>
                       <p:column headerText="konto" width="100">
                        <h:outputText value="#{wpis.kontoWn.pelnynumer}" rendered="#{wpis.typwiersza eq 1 || wpis.typwiersza eq 0 ? true : false}"/>
                    </p:column>
                       <p:column headerText="ma" width="100">
                               <h:outputText value="#{wpis.kwotaMa}"  style="float: right;" rendered="#{wpis.typwiersza eq 2 || wpis.typwiersza eq 0 ? true : false}">   
                                      <f:convertNumber minFractionDigits="2" locale="PL"/>
                                </h:outputText>
                    </p:column>
                       <p:column headerText="konto" width="100">
                        <h:outputText value="#{wpis.kontoMa.pelnynumer}" rendered="#{wpis.typwiersza eq 2 || wpis.typwiersza eq 0 ? true : false}"/>
                    </p:column>
                    <p:column headerText="typ wiersza" width="100">
                        <h:outputText value="#{wpis.typwiersza eq 1 ? 'konto wn' : (wpis.typwiersza eq 2 ? 'konto ma' : 'oba')}"/>
                    </p:column>
          
                </p:dataTable>
            </p:column>
             <p:column headerText="" width="100">
                 <p:commandButton value="usun" actionListener="#{dokfkView.usundokument(item)}" styleClass="fkbutton" icon="ui-icon-trash" update=":zestawieniedokumentow:dataList"/>
                     </p:column>
           
        </p:dataTable>
                    </div>

            </h:form>
        
    </p:dialog>
</ui:composition>