<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions"
    >

    <p:dialog id="zapisy" header="Zapisy na kontach" widgetVar="zapisynakoncie" 
              resizable="true" onShow="ustawdialog('zapisy','menuraporty');" onHide="resetujdialog('menuraporty');"  closeOnEscape="true"  dynamic="true"
              >
        <p:layout fullPage="false" style="width: 1225px; height: 650px;">  
            <p:layoutUnit position="north" >
                    <h:outputText value="wybierz konto: "/>
                    <p:autoComplete id="kontoma" value="#{kontoView.wybranekonto}" completeMethod="#{kontoView.complete}"
                                    var="p" itemLabel="#{p.pelnynumer} #{p.nazwapelna}" itemValue="#{p}"
                                    minQueryLength="1" maxResults="15" maxlength="10" converter="KontoConv"
                                    global="false" converterMessage="Nieudana konwersja Klient"
                                    required="true" requiredMessage="Pole konta nie może byc puste" styleClass="kontoinput" 
                                    >
                        <f:ajax event="keyup" execute="@this"/>
                        <p:ajax event="blur" update=":form:dataList" />
                    </p:autoComplete>
            </p:layoutUnit>  
            <p:layoutUnit position="south">  
            </p:layoutUnit>  
            <p:layoutUnit position="west" size="350">
                 <p:panelGrid columns="2" >
                <p:commandButton id="rozwinwsz" value="rozwiń wszystkie" actionListener="#{planKontView.rozwinwszystkie()}" update=":form:dataList" style="float: left;" />
                <p:commandButton id="zwinwsz" value="zwiń wszystkie" actionListener="#{planKontView.zwinwszystkie()}" update=":form:dataList" style="float: left;" />
            </p:panelGrid>
                <h:form id="form">
                    <p:dataTable id="dataList" value="#{planKontView.wykazkont}" var="loop" rowIndexVar="row" selectionMode="single" selection="#{kontoView.wybranekonto}" rowKey="#{loop.id}"
                                 sortBy="#{loop.pelnynumer}" >
                        <p:ajax event="rowSelect" update=":kontoma" />
                        <p:column>
                            <p:commandButton value="+" actionListener="#{planKontView.rozwinkonto(loop.pelnynumer)}" update=":form:dataList" rendered="#{(loop.rozwin eq false)and(loop.mapotomkow eq true)}" style="width: 25px; height: 25px;"/>
                            <p:commandButton value="-" actionListener="#{planKontView.zwinkonto(loop.pelnynumer)}" update=":form:dataList" rendered="#{(loop.rozwin eq true)and(loop.mapotomkow eq true)}" style="width: 25px; height: 25px;"/>
                            <p:commandButton value="" update=":form:dataList" rendered="#{loop.mapotomkow eq false}" style="width: 25px; height: 25px;"/>
                        </p:column>
                        <p:column headerText="nr konta" style="width: 180px;" styleClass="#{loop.analityka eq 2 ? 'druga' : null}">
                            <h:outputText value="#{loop.pelnynumer}" /> 
                        </p:column>
                        <p:column headerText="nazwa pełna" style="width: 250px;">
                            <h:outputText value="#{loop.nazwapelna}" /> 
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:layoutUnit>  
<!--            <p:layoutUnit position="east" size="200">  
            </p:layoutUnit>  -->
            <p:layoutUnit position="center">  
                <h:form>  

                </h:form>  
            </p:layoutUnit>  
        </p:layout>  
    </p:dialog>
</ui:composition>

