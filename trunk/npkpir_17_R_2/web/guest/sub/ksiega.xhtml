<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">

    <p:dialog header="Szczegóły ewidencji VAT" widgetVar="Dialog" resizable="false"  
              showEffect="explode" hideEffect="explode">  

        <p:dataTable id="display" var="subwpis" value="#{ksiegaView.selDokument.ewidencjaVAT}" style="width: 600px;" emptyMessage="dokument bez vat" >
            <p:column id="SubColumn1" >  
                <f:facet name="header">  
                    <h:outputText value="nazwa ewidencji" />  
                </f:facet> 
                <h:outputText value="#{subwpis.ewidencja.nazwa}" />
            </p:column>
            <p:column id="SubColumn1a" >  
                <f:facet name="header" >
                    <h:outputText value="kwota netto" /> 
                </f:facet> 
                <h:outputText value="#{subwpis.netto}" style="float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
            <p:column id="SubColumn2">  
                <f:facet name="header">  
                    <h:outputText value="kwota vat" />  
                </f:facet> 
                <h:outputText value="#{subwpis.vat}" style="float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
        </p:dataTable>
    </p:dialog>  

    <p:outputPanel id="wrapper">

        <p:dataTable  var="wpis" value="#{ksiegaView.lista}" id="dokumentyLista" editable="true" 
                      paginator="true" paginatorAlwaysVisible="true" rows="12"
                      paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                      rowsPerPageTemplate="12,18,24,32,50" paginatorPosition="top"
                      rowKey="#{wpis.idDok}" selection="#{ksiegaView.selDokument}" selectionMode="single"
                      emptyMessage="W danym miesiącu nie było żadnych zapisów" 
                      > 

            <p:ajax event="rowSelect" update=":form:display" oncomplete="Dialog.show()" />           

            <f:facet name="header">  
                <h:outputText value="Wykaz dokumentów" />  
            </f:facet>
            <p:columnGroup type="header">  
                <p:row>  
                    <p:column rowspan="2" headerText="lp"  style=" font-size: x-small;"/>  
                    <p:column rowspan="2" headerText="Data zdarzenia gosp." width="50"  style=" font-size: x-small;"/>  
                    <p:column rowspan="2" headerText="Nr dowodu księgowego"  style=" font-size: x-small;"/>  
                    <p:column colspan="2" headerText="Kontrahent"  style=" font-size: x-small;"/>  
                    <p:column rowspan="2" headerText="Opis zdarzenia gospodarczego"  style=" font-size: x-small;" width="60"/>  
                    <p:column colspan="2" headerText="Przychody"  style=" font-size: x-small;"/>
                    <p:column rowspan="2" headerText="Zakup towarów handlowych i materiałów wg cen zakupu"  style=" font-size: x-small;" width="60"/>  
                    <p:column rowspan="2" headerText="Koszty uboczne zakupu"  style=" font-size: x-small;"  width="60"/>
                    <p:column colspan="5" headerText="Wydatki(koszty)"  style=" font-size: x-small;" width="60"/>
                    <p:column rowspan="2" headerText="Uwagi"  style=" font-size: x-small;" width="60"/>  
                </p:row>  
                <p:row>  
                    <p:column headerText="imię i nazwisko (firma)"  style=" font-size: x-small;"/>  
                    <p:column headerText="adres "  style=" font-size: x-small;"/>  
                    <p:column headerText="wartość sprzedanych towarów i usług"  style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="pozostałe przychody"  style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="razem przychód(7+8)"  style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="wynagrodzenia w gotówce i w naturze"  style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="pozostałe wydatki" style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="razem wydatki (12+13)"  style=" font-size: x-small;" width="60"/>  
                    <p:column headerText="inwestycje" style=" font-size: x-small;" width="60"/>  
                </p:row>
                <p:row>  
                    <p:column headerText="1" style=" font-size: x-small;"/>  
                    <p:column headerText="2" style=" font-size: x-small;"/>  
                    <p:column headerText="3" style=" font-size: x-small;"/>  
                    <p:column headerText="4" style=" font-size: x-small;"/>  
                    <p:column headerText="5" style=" font-size: x-small;"/>  
                    <p:column headerText="6" style=" font-size: x-small;"/>  
                    <p:column headerText="7" style=" font-size: x-small;"/>  
                    <p:column headerText="8" style=" font-size: x-small;"/>  
                    <p:column headerText="9" style=" font-size: x-small;"/>  
                    <p:column headerText="10" style=" font-size: x-small;"/>  
                    <p:column headerText="11" style=" font-size: x-small;"/>  
                    <p:column headerText="12" style=" font-size: x-small;"/>  
                    <p:column headerText="13" style=" font-size: x-small;"/>  
                    <p:column headerText="14" style=" font-size: x-small;"/>  
                    <p:column headerText="15" style=" font-size: x-small;"/>  
                    <p:column headerText="16" style=" font-size: x-small;"/>  
                    
                </p:row>

            </p:columnGroup>  
            
            <p:column id="idColumn" headerText="lp" sortBy="#{wpis.nrWpkpir}"  width="10">  
                <h:outputText value="#{wpis.nrWpkpir}"  style=" font-size: x-small;"/>
            </p:column>

            <p:column id="dataColumn" headerText="data wyst" filterBy="#{wpis.dataWyst}" filterMatchMode="contains" sortBy="#{wpis.dataWyst}" width="70" >  
                <h:outputText value="#{wpis.dataWyst}" style=" font-size: x-small;"><f:convertDateTime dateStyle="medium"  /></h:outputText>
            </p:column>
            <p:column id="nrWlDokColumn" headerText="nr wł" filterBy="#{wpis.nrWlDk}" filterMatchMode="contains" sortBy="#{wpis.nrWlDk}">  
                <h:outputText value="#{wpis.nrWlDk}" style=" font-size: x-small;"/>
            </p:column>
            <p:column id="kontrColumn" headerText="kontrahent" filterBy="#{wpis.kontr.npelna}" filterMatchMode="contains" sortBy="#{wpis.kontr.npelna}" width="100">  
                <h:outputText value="#{wpis.kontr.npelna}"  style=" font-size: x-small;" />
            </p:column>
            <p:column id="kontrColumna" headerText="kontrahent" filterBy="#{wpis.kontr.miejscowosc}" filterMatchMode="contains" sortBy="#{wpis.kontr.miejscowosc}" width="100">  
                <h:outputText value="#{wpis.kontr.kodpocztowy} #{wpis.kontr.miejscowosc} ul.#{wpis.kontr.ulica} #{wpis.kontr.dom}/#{wpis.kontr.lokal}"  style=" font-size: x-small;"/>
            </p:column>
            <p:column id="opisColumn" headerText="opis" filterBy="#{wpis.opis}" filterMatchMode="contains" sortBy="#{wpis.nrWlDk}" >  
                <h:outputText value="#{wpis.opis}" style=" font-size: x-small;"/>
            </p:column>
            <p:column id="pkpirKolColumn" headerText="kolumna" filterBy="#{wpis.kolumna7}" filterMatchMode="contains" sortBy="#{wpis.kolumna7}"  width="60">  
                <h:outputText value="#{wpis.kolumna7}"  style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn8" headerText="kolumna" filterBy="#{wpis.kolumna8}" filterMatchMode="contains" sortBy="#{wpis.kolumna8}"  width="50">  
                <h:outputText value="#{wpis.kolumna8}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn9" headerText="kolumna" filterBy="#{wpis.kolumna9}" filterMatchMode="contains" sortBy="#{wpis.kolumna9}"  width="60">  
                <h:outputText value="#{wpis.kolumna9}"   style="font-size: x-small;  float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn10" headerText="kolumna" filterBy="#{wpis.kolumna10}" filterMatchMode="contains" sortBy="#{wpis.kolumna10}" width="50">  
                <h:outputText value="#{wpis.kolumna10}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn11" headerText="kolumna" filterBy="#{wpis.kolumna11}" filterMatchMode="contains" sortBy="#{wpis.kolumna11}"  width="50">  
                    <h:outputText value="#{wpis.kolumna11}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn12" headerText="kolumna" filterBy="#{wpis.kolumna12}" filterMatchMode="contains" sortBy="#{wpis.kolumna12}"  width="50">  
                <h:outputText value="#{wpis.kolumna12}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn13" headerText="kolumna" filterBy="#{wpis.kolumna13}" filterMatchMode="contains" sortBy="#{wpis.kolumna13}"  width="50">  
                <h:outputText value="#{wpis.kolumna13}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn14" headerText="kolumna" filterBy="#{wpis.kolumna14}" filterMatchMode="contains" sortBy="#{wpis.kolumna14}"  width="50">  
                <h:outputText value="#{wpis.kolumna14}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn15" headerText="kolumna" filterBy="#{wpis.kolumna15}" filterMatchMode="contains" sortBy="#{wpis.kolumna15}"  width="50">  
                <h:outputText value="#{wpis.kolumna15}"   style=" font-size: x-small; float: right;"><f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText>
            </p:column>
            <p:column id="uwagaColumn" headerText="uwagi" filterBy="#{wpis.uwagi}" filterMatchMode="contains" sortBy="#{wpis.uwagi}" width="50">  
                <h:outputText value="#{wpis.uwagi}" />
            </p:column>


        </p:dataTable>
         <p:commandButton value="drukuj" type="button">
        <p:printer target="form:dokumentyLista" />
   </p:commandButton>
        <p:commandButton value="Zachowaj w pdf" ajax="false" actionListener="#{sesjaView.dodajwydruk()}">
            <p:dataExporter type="pdf" target="form:dokumentyLista" fileName="dokumenty"  encoding="UTF-8" preProcessor="#{pdf.preProcessPDF}" />
        </p:commandButton>



    </p:outputPanel>

</ui:composition>   

