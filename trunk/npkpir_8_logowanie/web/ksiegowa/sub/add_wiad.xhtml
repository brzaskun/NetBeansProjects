
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <p:panel id="panelDodawaniaDokumentu">
        <p:panel menuTitle="Wprowadzanie dokumentów" header="Wprowadzanie dokumentów"  >
        
            <p:growl id="mess_add" tooltip="true" />
         <p:panelGrid columns="7" >
             <h:outputLabel value="data wyst" style="font-weight: 700"/>
            <h:outputLabel value="kontrahent" style="font-weight: 700"/>
            <h:outputLabel value="rodzaj trans" style="font-weight: 700"/>
            <h:outputLabel value="nr wł" style="font-weight: 700"/>
            <h:outputLabel value="opis" style="font-weight: 700"/>
            <h:outputLabel value="kwota" style="font-weight: 700"/>
            <h:outputLabel value="kolumna" style="font-weight: 700"/>
            <h:inputText id="dataPole" value="#{DokumentView.selDokument.dataWyst}" tabindex="1" accesskey="s" maxlength="10" style="width: 80px">
                <f:ajax event="keyup" execute="@this" listener="#{DokumentView.ustawDate}" render="dataPole"/>
            </h:inputText>
            <h:panelGroup id="dwadoWprowadzania">
                <p:autoComplete id="acForce" value="#{DokumentView.selDokument.kontr}" completeMethod="#{KlDAO.completeNazwa}"
                                var="p" itemLabel="#{p.npelna}" itemValue="#{p}" converter="KlientConv" immediate="true"
                            minQueryLength="1" maxResults="5" maxlength="10" converterMessage="Nieudana konwersja Klient" tabindex="3" forceSelection="true" 
                            effect="clip"  binding="#{DokumentView.kontrahentNazwa}" valueChangeListener="#{DokumentView.przekazKontrahenta}">
                <f:ajax event="blur" execute="@this" listener="#{DokumentView.reset}"/>
                <f:facet name="itemtip">  
                    <h:panelGrid  columns="2" cellpadding="5" width="400">  
                        <f:facet name="header">  
                            <h:outputText value="Dane kontrahenta"/>
                        </f:facet>  
                        <h:outputText value="Nazwa: " />  
                        <h:outputText id="npelna" value="#{p.npelna}" />  
                        <h:outputText value="Number " />  
                        <h:outputText id="nip" value="#{p.NIP}" />  
                        <h:outputText value="Kolumna " />  
                        <h:outputText id="klumna" value="#{p.pkpirKolumna}" /> 
                    </h:panelGrid>
                </f:facet>
            <f:param name="passedValue" value="#{p}" />
            </p:autoComplete>
                <p:autoComplete id="acForcex" value="#{DokumentView.selDokument.kontr}" completeMethod="#{KlDAO.complete}"
                                var="p" itemLabel="#{p.NIP}" itemValue="#{p}" converter="KlientConv" immediate="true"
                            minQueryLength="1" maxResults="5" maxlength="10" converterMessage="Nieudana konwersja Klient" tabindex="3" forceSelection="true" 
                            effect="clip" binding="#{DokumentView.kontrahentNIP}" valueChangeListener="#{DokumentView.przekazKontrahenta}">
                <f:ajax event="blur" execute="@this" listener="#{DokumentView.reset}"/>    
                <f:facet name="itemtip">  
                    <h:panelGrid  columns="2" cellpadding="5" width="400">  
                        <f:facet name="header">  
                            <h:outputText value="Dane kontrahenta"/>
                        </f:facet>  
                        <h:outputText value="Nazwa: " />  
                        <h:outputText id="npelnax" value="#{p.npelna}" />  
                        <h:outputText value="Number " />  
                        <h:outputText id="nipx" value="#{p.NIP}" />  
                        <h:outputText value="Kolumna " />  
                        <h:outputText id="klumnax" value="#{p.pkpirKolumna}"/>  
                    </h:panelGrid>
                </f:facet>
            </p:autoComplete>
           
           
            </h:panelGroup>
            
            <h:selectOneMenu id="rodzajTrans" value="#{DokumentView.selDokument.rodzTrans}" tabindex="4" immediate="true" style="width: 120px">
                <f:selectItems value="#{Trans.transList}"/>
                <p:ajax event="blur" listener="#{DokumentView.podepnijListe}"  update=":dodWiad:kolumnaPkpir"/>
            </h:selectOneMenu>
            <h:inputText value="#{DokumentView.selDokument.nrWlDk}" required="true" requiredMessage="brak nr własnego dokumentu - uzupełnij" tabindex="5"/>
            <h:inputText value="#{DokumentView.selDokument.opis}" required="true" requiredMessage="brak opisu - uzupełnij" tabindex="6"/>
            <h:inputText value="#{DokumentView.selDokument.kwota}" required="true" requiredMessage="brak kwoty - uzupełnij" tabindex="7" onblur="dlg1.show()">
                <f:convertNumber pattern="###,##" />
            </h:inputText>
            <h:selectOneMenu id="kolumnaPkpir" value="#{DokumentView.selDokument.pkpirKol}" tabindex="7" binding="#{DokumentView.pkpirLista}" style="min-width: 150px">
            </h:selectOneMenu>
            
            <h:outputLabel value="v m-c" style="font-weight: 700"/>
            <h:outputLabel value="v rok" style="font-weight: 700"/>
            <h:outputLabel value="uwagi" style="font-weight: 700"/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
        
            <h:selectOneMenu value="#{DokumentView.selDokument.vatM}" tabindex="9">
                <f:selectItems value="#{Mce.mceList}"/>
            </h:selectOneMenu>
            <h:selectOneMenu value="#{DokumentView.selDokument.vatR}" tabindex="10">
                <f:selectItems value="#{Roki.rokiList}"/>
            </h:selectOneMenu>
            <h:inputText value="#{DokumentView.selDokument.uwagi}" tabindex="11"/>
            <p:commandButton action="#{DokumentView.dodajNowyWpis()}" value="Dodaj" update="mess_add,:dodWiad:ostatniUzytkownik" tabindex="13"
                             >   
                
            </p:commandButton>
        </p:panelGrid>
         
          
    </p:panel>
    <p:panel id="ostatniUzytkownik" menuTitle="Ostatnio wprowadzony użytkownik">
        <h:outputLabel value="Ostatnio wprowadzony:"/>
        <p:panelGrid columns="7">
            <h:outputLabel value="nr kolejny" style="font-weight: 600"/>
            <h:outputLabel value="data wyst" style="font-weight: 600"/>
            <h:outputLabel value="kontrahent" style="font-weight: 600"/>
            <h:outputLabel value="rodzaj trans" style="font-weight: 600"/>
            <h:outputLabel value="nr wł" style="font-weight: 600"/>
            <h:outputLabel value="opis" style="font-weight: 600"/>
            <h:outputLabel value="kwota" style="font-weight: 600"/>
            <h:outputText  value="#{DokumentView.selDokument.idDok}"/>
            <h:outputText  value="#{DokumentView.selDokument.dataWyst}">
                <f:convertDateTime parent="dd/mm/yyyy"/>
            </h:outputText>
            <h:outputText  value="#{DokumentView.selDokument.kontr.npelna}"/>
            <h:outputText  value="#{DokumentView.selDokument.rodzTrans}"/>
            <h:outputText  value="#{DokumentView.selDokument.nrWlDk}"/>
            <h:outputText  value="#{DokumentView.selDokument.opis}"/>
            <h:outputText  value="#{DokumentView.selDokument.kwota}"/>
            <h:outputLabel value="kolumna" style="font-weight: 600"/>
            <h:outputLabel value="k m-c" style="font-weight: 600"/>
            <h:outputLabel value="k rok" style="font-weight: 600"/>
            <h:outputLabel value="v m-c" style="font-weight: 600"/>
            <h:outputLabel value="v rok" style="font-weight: 600"/>
            <h:outputLabel value="uwagi" style="font-weight: 600"/>
            <h:outputLabel value=""/>
            <h:outputText  value="#{DokumentView.selDokument.pkpirKol}"/>
            <h:outputText  value="#{DokumentView.selDokument.pkpirM}"/>
            <h:outputText  value="#{DokumentView.selDokument.pkpirR}"/>
            <h:outputText  value="#{DokumentView.selDokument.vatM}"/>
            <h:outputText  value="#{DokumentView.selDokument.vatR}"/>
            <h:outputText  value="#{DokumentView.selDokument.uwagi}"/>
         </p:panelGrid>
    </p:panel>
        </p:panel>
   
</ui:composition>   

