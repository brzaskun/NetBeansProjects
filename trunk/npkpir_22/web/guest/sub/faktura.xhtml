<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <f:event type="preRenderView" listener="#{pozycjeNaFakturzeView.odchowaj()}"/>
    <p:tabView id="akordeon" style="width: 1200px;">
        <p:tab id="nowa" title="Sporządź nową fakturę">

        </p:tab>
        <p:tab id="gotowe" title="Przeglądaj sporządzone">

        </p:tab>
        <p:tab id="ksiegi" title="Przeglądaj zaksięgowane">

        </p:tab>
        <p:tab id="wzor" title="Wzór faktury">
            <script type="text/javascript">
            function zachowaj(co){
            var p = $("#form\\:akordeon\\:"+co);
            var position = p.position();
            $("#form\\:akordeon\\:lewy").val(position.left);
            //alert($("#form\\:akordeon\\:lewy").val());
            $("#form\\:akordeon\\:gora").val(position.top);
            //alert($("#form\\:akordeon\\:gora").val());
            $("#form\\:akordeon\\:zachowaj").click();
            }
           
            $(function(){
                var lewy = $("#form\\:akordeon\\:lewyTablica").val().split(",");
                var gora = $("#form\\:akordeon\\:goraTablica").val().split(",");
                var co = $("#form\\:akordeon\\:coTablica").val().split(",");
                petlawywolujaca(lewy,gora,co);
                $("#form\\:akordeon\\:odbiorca").bind('mouseup', function() {
                    $("#form\\:akordeon\\:co").val("odbiorca");
                    zachowaj("odbiorca");
                });
                $("#form\\:akordeon\\:wystawca").bind('mouseup', function() {
                    $("#form\\:akordeon\\:co").val("wystawca");
                    zachowaj("wystawca");
                });
                $("#form\\:akordeon\\:data").bind('mouseup', function() {
                    $("#form\\:akordeon\\:co").val("data");
                    zachowaj("data");
                });
               
            })
            </script>
            <h:inputText id="lewy" value="#{pozycjeNaFakturzeView.lewy}" size="30" style="display: inline;"/>
            <h:inputText id="gora" value="#{pozycjeNaFakturzeView.gora}" size="30" style="display: inline;"/>
            <h:inputText id="co" value="#{pozycjeNaFakturzeView.co}" size="30" style="display: inline;"/>
            <h:inputText id="lewyTablica" value="#{pozycjeNaFakturzeView.lewyTablica}" size="30" style="display: none;"/>
            <h:inputText id="goraTablica" value="#{pozycjeNaFakturzeView.goraTablica}" size="30" style="display: none;"/>
            <h:inputText id="coTablica" value="#{pozycjeNaFakturzeView.coTablica}" size="30" style="display: none;"/>
            <br/>
            <p:commandButton id="zachowaj" value="Zachowaj" actionListener="#{pozycjeNaFakturzeView.zachowajpozycje()}" style="display: none;" update=":form:akordeon"/>
            <p:panel id="odbiorca" header="Dane Odbiorcy" style="width: 350px;"  >  
                <p:panelGrid columns="2">
                    <h:outputText value="Odbiorca: #{pozycjeNaFakturzeView.lewyTablica} #{pozycjeNaFakturzeView.goraTablica}" />
                <h:outputText value="Jan Kowalski #{pozycjeNaFakturzeView.coTablica}" />
                <h:outputText value="Adres:" />  
                <h:outputText value="70-100 Szczecin ul. Bananowa 15" />
                <h:outputText value="Nip:" />  
                <h:outputText value="851-100-50-08" />
                </p:panelGrid>
            </p:panel>  
            <p:draggable for="odbiorca"/>
            <p:panel id="wystawca" header="Dane Wystawcy" style="width: 350px;"  >  
                <p:panelGrid columns="2">
                <h:outputText value="Wystawca: #{pozycjeNaFakturzeView.lewyTablica} #{pozycjeNaFakturzeView.goraTablica}" />
                <h:outputText value="Bober Mizialski #{pozycjeNaFakturzeView.coTablica}"/>
                <h:outputText value="Adres:" />  
                <h:outputText value="70-100 Poznan ul. Bananowa 15" />
                <h:outputText value="Nip:" />  
                <h:outputText value="851-100-50-08" />
                </p:panelGrid>
            </p:panel>
            <p:draggable for="wystawca"/>
             <p:panel id="data" header="Miejsce i data wystawienia fatury" style="width: 350px;"  >  
                <p:panelGrid columns="2">
                <h:outputText value="Szczecin, dnia 18.05.2013 " />
                </p:panelGrid>
            </p:panel>  
            <p:draggable for="data"/>
        </p:tab>
    </p:tabView>
</ui:composition>   

