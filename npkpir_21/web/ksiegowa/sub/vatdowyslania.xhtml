<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
             <h:form id="formX">
                 <p:growl id="msg"/>
                     <p:panel header="Wykaz oczekujacych wysyłki deklaracji"/>
                     <p:dataTable value="#{deklaracjevatView.oczekujace}" var="item" sortBy="#{item.miesiac}" resizableColumns="true"  editable="true" id="dokumentyLista" emptyMessage="brak deklaracji do wyslania">
                         <p:ajax event="rowEdit" update=":formX:msg" listener="#{deklaracjevatView.edit}" />
                         <p:column headerText="kod urzędu" width="60"> 
                             <h:outputText value="#{item.kodurzedu}" style="width: 70px"/>
                         </p:column>
                         <p:column headerText="deklaracja za okres" width="100">
                             <h:outputText value="#{item.rok}/#{item.miesiac}"/>
                         </p:column>
                         <p:column headerText="nr kolejny" width="60">
                             <h:outputText value="#{item.nrkolejny}"/>
                         </p:column>
                         <p:column headerText="podatnik" width="200">
                             <h:outputText value="#{item.podatnik}"/>
                         </p:column>
                         <p:column headerText="dane">
                             <h:outputText value="#{item.selected}"/>
                         </p:column>
                         <p:column id="previewColumn" headerText="podgląd" width="70">
                            <p:commandButton value="Pdf" actionListener="#{pdfVAT7.drukujwys(item)}" style="margin-left: 10px;" onsuccess="wydrukvat7('#{item.podatnik}');"/>
                         </p:column>
                         <p:column id="deleteColumn" headerText="usuń" width="70">
                            <p:commandButton actionListener="#{deklaracjevatView.destroy(item)}" onclick="confirmation.show()" id="delete" icon="ui-icon ui-icon-trash" type="submit"/>
                     </p:column>
                     </p:dataTable>
                 </h:form><br/>
            <h:form>
                <p:commandButton value="wyślij" actionListener="#{beanek.rob()}" update=":form:upoform" style="width: 120px;"/>
                <p:commandButton value="test" actionListener="#{beanek.robtest()}" update=":form:upoform" style="margin-left: 30px; width: 120px;"/><br/><br/>
                <p:panelGrid columns="2">
                <h:outputText value="wysylanie: "/>
                <h:outputText value="W celu wysłania dekalracji na serwer ministerstwa wciśnij przycisk wyślij"/>
                <h:outputText value="testowanie"/>
                <h:outputText value="Można też przetestować wysyłke deklaracji. Jeżeli 'nie przejdzie', oznacza to błąd w danych autoryzujących"/>
                <h:outputText value="potwierdzenie"/>
                <h:outputText value="Każdorazowo, celem uzyskania potwierdzenia, należy odpowiednio kliknąć na przycisk upo lub sprawdz"/>
                </p:panelGrid>
            </h:form>
    <br/>
    <h:form id="form">
                <p:commandButton value="upo" actionListener="#{beanek.pobierz()}" update=":formX:msg" style="width: 120px;"/>
                <p:commandButton value="sprawdź" actionListener="#{beanek.pobierztest()}" update=":form:upo, :form:stat, :form:opis, :formX:msg" style="margin-left: 30px; width: 120px;"/><br/><br/>
                <p:panelGrid columns="2" id="upoform">
                <h:outputText value="id"/>
                <h:inputText value="#{beanek.idpobierz}" style="width: 250px;"/>
                <h:outputText value="upo"/>
                <h:inputTextarea id="upo" value="#{beanek.upoMB}" readonly="true" cols="150"/>
                <h:outputText value="stat"/>
                <h:outputText id="stat" value="#{beanek.statMB}"/>
                <h:outputText value="opis"/>
                <h:inputTextarea id="opis" value="#{beanek.opisMB}" readonly="true" cols="150"/>
                </p:panelGrid>
            </h:form>
</ui:composition>   


