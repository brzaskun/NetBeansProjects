
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <p:panel id="panelDodawaniaDokumentu">
        <p:panel menuTitle="Wprowadzanie dokumentów" header="Wprowadzanie dokumentów"  >
        
            <p:growl id="mess_add" tooltip="true" />
         <p:panelGrid columns="7" >
            <h:outputLabel value="data wyst"/>
            <h:outputLabel value="kontrahent"/>
            <h:outputLabel value="rodzaj trans"/>
            <h:outputLabel value="nr wł"/>
            <h:outputLabel value="opis"/>
            <h:outputLabel value="kwota"/>
            <h:outputLabel value="kolumna"/>
            <h:inputText id="dataPole" value="#{DokDAO.selDokument.dataWyst}" tabindex="1" accesskey="s" maxlength="10" 
                          immediate="true">
                <f:ajax event="keyup" execute="@this" render="dataPole"/>
            </h:inputText>
            <h:panelGroup id="dwadoWprowadzania">
            <p:autoComplete id="acForce" value="#{DokDAO.selectedKontr}" completeMethod="#{KlDAO.completeNazwa}"
                            var="p" itemLabel="#{p.npelna}" itemValue="#{p}" converter="KlientConv"
                            minQueryLength="3" maxResults="5" maxlength="10" converterMessage="Nieudana konwersja Klient" tabindex="3" forceSelection="true" 
                            effect="clip" immediate="true"  binding="#{DokDAO.kontrahentNazwa}" >
                <f:facet name="itemtip">  
                    <h:panelGrid  columns="2" cellpadding="5" width="400">  
                        <f:facet name="header">  
                            <h:outputText value="Dane kontrahenta"/>
                        </f:facet>  
                        <h:outputText value="Nazwa: " />  
                        <h:outputText id="npelna" value="#{p.npelna}" />  
                        <h:outputText value="Number " />  
                        <h:outputText id="nip" value="#{p.NIP}" />  
                    </h:panelGrid>
                </f:facet>
            <f:param name="passedValue" value="#{p}" />
            <f:ajax event="blur" execute="@this" listener="#{DokDAO.reset}"/>    
            </p:autoComplete>
              <p:autoComplete id="acForcex" value="#{DokDAO.selectedKontr}" completeMethod="#{KlDAO.complete}"
                            var="p" itemLabel="#{p.NIP}" itemValue="#{p}" converter="KlientConv"
                            minQueryLength="3" maxResults="5" maxlength="10" converterMessage="Nieudana konwersja Klient" tabindex="3" forceSelection="true" 
                            effect="clip" immediate="true"  binding="#{DokDAO.kontrahentNIP}">
                <f:facet name="itemtip">  
                    <h:panelGrid  columns="2" cellpadding="5" width="400">  
                        <f:facet name="header">  
                            <h:outputText value="Dane kontrahenta"/>
                        </f:facet>  
                        <h:outputText value="Nazwa: " />  
                        <h:outputText id="npelnax" value="#{p.npelna}" />  
                        <h:outputText value="Number " />  
                        <h:outputText id="nipx" value="#{p.NIP}" />  
                    </h:panelGrid>
                </f:facet>
                  <f:ajax event="blur" execute="@this" listener="#{DokDAO.reset}"/>    
            </p:autoComplete>
           
           
            </h:panelGroup>
            
            <h:selectOneMenu id="rodzajTrans" value="#{DokDAO.selDokument.rodzTrans}" tabindex="4">
                <f:selectItems value="#{Trans.transList}"/>
                <f:ajax event="blur" execute="@this" listener="#{DokDAO.podepnijListe}"  render=":dodWiad:kolumnaPkpir"/>
            </h:selectOneMenu>
            <h:inputText value="#{DokDAO.selDokument.nrWlDk}" required="true" requiredMessage="brak nr własnego dokumentu - uzupełnij" tabindex="5"/>
            <h:inputText value="#{DokDAO.selDokument.opis}" required="true" requiredMessage="brak opisu - uzupełnij" tabindex="6"/>
            <h:inputText value="#{DokDAO.selDokument.kwota}" required="true" requiredMessage="brak kwoty - uzupełnij" tabindex="7" onblur="dlg1.show()">
                <f:convertNumber pattern="###,##" />
            </h:inputText>
             <h:selectOneMenu id="kolumnaPkpir" value="#{DokDAO.selDokument.pkpirKol}" tabindex="7" binding="#{DokDAO.pkpirLista}">
            </h:selectOneMenu>
            
            <h:outputLabel value="v m-c"/>
            <h:outputLabel value="v rok"/>
            <h:outputLabel value="uwagi"/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
            <h:outputLabel value=""/>
        
            <h:selectOneMenu value="#{DokDAO.selDokument.vatM}" tabindex="9">
                <f:selectItems value="#{Mce.mceList}"/>
            </h:selectOneMenu>
            <h:selectOneMenu value="#{DokDAO.selDokument.vatR}" tabindex="10">
                <f:selectItems value="#{Roki.rokiList}"/>
            </h:selectOneMenu>
            <h:inputText value="#{DokDAO.selDokument.uwagi}" tabindex="11"/>
            <p:commandButton action="#{DokDAO.dodajNowyWpis()}" value="Dodaj" update="mess_add,:dodWiad:ostatniUzytkownik" tabindex="13"
                             >   
                
            </p:commandButton>
        </p:panelGrid>
         
          
    </p:panel>
    <p:panel id="ostatniUzytkownik" menuTitle="Ostatnio wprowadzony użytkownik">
        <h:outputLabel value="Ostatnio wprowadzony:"/>
        <p:panelGrid columns="7">
            <h:outputLabel value="nr kolejny"/>
            <h:outputLabel value="data wyst"/>
            <h:outputLabel value="kontrahent"/>
            <h:outputLabel value="rodzaj trans"/>
            <h:outputLabel value="nr wł"/>
            <h:outputLabel value="opis"/>
            <h:outputLabel value="kwota"/>
            <h:outputText  value="#{DokDAO.selDokument.idDok}"/>
            <h:outputText  value="#{DokDAO.selDokument.dataWyst}">
                <f:convertDateTime parent="dd/mm/yyyy"/>
            </h:outputText>
            <h:outputText  value="#{DokDAO.selDokument.kontr.npelna}"/>
            <h:outputText  value="#{DokDAO.selDokument.rodzTrans}"/>
            <h:outputText  value="#{DokDAO.selDokument.nrWlDk}"/>
            <h:outputText  value="#{DokDAO.selDokument.opis}"/>
            <h:outputText  value="#{DokDAO.selDokument.kwota}"/>
            <h:outputLabel value="kolumna"/>
            <h:outputLabel value="k m-c"/>
            <h:outputLabel value="k rok"/>
            <h:outputLabel value="v m-c"/>
            <h:outputLabel value="v rok"/>
            <h:outputLabel value="uwagi"/>
            <h:outputLabel value=""/>
            <h:outputText  value="#{DokDAO.selDokument.pkpirKol}"/>
            <h:outputText  value="#{DokDAO.selDokument.pkpirM}"/>
            <h:outputText  value="#{DokDAO.selDokument.pkpirR}"/>
            <h:outputText  value="#{DokDAO.selDokument.vatM}"/>
            <h:outputText  value="#{DokDAO.selDokument.vatR}"/>
            <h:outputText  value="#{DokDAO.selDokument.uwagi}"/>
         </p:panelGrid>
    </p:panel>
        </p:panel>
   
</ui:composition>   

