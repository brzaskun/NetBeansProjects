<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:form>
        <p:ajaxStatus style="width:64px;height:64px;position:fixed;right:250px;bottom:250px">
                                    <f:facet name="start"><p:graphicImage url="/resources/images/ajax_loaderc.gif"/></f:facet>
                                    <f:facet name="success"><h:outputText value="" /></f:facet>
                                    <f:facet name="error">Wystąpił nieoczekiewany błąd. Dane nie zostały utracone. Przejdź do strony logowania i zaloguj się ponownie</f:facet>
                                </p:ajaxStatus>
                            </h:form>   
                 <h:form id="formX">
                     <p:growl id="msg"/>
                     <p:panel header="Wykaz wysłanych deklaracji. Deklaracje pokolorowane są wysłane z sukcesem."/>
                      <p:tabView>
                           <p:tab title="bez UPO">
                               <p:dataTable id="dataLista" value="#{deklaracjevatView.wyslaneniepotwierdzone}" var="item" sortBy="#{item.miesiac}" >
                         <p:column width="240">
                             <f:facet name="header">
                                 <h:outputText value="Identyfikator"/>
                             </f:facet>
                             <h:outputText value="#{item.identyfikator}"/>
                         </p:column>
                         <p:column width="45">
                             <f:facet name="header">
                                 <h:outputText value="Status"/>
                             </f:facet>
                             <h:outputText value="#{item.status}"/>
                         </p:column>
                          <p:column width="130">
                             <f:facet name="header">
                                 <h:outputText value="Opis"/>
                             </f:facet>
                             <h:outputText value="#{item.opis}"/>
                         </p:column>
                         <p:column width="45"> 
                             <f:facet name="header">
                                 <h:outputText value="Kod urzedu"/>
                             </f:facet>
                             <h:outputText value="#{item.kodurzedu}" style="width: 70px"/>
                         </p:column>
                         <p:column width="70">
                             <f:facet name="header">
                                 <h:outputText value="Rok - Miesiac"/>
                             </f:facet>
                             <h:outputText value="#{item.rok} - #{item.miesiac}"/>
                         </p:column>
                         <p:column width="40">
                             <f:facet name="header">
                                 <h:outputText value="Nrkol"/>
                             </f:facet>
                             <h:outputText value="#{item.nrkolejny}"/>
                         </p:column>
                         <p:column width="250">
                             <f:facet name="header">
                                 <h:outputText value="dane"/>
                             </f:facet>
                             <p:dataTable value="#{item.selected}" var="loop">
                                <p:column headerText="rodzaj deklaracji"><h:outputText value="#{loop.rodzajdeklaracji}"/></p:column>
                                <p:column headerText="pierw./kor."><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}"/></p:column>
                                <p:column headerText="nazwa urzędu"><h:outputText value="#{loop.nazwaurzedu}"/></p:column>
                                 <p:column headerText="należny (p.46)"><h:outputText value="#{loop.pozycjeszczegolowe.pole46} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                 <p:column headerText="naliczony (p.55)"><h:outputText value="#{loop.pozycjeszczegolowe.pole55} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="przeniesienie (p.47)"><h:outputText value="#{loop.pozycjeszczegolowe.pole47} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zapłaty (p.58)"><h:outputText value="#{loop.pozycjeszczegolowe.pole58} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zwrotu(p.60)"><h:outputText value="#{loop.pozycjeszczegolowe.pole60} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="kwota autoryzacyjna"><h:outputText value="#{loop.kwotaautoryzacja} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                            </p:dataTable>
                         </p:column>
                         <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="pobierzupo"/>
                             </f:facet>
                             <p:commandButton value="UPO" actionListener="#{beanek.pobierzwyslane(item.identyfikator)}" update=":formX, :formX:msg" style="margin-left: 10px;"/>
                         </p:column>
                          <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="pobierzupo"/>
                             </f:facet>
                             <p:commandButton value="UPO" actionListener="#{beanek.pobierzwyslane(item.identyfikator)}" update=":formX, :formX:msg" style="margin-left: 10px;"/>
                         </p:column>
                     </p:dataTable>
                     </p:tab>
            <p:tab title="udane">
                <p:dataTable id="dataList" value="#{deklaracjevatView.wyslanenormalne}" var="item" sortBy="#{item.miesiac}" >
                         <p:column width="240">
                             <f:facet name="header">
                                 <h:outputText value="Identyfikator"/>
                             </f:facet>
                             <h:outputText value="#{item.identyfikator}"/>
                         </p:column>
                         <p:column width="45">
                             <f:facet name="header">
                                 <h:outputText value="Status"/>
                             </f:facet>
                             <h:outputText value="#{item.status}"/>
                         </p:column>
                          <p:column width="130">
                             <f:facet name="header">
                                 <h:outputText value="Opis"/>
                             </f:facet>
                             <h:outputText value="#{item.opis}"/>
                         </p:column>
                         <p:column width="45"> 
                             <f:facet name="header">
                                 <h:outputText value="Kod urzedu"/>
                             </f:facet>
                             <h:outputText value="#{item.kodurzedu}" style="width: 70px"/>
                         </p:column>
                         <p:column width="70">
                             <f:facet name="header">
                                 <h:outputText value="Rok - Miesiac"/>
                             </f:facet>
                             <h:outputText value="#{item.rok} - #{item.miesiac}"/>
                         </p:column>
                         <p:column width="40">
                             <f:facet name="header">
                                 <h:outputText value="Nrkol"/>
                             </f:facet>
                             <h:outputText value="#{item.nrkolejny}"/>
                         </p:column>
                         <p:column width="250">
                             <f:facet name="header">
                                 <h:outputText value="dane"/>
                             </f:facet>
                             <p:dataTable value="#{item.selected}" var="loop">
                                <p:column headerText="rodzaj deklaracji"><h:outputText value="#{loop.rodzajdeklaracji}"/></p:column>
                                <p:column headerText="pierw./kor."><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}"/></p:column>
                                <p:column headerText="nazwa urzędu"><h:outputText value="#{loop.nazwaurzedu}"/></p:column>
                                 <p:column headerText="należny (p.46)"><h:outputText value="#{loop.pozycjeszczegolowe.pole46} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                 <p:column headerText="naliczony (p.55)"><h:outputText value="#{loop.pozycjeszczegolowe.pole55} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="przeniesienie (p.47)"><h:outputText value="#{loop.pozycjeszczegolowe.pole47} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zapłaty (p.58)"><h:outputText value="#{loop.pozycjeszczegolowe.pole58} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zwrotu(p.60)"><h:outputText value="#{loop.pozycjeszczegolowe.pole60} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="kwota autoryzacyjna"><h:outputText value="#{loop.kwotaautoryzacja} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                            </p:dataTable>
                         </p:column>
                        
                          <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="drukuj"/>
                             </f:facet>
                              <p:commandButton value="Pdf" action="/ksiegowa/ksiegowaVatwyslane.xhtml?faces-redirect=true" actionListener="#{pdfVAT7.drukuj(item)}" update=":formX, :formX:msg" style="margin-left: 10px;" oncomplete="wydrukvat7('#{item.podatnik}');" />
                         </p:column>
                         <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="mail"/>
                             </f:facet>
                             <p:commandButton id="mailbutton" value="Mail" actionListener="#{mailOther.vat7()}" update=":formX, :formX:msg" style="margin-left: 10px;" onsuccess="alert('Wysłano mail');" />
                         </p:column>
                     </p:dataTable>
                     </p:tab>
                           <p:tab title="błędne">
                               <p:dataTable id="dataList1" value="#{deklaracjevatView.wyslanezbledem}" var="item" sortBy="#{item.miesiac}" >
                         <p:column width="240">
                             <f:facet name="header">
                                 <h:outputText value="Identyfikator"/>
                             </f:facet>
                             <h:outputText value="#{item.identyfikator}"/>
                         </p:column>
                         <p:column width="45">
                             <f:facet name="header">
                                 <h:outputText value="Status"/>
                             </f:facet>
                             <h:outputText value="#{item.status}"/>
                         </p:column>
                          <p:column width="130">
                             <f:facet name="header">
                                 <h:outputText value="Opis"/>
                             </f:facet>
                             <h:outputText value="#{item.opis}"/>
                         </p:column>
                         <p:column width="45"> 
                             <f:facet name="header">
                                 <h:outputText value="Kod urzedu"/>
                             </f:facet>
                             <h:outputText value="#{item.kodurzedu}" style="width: 70px"/>
                         </p:column>
                         <p:column width="70">
                             <f:facet name="header">
                                 <h:outputText value="Rok - Miesiac"/>
                             </f:facet>
                             <h:outputText value="#{item.rok} - #{item.miesiac}"/>
                         </p:column>
                         <p:column width="40">
                             <f:facet name="header">
                                 <h:outputText value="Nrkol"/>
                             </f:facet>
                             <h:outputText value="#{item.nrkolejny}"/>
                         </p:column>
                         <p:column width="250">
                             <f:facet name="header">
                                 <h:outputText value="dane"/>
                             </f:facet>
                             <p:dataTable value="#{item.selected}" var="loop">
                                <p:column headerText="rodzaj deklaracji"><h:outputText value="#{loop.rodzajdeklaracji}"/></p:column>
                                <p:column headerText="pierw./kor."><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}"/></p:column>
                                <p:column headerText="nazwa urzędu"><h:outputText value="#{loop.nazwaurzedu}"/></p:column>
                                 <p:column headerText="należny (p.46)"><h:outputText value="#{loop.pozycjeszczegolowe.pole46} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                 <p:column headerText="naliczony (p.55)"><h:outputText value="#{loop.pozycjeszczegolowe.pole55} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="przeniesienie (p.47)"><h:outputText value="#{loop.pozycjeszczegolowe.pole47} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zapłaty (p.58)"><h:outputText value="#{loop.pozycjeszczegolowe.pole58} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zwrotu(p.60)"><h:outputText value="#{loop.pozycjeszczegolowe.pole60} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="kwota autoryzacyjna"><h:outputText value="#{loop.kwotaautoryzacja} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                            </p:dataTable>
                         </p:column>
                         <p:column id="deleteColumn" headerText="usuń" width="70">
                             <p:commandButton actionListener="#{deklaracjevatView.destroy(item)}" onclick="confirmation.show()" id="delete" icon="ui-icon ui-icon-trash" type="submit"/></p:column>
                     </p:dataTable>
                     </p:tab>
                            <p:tab title="testowo   ">
                <p:dataTable id="dataList2" value="#{deklaracjevatView.wyslanetestowe}" var="item" sortBy="#{item.miesiac}">
                         <p:column width="240">
                             <f:facet name="header">
                                 <h:outputText value="Identyfikator"/>
                             </f:facet>
                             <h:outputText value="#{item.identyfikator}"/>
                         </p:column>
                         <p:column width="45">
                             <f:facet name="header">
                                 <h:outputText value="Status"/>
                             </f:facet>
                             <h:outputText value="#{item.status}"/>
                         </p:column>
                          <p:column width="130">
                             <f:facet name="header">
                                 <h:outputText value="Opis"/>
                             </f:facet>
                             <h:outputText value="#{item.opis}"/>
                         </p:column>
                         <p:column width="45"> 
                             <f:facet name="header">
                                 <h:outputText value="Kod urzedu"/>
                             </f:facet>
                             <h:outputText value="#{item.kodurzedu}" style="width: 70px"/>
                         </p:column>
                         <p:column width="70">
                             <f:facet name="header">
                                 <h:outputText value="Rok - Miesiac"/>
                             </f:facet>
                             <h:outputText value="#{item.rok} - #{item.miesiac}"/>
                         </p:column>
                         <p:column width="40">
                             <f:facet name="header">
                                 <h:outputText value="Nrkol"/>
                             </f:facet>
                             <h:outputText value="#{item.nrkolejny}"/>
                         </p:column>
                         <p:column width="250">
                             <f:facet name="header">
                                 <h:outputText value="dane"/>
                             </f:facet>
                            <p:dataTable value="#{item.selected}" var="loop">
                                <p:column headerText="rodzaj deklaracji"><h:outputText value="#{loop.rodzajdeklaracji}"/></p:column>
                                <p:column headerText="pierw./kor."><h:outputText value="#{loop.celzlozenia eq 1 ? 'pierwotna' : 'korekta'}"/></p:column>
                                <p:column headerText="nazwa urzędu"><h:outputText value="#{loop.nazwaurzedu}"/></p:column>
                                 <p:column headerText="należny (p.46)"><h:outputText value="#{loop.pozycjeszczegolowe.pole46} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                 <p:column headerText="naliczony (p.55)"><h:outputText value="#{loop.pozycjeszczegolowe.pole55} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="przeniesienie (p.47)"><h:outputText value="#{loop.pozycjeszczegolowe.pole47} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zapłaty (p.58)"><h:outputText value="#{loop.pozycjeszczegolowe.pole58} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="do zwrotu(p.60)"><h:outputText value="#{loop.pozycjeszczegolowe.pole60} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                                <p:column headerText="kwota autoryzacyjna"><h:outputText value="#{loop.kwotaautoryzacja} zł" style="float: right;">
                                      <f:convertNumber minFractionDigits="2" locale="PL"/></h:outputText></p:column>
                            </p:dataTable>
                         </p:column>
                          <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="drukuj"/>
                             </f:facet>
                             <p:commandButton value="Pdf" action="/ksiegowa/ksiegowaVatwyslane.xhtml?faces-redirect=true" actionListener="#{pdfVAT7.drukuj(item)}" update=":formX, :formX:msg" style="margin-left: 10px;" oncomplete="wydrukvat7('#{item.podatnik}');"/>
                         </p:column>
                        
                         <p:column width="80">
                             <f:facet name="header">
                                 <h:outputText value="testupo"/>
                             </f:facet>
                             <p:commandButton value="TUPO" actionListener="#{beanek.pobierzwyslanetest(item.identyfikator)}" update=":formX, :formX:msg" style="margin-left: 10px;"/>
                         </p:column>
                         <p:column id="deleteColumn" headerText="usuń" width="70">
                             <p:commandButton actionListener="#{deklaracjevatView.destroy(item)}" onclick="confirmation.show()" id="delete" icon="ui-icon ui-icon-trash" type="submit"/></p:column>
                     </p:dataTable>
                     </p:tab>
                      </p:tabView>
                 </h:form>
 </ui:composition>   


