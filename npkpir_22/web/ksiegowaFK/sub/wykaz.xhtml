
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <h:form id="form" >
         <p:contextMenu>
             <p:menuitem value="Zachowaj zmiany" partialSubmit="true" actionListener="#{dokfkView.edycja}" icon="ui-icon-scissors"/>
             <p:menuitem value="Zaksieguj" partialSubmit="true" actionListener="#{dokfkView.zaksieguj}" icon="ui-icon-scissors"/>
             <p:menuitem value="UsuÅ„ dok" partialSubmit="true" actionListener="#{dokfkView.usun}" icon="ui-icon-trash"/>
            </p:contextMenu>
        <p:dataTable id="dataList" value="#{dokfkView.wykaz}" var="loop" rowIndexVar="row" style="width: 1200px;" 
                     selection="#{dokfkView.selecteddokfk}" rowKey="#{loop.id}" editable="true">
            <p:column selectionMode="multiple" width="50"/>
            <p:column headerText="data" width="100">
                <h:outputText value="#{loop.data}"/>
            </p:column>
            <p:column headerText="numer" width="200">
                <p:inplace id="ajaxInplace0" editor="true" > 
                    <p:inputText value="#{loop.numer}"/>
                </p:inplace>  
            </p:column>
            <p:column headerText="konta">
                <p:dataTable var="wpis" value="#{loop.konta}" editable="true">
                    <p:column headerText="numer" width="200">
                        <p:inplace id="ajaxInplace0a" editor="true" rendered="#{wpis.typwiersza eq 0 ? true : false}">  
                            <p:inputText value="#{wpis.opis}" />
                        </p:inplace>
                    </p:column>
                    <p:column headerText="wn" width="100">
                         <p:inplace id="ajaxInplace1" editor="true" rendered="#{wpis.typwiersza eq 1 || wpis.typwiersza eq 0 ? true : false}">  
                            <p:inputText value="#{wpis.kwotaWn}"  style="float: right;" >
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                            </p:inputText>
                        </p:inplace>  
                    </p:column>
                       <p:column headerText="konto" width="100">
                        <h:outputText value="#{wpis.kontoWn.pelnynumer}" rendered="#{wpis.typwiersza eq 1 || wpis.typwiersza eq 0 ? true : false}"/>
                    </p:column>
                       <p:column headerText="ma" width="100">
                           <p:inplace id="ajaxInplace2" editor="true" rendered="#{wpis.typwiersza eq 2 || wpis.typwiersza eq 0 ? true : false}">   
                               <p:inputText value="#{wpis.kwotaMa}"  style="float: right;" >
                                      <f:convertNumber minFractionDigits="2" locale="PL"/>
                                </p:inputText>
                            </p:inplace>  
                    </p:column>
                       <p:column headerText="konto" width="100">
                        <h:outputText value="#{wpis.kontoMa.pelnynumer}" rendered="#{wpis.typwiersza eq 2 || wpis.typwiersza eq 0 ? true : false}"/>
                    </p:column>
                    <p:column headerText="typ wiersza" width="100">
                        <h:outputText value="#{wpis.typwiersza eq 1 ? 'konto wn' : (wpis.typwiersza eq 2 ? 'konto ma' : 'oba')}"/>
                    </p:column>
                </p:dataTable>
            </p:column>
        </p:dataTable>
        </h:form>
</ui:composition> 