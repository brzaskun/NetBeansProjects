
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <h:form id="form">
          <p:contextMenu for="dataList">
              <p:menuitem value="Nowe syntetyczne" onclick="pokazdodawanie()" icon="ui-icon-circle-plus" update=":form"/>
              <p:menuitem value="Nowe analityczne" onclick="pokazdodawanieanal()" icon="ui-icon-circle-plus" update=":form"/>
              <p:menuitem value="Usuń" actionListener="#{planKontView.usun()}" icon="ui-icon-trash" update=":form"/>
            </p:contextMenu>

    <p:panelGrid columns="2" style="width: 1500px;">
      
        <p:dataTable id="dataList" value="#{planKontView.wykazkont}" var="loop" rowIndexVar="row" selectionMode="single" selection="#{planKontView.selected}" rowKey="#{loop.id}"
                     sortBy="#{loop.pelnynumer}" rowStyleClass="#{loop.syntetyczne eq 'syntetyczne' ? 'old' : null}" >
            <p:ajax event="rowSelect" oncomplete="schowajdodawanie();" update=":formX"/>
            <p:column>
                <p:commandButton value="+" actionListener="#{planKontView.rozwinkonto()}" update=":form:dataList" rendered="#{(loop.rozwin eq false)and(loop.mapotomkow eq true)}" style="width: 25px; height: 25px;"/>
                <p:commandButton value="-" actionListener="#{planKontView.zwinkonto()}" update=":form:dataList" rendered="#{(loop.rozwin eq true)and(loop.mapotomkow eq true)}" style="width: 25px; height: 25px;"/>
                <p:commandButton value="" update=":form:dataList" rendered="#{loop.mapotomkow eq false}" style="width: 25px; height: 25px;"/>
             </p:column>
            <p:column headerText="nr konta" style="width: 120px;" styleClass="#{loop.analityka eq 2 ? 'druga' : null}">
                <h:outputText value="#{loop.pelnynumer}" /> 
            </p:column>
            <p:column headerText="nazwa pełna" style="width: 250px;">
                <h:outputText value="#{loop.nazwapelna}" /> 
            </p:column>
            <p:column headerText="nazwa skrócona" style="width: 250px;">
                <h:outputText value="#{loop.nazwapelna}" /> 
            </p:column>
            <p:column headerText="bilansowewynikowe" style="width: 80px;">
                <h:outputText value="#{loop.bilansowewynikowe}" /> 
            </p:column>
            <p:column headerText="rozrachunki" style="width: 80px;">
                <h:outputText value="#{loop.zwyklerozrachszczegolne}" /> 
            </p:column>
            <p:column headerText="poziom" style="width: 100px;">
                 <h:outputText value="#{loop.analityka}" /> 
            </p:column>
            <p:column headerText="macierzyste" style="width: 100px;">
                <h:outputText value="#{loop.macierzyste}" /> 
            </p:column>
            <p:column headerText="potmostwo" style="width: 100px;">
                <h:outputText value="#{loop.mapotomkow}" /> 
            </p:column>
            </p:dataTable>
        <p:commandButton value="dodaj" onclick="pokazdodawanie()" accesskey="p" />
        </p:panelGrid>
        
        <p:panelGrid columns="2">
            <p:commandButton value="rozwiń wszystkie" actionListener="#{planKontView.rozwinwszystkie()}" update=":form:dataList" style="float: right;" />
            <p:commandButton value="zwiń wszystkie" actionListener="#{planKontView.zwinwszystkie()}" update=":form:dataList" style="float: left;" />
        </p:panelGrid>
    
</h:form>
    <p:separator/>
        <h:form id="formX">
        <p:growl id="messages"/>
        <p:focus for="dkp">
        <p:panelGrid id="dkp" columns="2" style="display: none; width: 600px;">
                        <h:outputLabel value="Nrkonta:" for="nrkonta" />
                        <p:inputText id="nrkonta" value="#{planKontView.nowe.nrkonta}" title="Nrkonta" required="true" requiredMessage="Wprowadź numer konta" maxlength="4">
                            <f:validateRegex pattern="\d+"/>
                        </p:inputText>
                       <h:outputLabel value="Nazwapelna:" for="nazwapelna" />
                        <p:inputTextarea id="nazwapelna" rows="4" cols="30" value="#{planKontView.nowe.nazwapelna}" title="Nazwapelna" required="true" requiredMessage="The Nazwapelna field is required."/>
                        <h:outputLabel value="Nazwaskrocona:" for="nazwaskrocona" />
                        <p:inputText id="nazwaskrocona" value="#{planKontView.nowe.nazwaskrocona}" title="Nazwaskrocona" required="true" requiredMessage="The Nazwaskrocona field is required."/>
                        <h:outputLabel value="Bilansowewynikowe:" for="bilansowewynikowe" />
                        <p:selectOneMenu id="bilansowewynikowe" value="#{planKontView.nowe.bilansowewynikowe}" title="Bilansowewynikowe" required="true" requiredMessage="The Bilansowewynikowe field is required." style="width: 170px;">
                            <f:selectItem itemLabel="bilansowe" itemValue="bilansowe"/>
                            <f:selectItem itemLabel="wynikowe" itemValue="wynikowe"/>
                        </p:selectOneMenu>
                        <h:outputLabel value="Zwyklerozrachszczegolne:" for="zwyklerozrachszczegolne" />
                        <p:selectOneMenu id="zwyklerozrachszczegolne" value="#{planKontView.nowe.zwyklerozrachszczegolne}" title="Zwyklerozrachszczegolne" required="true" requiredMessage="The Zwyklerozrachszczegolne field is required." style="width: 170px;">
                            <f:selectItem itemLabel="zwykłe" itemValue="zwykłe"/>
                            <f:selectItem itemLabel="rozrachunkowe" itemValue="rozrachunkowe"/>
                            <f:selectItem itemLabel="szczególne" itemValue="szczególne"/>
                       </p:selectOneMenu>
                        <p:commandButton value="dodaj" actionListener="#{planKontView.dodaj()}"  type="submit" update=":formX, :form" style="display: none;"/>
                        <p:commandButton value="dodaj" actionListener="#{planKontView.dodaj()}" accesskey="d" type="submit" update=":formX, :form" style="float: right;"/>
        </p:panelGrid>
            </p:focus>
            </h:form>
    <h:form id="formY">
        <p:growl id="messages"/>
        <p:focus for="dkp">
        <p:panelGrid id="dkp" columns="2" style="display: none; width: 600px;">
                        <h:outputLabel value="Nrkonta:" for="nrkonta" />
                        <p:inputText id="nrkonta" value="#{planKontView.nowe.nrkonta}" title="Nrkonta" required="true" requiredMessage="Wprowadź numer konta" maxlength="4">
                            <f:validateRegex pattern="\d+"/>
                        </p:inputText>
                       <h:outputLabel value="Nazwapelna:" for="nazwapelna" />
                        <p:inputTextarea id="nazwapelna" rows="4" cols="30" value="#{planKontView.nowe.nazwapelna}" title="Nazwapelna" required="true" requiredMessage="The Nazwapelna field is required."/>
                        <h:outputLabel value="Nazwaskrocona:" for="nazwaskrocona" />
                        <p:inputText id="nazwaskrocona" value="#{planKontView.nowe.nazwaskrocona}" title="Nazwaskrocona" required="true" requiredMessage="The Nazwaskrocona field is required."/>
                        
                        <p:commandButton value="dodaj" actionListener="#{planKontView.dodaj()}"  type="submit" update=":formX, :form" style="display: none;"/>
                        <p:commandButton value="dodaj" actionListener="#{planKontView.dodaj()}" accesskey="d" type="submit" update=":formX, :form" style="float: right;"/>
                        
        </p:panelGrid>
            </p:focus>
            </h:form>
</ui:composition> 
