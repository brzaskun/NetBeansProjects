<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">


    <p:outputPanel>
        <p:panel header="Wstępne wyliczenie wyniku za wyświetlany miesiąc">
        </p:panel>
        <p:panelGrid id="prezentacjaPodatku" columns="4">
            <h:outputLabel value="okres: " style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.rokmiesiac}"/>
            <h:outputLabel value="rodzaj opodatkowania: " style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.opodatkowanie}"/>
        </p:panelGrid>
        <p:panelGrid id="prezentacjaPodatku1" columns="8">
            <h:outputLabel value="Przychody:" style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.przychody}" style="font-size: medium;">
                <f:convertNumber locale="PL" currencyCode="PLN" maxFractionDigits="2" type="currency" />
            </h:outputLabel>
            <h:outputLabel value="Koszty:" style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.koszty}" style="font-size: medium;">
                <f:convertNumber locale="PL" currencyCode="PLN" maxFractionDigits="2" type="currency" />
            </h:outputLabel>
            <h:outputLabel value="Wynik podatkowy:" style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.dochód}" style="font-size: medium;">
                <f:convertNumber locale="PL" currencyCode="PLN" maxFractionDigits="2" type="currency" />
            </h:outputLabel>
            <h:outputLabel value="Zaliczka za m-c:" style="font-style: italic;"/>
            <h:outputLabel value="#{PodatekView.podatek}" style="font-size: large;">
                <f:convertNumber locale="PL" currencyCode="PLN" maxFractionDigits="2" type="currency" />
            </h:outputLabel>
        </p:panelGrid>
        <p:panel>
        <p:commandButton actionListener="#{PodatekView.sprawozdaniePodatkowe()}" value="Oblicz" update=":form:prezentacjaPodatku, :form:prezentacjaPodatku1"/>
        </p:panel>
    </p:outputPanel>



    <p:outputPanel id="wrapper">

        <p:dataTable  var="wpis" value="#{DokTabView.obiektDOKmrjsfSel}" id="dokumentyLista" 
                      paginator="true" paginatorAlwaysVisible="true" rows="18" 
                      paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                      rowsPerPageTemplate="18,24,32,50,100" paginatorPosition="top"
                      rowKey="#{wpis.idDok}" selection="#{DokTabView.goscwybral}" 
                      rowStyleClass="#{wpis.rodzTrans eq 'sprzedaz' ? 'old' : null}" emptyMessage="W danym miesiącu nie było żadnych zapisów"
                      > 
            <f:facet name="header">  
                <h:outputText value="Wykaz dokumentów z wybranego miesiąca" />  
            </f:facet>
            <p:column selectionMode="multiple"  width="40" >
            </p:column>
            <p:column id="idColumn" headerText="lp" sortBy="#{wpis.nrWpkpir}"  width="30">  
                <f:facet name="header">  
                    <h:outputText value="lp" />  
                </f:facet> 
                <h:outputText value="#{wpis.nrWpkpir}" />
            </p:column>
            <p:column headerText="ew.vat" width="50">
                <p:rowToggler />
            </p:column>
            <p:column id="dataColumn" headerText="data wyst" filterBy="#{wpis.dataWyst}" filterMatchMode="contains" sortBy="#{wpis.dataWyst}" >  
                <h:outputText value="#{wpis.dataWyst}"/>
            </p:column>
            <p:column id="kontrColumn" headerText="kontrahent" filterBy="#{wpis.kontr.npelna}" filterMatchMode="contains" sortBy="#{wpis.kontr.npelna}" style="width: 300px; word-break: break-all;" width="">  
                <f:facet name="header">  
                    <h:outputText value="kontrahent" />  
                </f:facet> 
                <h:outputText value="#{wpis.kontr.npelna} #{wpis.kontr.miejscowosc}"  />
            </p:column>
            <!--            <p:column id="rodzTrColumn" headerText="rodzaj trans" filterBy="{wpis.rodzTrans}" filterMatchMode="contains" sortBy="{wpis.rodzTrans}">  
                            <f:facet name="header">  
                                <h:outputText value="rodzaj trans" />  
                            </f:facet> 
                            <h:outputText value="{wpis.rodzTrans}" />
                        </p:column>-->
            <p:column id="brutto" headerText="brutto" filterBy="#{wpis.brutto}" filterMatchMode="contains" sortBy="#{wpis.brutto}">  
                <f:facet name="header">  
                    <h:outputText value="brutto" />  
                </f:facet> 
                <h:outputText value="#{wpis.brutto}" style="padding-left: 20%; font-weight: 700; float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
            <p:column id="nrWlDokColumn" headerText="nr wł" filterBy="#{wpis.nrWlDk}" filterMatchMode="contains" sortBy="#{wpis.nrWlDk}" style="width: 160px;">  
                <f:facet name="header">  
                    <h:outputText value="nr wł" />  
                </f:facet> 
                <h:outputText value="#{wpis.nrWlDk}"/>
            </p:column>
            <p:column id="opisColumn" headerText="opis" filterBy="#{wpis.opis}" filterMatchMode="contains" sortBy="#{wpis.nrWlDk}" >  
                <f:facet name="header">  
                    <h:outputText value="opis" />  
                </f:facet> 
                <h:outputText value="#{wpis.opis}"/>
            </p:column>
            <p:column id="kwotaColumn" headerText="netto" filterBy="#{wpis.kwota}" filterMatchMode="contains" sortBy="#{wpis.kwota}">  
                <f:facet name="header">  
                    <h:outputText value="netto" />  
                </f:facet> 
                <h:outputText value="#{wpis.kwota}" style="padding-left: 20%; font-weight: 700; float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
            <p:column id="pkpirKolColumn" headerText="kolumna" filterBy="#{wpis.pkpirKol}" filterMatchMode="contains" sortBy="#{wpis.pkpirKol}">  
                <f:facet name="header">  
                    <h:outputText value="kolumna" />  
                </f:facet> 
                <h:outputText value="#{wpis.pkpirKol}" />
            </p:column>
            <p:column id="kwotaColumnX" headerText="netto" filterBy="#{wpis.kwotaX}" filterMatchMode="contains" sortBy="#{wpis.kwotaX}">  
                <f:facet name="header">  
                    <h:outputText value="netto" />  
                </f:facet> 
                <h:outputText value="#{wpis.kwotaX}" style="padding-left: 20%; font-weight: 700; float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText>
            </p:column>
            <p:column id="pkpirKolColumnX" headerText="kolumna" filterBy="#{wpis.pkpirKolX}" filterMatchMode="contains" sortBy="#{wpis.pkpirKolX}">  
                <f:facet name="header">  
                    <h:outputText value="kolumna" />  
                </f:facet> 
                <h:outputText value="#{wpis.pkpirKolX}" />
            </p:column>
            <p:column id="uwagaColumn" headerText="uwagi" filterBy="#{wpis.uwagi}" filterMatchMode="contains" sortBy="#{wpis.uwagi}">  
                <f:facet name="header">  
                    <h:outputText value="uwagi" />  
                </f:facet> 
                <h:outputText value="#{wpis.uwagi}" />
            </p:column>
            <p:rowExpansion>
                <p:column id="ewidencjavat" headerText="ewidencjavat - netto - vat - op/zw" width="300" resizable="true" exportable="false">  
                    <p:dataTable var="subwpis" value="#{wpis.ewidencjaVAT}" emptyMessage="dokument bez vat"  resizableColumns="true">
                        <p:column id="SubColumn1" headerText="ewidencja">  
                            <h:outputText value="#{subwpis.ewidencja.nazwa}" />
                        </p:column>
                        <p:column id="SubColumn1a"  headerText="netto">  
                            <h:outputText value="#{subwpis.netto}" style="float: right;">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                            </h:outputText>
                        </p:column>
                        <p:column id="SubColumn2" headerText="vat">  
                            <h:outputText value="#{subwpis.vat}" style="float: right;">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                            </h:outputText>
                        </p:column>
                        <p:column id="SubColumn3" headerText="op/zw">  
                            <h:outputText value="#{subwpis.estawka}" />
                        </p:column>
                    </p:dataTable>
                </p:column>
            </p:rowExpansion>
            <f:facet name="footer" id="tablefooter">
                
                <h:outputText value="suma wartości brutto wybranych dokumentów: "/><h:outputText value="#{DokTabView.podsumowaniewybranych}">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                </h:outputText><h:outputText value="zł  "/>
                <p:commandButton value="przelicz" actionListener="#{DokTabView.sumawartosciwybranych()}" update="@form"/>
            </f:facet>
        </p:dataTable>
        <p:commandButton value="drukuj" type="button">
            <p:printer target="form:dokumentyLista" />
        </p:commandButton>
      
    </p:outputPanel>
</ui:composition>   

