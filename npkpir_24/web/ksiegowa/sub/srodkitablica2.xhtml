<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">
    <p:growl id="mess_add" autoUpdate="true"/>
  <p:outputPanel id="wrapper2" deferred="true">
      <p:panel id="infosrodki" header="Dokumenty umorzeniowe niezbędne do księgowania pk">
          <p:commandButton id="generujdokumenty"  action="#{STRTableView.generujamodokumenty()}" value="Generuj dokumenty amort" global="false" update=":formSTR:dokumsrodkiLista"/>  
          </p:panel>
       <p:contextMenu for="dokumsrodkiLista" style="width: 250px;">
           <p:menuitem value="O(d)znacz jako zaksięgowane" actionListener="#{STRTableView.oznaczjakozaksiegowane()}" update=":formSTR:dokumsrodkiLista" icon="ui-icon-locked" />
            </p:contextMenu>
      <p:dataTable  var="wpis" value="#{STRTableView.amodoklist}" id="dokumsrodkiLista"
                    paginator="true" paginatorAlwaysVisible="true" rows="12" selection="#{STRTableView.amodoklistselected}"
                      paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                      rowsPerPageTemplate="6,12,24,50,100" style="width: 1200px;" rowKey="#{wpis.amodokPK.mc}"
                      rowStyleClass="#{wpis.zaksiegowane eq true ? 'old' : null}" emptyMessage="Nie wygenerowano dokumentów amortyzacyjnych"> 
                        
            <f:facet name="header">  
                <h:outputText value="Wykaz dokumentów umorzeń gotowych do zaksięgowania" />  
            </f:facet>
          <p:column selectionMode="multiple" width="50" />
          <p:column id="Column1" headerText="pod nazwa" filterBy="amodokPK.podatnik" filterMatchMode="contains" sortBy="amodokPK.podatnik" width="200">  
                 <h:outputText value="#{wpis.amodokPK.podatnik}">
                    <f:convertDateTime dateStyle="medium"  />
                </h:outputText>
            </p:column>
             <p:column id="Column2" headerText="rok" filterBy="amodokPK.rok" filterMatchMode="contains" sortBy="amodokPK.rok" width="100">  
                <f:facet name="header">  
                    <h:outputText value="rok" />  
                </f:facet> 
                <h:outputText value="#{wpis.amodokPK.rok}"/>

            </p:column>
             <p:column id="Column3" headerText="mc" filterBy="amodokPK.mc" filterMatchMode="contains" sortBy="amodokPK.mc" width="100">  
          
                <h:outputText value="#{wpis.amodokPK.mc}"  />
            </p:column>
             <p:column id="Column4" headerText="zaksięgowane odpisy">  
           
                 <p:dataTable var="subwpisX" value="#{wpis.umorzenia}" emptyMessage="Brak środków trwałych do umorzenia">
                    <p:column id="SubColumn1X" headerText="id" >  
                        <h:outputText value="#{subwpisX.nrUmorzenia}" />
                    </p:column>
                    <p:column id="SubColumn1aX" headerText="nazwa" >  
                        <h:outputText value="#{subwpisX.nazwaSrodka}" />
                    </p:column>
                      <p:column id="SubColumn2X" headerText="rok" >  
                        <h:outputText value="#{subwpisX.rokUmorzenia}" />
                    </p:column>
                    <p:column id="SubColumn3X" headerText="mc" >  
                        <h:outputText value="#{subwpisX.mcUmorzenia}" />
                    </p:column>
                    <p:column id="SubColumn4X" headerText="kwota" >  
                        <h:outputText value="#{subwpisX.kwota}" style="float: right;">
                          <f:convertNumber minFractionDigits="2" locale="PL"/>
                          </h:outputText>
                    </p:column>
                </p:dataTable>
            </p:column>
             <p:column id="Column5" headerText="zaksięgowane" filterBy="zaksiegowane" filterMatchMode="contains" sortBy="zaksiegowane" width="140">  
                 <h:outputText value="#{wpis.zaksiegowane}" />
            </p:column>
             
        </p:dataTable>
          
    </p:outputPanel>
</ui:composition>   

