<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
      <p:tab id="gotowe" title="Przeglądaj sporządzone">
          <h:form id="formsporzadzone">
           <p:contextMenu for="dokumentyLista">
                <p:menuitem value="Mail do kontr." update=":formM:messages" icon="ui-icon-mail-closed" actionListener="#{mailOther.faktura()}" />
                <p:menuitem value="Okresowa" update=":formM:messages" icon="ui-icon-arrowrefresh-1-s" actionListener="#{fakturaView.dodajfaktureokresowa()}"/>
                <p:menuitem value="Drukuj" update=":formM:messages" actionListener="#{pdfFaktura.drukuj()}" icon="ui-icon-print" />
                <p:menuitem value="Zaksięguj" update=":formM:messages" actionListener="#{fakturaView.zaksieguj()}" icon="ui-icon-locked" />
                <p:menuitem value="Usuń wiele" actionListener="#{fakturaView.destroygrupa()}" icon="ui-icon-trash" />

            </p:contextMenu>
          <p:dataTable id="dokumentyLista" value="#{fakturaView.faktury}" var="wpis"
                       selection="#{fakturaView.gosciwybral}" rowKey="#{wpis.fakturaPK.numerkolejny}" widgetVar="dokTable">
               <f:facet name="header">  
                    <h:outputText value="Zestawienie wygenerowancyh faktur: " />  
                    <h:outputText value="- wyszukiwanie: " />  
                    <p:inputText id="globalFilter" onkeyup="dokTable.filter()" style="width:150px" />  
                </f:facet>
              <p:column selectionMode="multiple" width="50"/>
              <p:column headerText="wystawca" filterBy="#{wpis.fakturaPK.wystawcanazwa}" filterMatchMode="contains" filterStyle="display : none;">
                  <h:outputText value="#{wpis.fakturaPK.wystawcanazwa}"/>
              </p:column>
              <p:column headerText="nr kolejny" filterBy="#{wpis.fakturaPK.numerkolejny}" filterMatchMode="contains" filterStyle="display : none;">
                  <h:outputText value="#{wpis.fakturaPK.numerkolejny}" />
              </p:column>
              <p:column headerText="kontrahent" sortBy="#{wpis.kontrahent.npelna}" filterBy="#{wpis.kontrahent.npelna}" filterMatchMode="contains" filterStyle="display : none;">
                  <h:outputText value="#{wpis.kontrahent.npelna}"/>
              </p:column>
              <p:column headerText="email" filterBy="#{wpis.kontrahent.email}" filterMatchMode="contains" filterStyle="display : none;">
                  <h:outputText value="#{wpis.kontrahent.email}"/>
              </p:column>
               <p:column headerText="datawystawienia" filterBy="#{wpis.datawystawienia}" filterMatchMode="contains" filterStyle="display : none;">
                   <h:outputText value="#{wpis.datawystawienia}"/>
              </p:column>
               <p:column headerText="brutto"  sortBy="#{wpis.brutto}" filterBy="#{wpis.brutto}" filterMatchMode="contains" filterStyle="display : none;">
                   <h:outputText value="#{wpis.brutto}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                    </h:outputText>
                   <h:outputText value="#{wpis.walutafaktury}"/>
              </p:column>
              <p:column headerText="wysłana" sortBy="#{wpis.wyslana}">
                  <h:outputText value="#{wpis.wyslana ? 'tak' : 'nie'}"/>
              </p:column>
              <p:column headerText="zaksiegowana" sortBy="#{wpis.wyslana}">
                  <h:outputText value="#{wpis.zaksiegowana ? 'tak' : 'nie'}"/>
              </p:column>
          </p:dataTable>
            </h:form>
        </p:tab>
</ui:composition>   

