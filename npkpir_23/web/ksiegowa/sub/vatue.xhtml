<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace">
    

    <h:form id="form">
    <p:outputPanel id="wrapper" deferred="true"> 
        <p:growl id="messages"/>
        <p:dataTable  var="wpis" value="#{vatUeView.podsumowanie}" id="dokumentyLista" editable="true" 
                      rowKey="#{wpis.kontrahent.nip}" selection="#{vatUeView.listawybranych}"
                      emptyMessage="W danym miesiącu nie było żadnych zapisów"
                      style="max-width: 55%" widgetVar="dokTable"
                      > 
            <f:facet name="header">  
                <h:outputText value="#{WpisView.podatnikWpisu} - Zestawienie dokumentów do deklaracji VAT-UE z okres #{WpisView.rokWpisu}/#{WpisView.miesiacWpisu}" /> 
                <h:outputText value="- wyszukiwanie: " />  
                    <p:inputText id="globalFilter" onkeyup="dokTable.filter()" style="width:150px" />  
            </f:facet>
            
            <p:column style="width: 5%;">
                <p:rowToggler />
            </p:column>
            <p:column id="typdokColumn" headerText="transakcja" filterBy="transakcja" filterMatchMode="contains" sortBy="transakcja" style="width: 15%;" filterStyle="display : none;" >  
                <h:outputText value="#{wpis.transakcja}"/>
            </p:column>
            <p:column id="krajkodColumn" headerText="kod kraju" filterBy="kontrahent.krajkod" filterMatchMode="contains" sortBy="kontrahent.krajkod" style="width: 15%;" filterStyle="display : none;" >  
                <h:outputText value="#{wpis.kontrahent.krajkod}"/>
            </p:column>
            <p:column id="nipColumn" headerText="nip" filterBy="kontrahent.nip" filterMatchMode="contains" sortBy="kontrahent.nip" style="width: 15%;" filterStyle="display : none;" >  
                <h:outputText value="#{wpis.kontrahent.nip}" />
            </p:column>
             <p:column id="kontrColumn" headerText="kontrahent" filterBy="kontrahent.npelna" filterMatchMode="contains" sortBy="kontrahent.npelna" style="width: 20%;" filterStyle="display : none;" >  
                <h:outputText value="#{wpis.kontrahent.npelna}"  />
            </p:column>
            <p:column id="nettoColumn" headerText="netto" filterBy="netto" filterMatchMode="contains" sortBy="netto" style="width: 15%;" filterStyle="display : none;" >  
                        <h:outputText value="#{wpis.netto}" style="float: right;">
                          <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
            </p:column>
             <p:column id="liczbaColumn" headerText="ilość dok" filterBy="liczbadok" filterMatchMode="contains" sortBy="liczbadok" style="width: 15%;" filterStyle="display : none;" >  
                        <h:outputText value="#{wpis.liczbadok}" style="float: right;">
                          <f:convertNumber minFractionDigits="0" locale="PL"/>
                        </h:outputText>
            </p:column>

             <p:rowExpansion>
                <p:column id="ewidencjavat" headerText="dokumenty podsumowane" width="300" resizable="true">  
                    <p:dataTable var="subwpis" value="#{wpis.zawiera}" emptyMessage="błąd!"  resizableColumns="true" style="width: 600px;">
                    <p:column id="SubColumn1" headerText="data wyst">  
                        <h:outputText value="#{subwpis.dataWyst}" />
                    </p:column>
                    <p:column id="SubColumn1b" headerText="nr własny">  
                        <h:outputText value="#{subwpis.nrWlDk}" />
                    </p:column>
                    <p:column id="SubColumn1c" headerText="opis">  
                        <h:outputText value="#{subwpis.opis}" />
                    </p:column>
                    <p:column id="SubColumn1a"  headerText="netto">  
                        <h:outputText value="#{subwpis.netto}" style="float: right;">
                        <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                     <p:column id="SubColumn4" headerText="okresy vat">  
                        <h:outputText value="#{subwpis.vatM}/#{subwpis.vatR}" style="float: right;"/>
                </p:column>
                </p:dataTable>
            </p:column>
                </p:rowExpansion>
            
            
        </p:dataTable>
        <p:commandButton value="Print" style="margin: 3%; width: 120px;">
            <p:printer target="form:dokumentyLista"/>
        </p:commandButton>
    </p:outputPanel>
    </h:form>
</ui:composition>   

