<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:bcf="http://brzaskun.com/facelets">
            <h:form id="form">
            <p:panelGrid id="przyciskivat" columns="6" style="border-style: solid; border-color: lightgray;">
                <p:commandButton id="przycisk2" value="oblicz"  actionListener="#{vat7DKView.obliczNowa()}" update=":form" style="width: 150px" title="Najpierw wciśnij oblicz vat7. Potem dopisz ewentualne kwoty z ręki."/>
                <p:commandButton id="przycisk3" value="zapisz"  actionListener="#{vat7DKView.zapiszdeklaracje()}" update=":form" style="width: 150px; margin-left: 10px;" title="Najpierw wciśnij oblicz vat7. Potem dopisz ewentualne kwoty z ręki."/>
            <h:outputText value="Dane zgodne, można zachować." rendered="#{zamkniecieView.sprawdzMiesiacRok()}"/>
            <p:selectBooleanCheckbox value="#{vat7DKView.zachowaj}" style="width: 120px" valueChangeListener="#{vat7DKView.odswiezprzycisk}" rendered="#{zamkniecieView.sprawdzMiesiacRok()}">
                <p:ajax event="change" partialSubmit="true" update=":form:przyciskivat"/>
            </p:selectBooleanCheckbox>
            <h:outputText value="Wymuś zapis jako deklarację pierwotną." rendered="#{zamkniecieView.sprawdzMiesiacRok()}"/>
            <p:selectBooleanCheckbox value="#{vat7DKView.pierwotnazamiastkorekty}" style="width: 120px" immediate="true" rendered="#{zamkniecieView.sprawdzMiesiacRok()}"/>
              </p:panelGrid>
            <p:growl id="msg" />
            <p:panel header="Dane do bieżącej deklaracji VAT7 miesięcznej. Podatnik: #{vat7DKView.nowadeklaracja.podatnik}"/>
            <h:panelGrid columns="1"  style="width: 90%;">
                <p:dataTable value="#{vat7DKView.sumaschemewidencjilista}" var="loop" sortBy="#{loop.schemaEwidencja.polenetto}" style="width: 800px;"
                             emptyMessage="nie pobrano danych" >
                    <f:facet name="header">
                        <h:outputText value="rozliczenie podatku należnego"/>
                    </f:facet>
                    <p:column width="400">
                        <h:outputText value="#{loop.schemaEwidencja.evewidencja.pole}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.schemaEwidencja.polenetto}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl value="#{loop.EVatwpisSuma.netto}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.schemaEwidencja.polevat}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl value="#{loop.EVatwpisSuma.vat}"/>
                    </p:column>
                </p:dataTable>
                <p:panelGrid style="text-align: center;width: 790px;">
                    <f:facet name="header">
                        <p:row>
                            <p:column>
                            </p:column>
                            <p:column>
                            </p:column>
                            <p:column>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column>
                            <h:outputText value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.nazwapozycji}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.sumanetto}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.sumavat}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                    
                    <p:dataTable value="#{vat7DKView.schemawierszsumarycznylista}" var="loop" sortBy="#{loop.polenetto}" style="width: 800px;"
                                 first="1" emptyMessage="">
                    <f:facet name="header">
                        <h:outputText value="rozliczenie podatku naliczonego"/>
                    </f:facet>
                    <p:column width="400">
                        <h:outputText value="#{loop.deklaracjaVatWierszSumaryczny.nazwapozycji}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.polenetto}" rendered="#{loop.netto1vat2 != 2}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl value="#{loop.deklaracjaVatWierszSumaryczny.sumanetto}" rendered="#{loop.netto1vat2 != 2}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.polevat}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl value="#{loop.deklaracjaVatWierszSumaryczny.sumavat}"/>
                    </p:column>
                </p:dataTable>
            </h:panelGrid>
        </h:form>
</ui:composition>   


