<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <p:tab title="Wybór opodatkowania podatkiem dochodowym">  
        <h:form id="form1" >
            <h:outputText value="Wybór opodatkowania podatkiem dochodowym" style="font-size: 15px"/>
            <p:focus for="parametrypodatnika"/><br/>
            <h:outputText value="dane historyczne"/><br/>
            <p:dataTable value="#{podatnikView.podatnikOpodatkowanie}"  var="loop" style="width: 980px;">
                <p:column headerText="od" width="80">
                        <h:outputText value="#{loop.mcOd}-" />
                        <h:outputText value="#{loop.rokOd}" />
                    </p:column>
                <p:column headerText="do" width="80">
                        <h:outputText value="#{loop.mcDo}-" />
                        <h:outputText value="#{loop.rokDo}" />
                    </p:column>
                    <p:column headerText="rodzaj opodatkowania">
                        <h:outputText value="#{loop.formaopodatkowania}" />
                    </p:column>
                    <p:column headerText="mies./kwart.">
                        <h:outputText value="#{loop.mc0kw1 eq false ? 'miesięcznie' : 'kwartalnie'}" />
                    </p:column>
                    <p:column headerText="stawka pod." rendered="#{WpisView.formaprawna eq 'SPOLKA_Z_O_O'}">
                        <h:outputText value="#{loop.stawkapodatkuospr}">
                            <f:convertNumber type="percent"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="dołączony do roku">
                        <h:outputText value="#{loop.dolaczonydoroku}" />
                    </p:column>
                    <p:column headerText="zamkniety" width="60" style="text-align: center;">
                        <h:outputText value="#{loop.zamkniety ? 'tak': 'nie'}" style="#{loop.zamkniety ? 'color: red;': 'color: green;'}"/>
                    </p:column>
                    <p:column  width="60" style="text-align: center;">
                        <p:commandButton icon="fa fa-lock" actionListener="#{podatnikView.zamknijrok(loop)}" global="true" update="@parent:@parent"
                                         style="#{loop.zamkniety ? 'color: green;': 'color: red;'}"/>
                    </p:column>
            </p:dataTable>
            <h:outputText value="wybierz parametry aktualne"/><br/>
            <p:panelGrid id="parametrypodatnika" columns="6" >
                <h:outputText value="rok podatkowy: "/><p:selectOneMenu value="#{podatnikView.wybranyPodatnikOpodatkowanie.rokOd}"><f:selectItems value="#{Roki.rokiListString}"/></p:selectOneMenu>
                <p:selectOneMenu value="#{podatnikView.wybranyPodatnikOpodatkowanie.formaopodatkowania}" >
                    <f:selectItem itemValue="zasady ogólne" itemLabel="zasady ogólne"/> 
                    <f:selectItem itemValue="podatek liniowy" itemLabel="podatek liniowy"/>
                    <f:selectItem itemValue="ryczałt" itemLabel="ryczałt"/>
                    <f:selectItem itemValue="księgi rachunkowe" itemLabel="księgi rachunkowe"/>
                </p:selectOneMenu>
                <p:selectOneMenu value="#{podatnikView.wybranyPodatnikOpodatkowanie.mc0kw1}" >
                    <f:selectItem itemLabel="miesięczne" itemValue="false"/> 
                    <f:selectItem itemLabel="kwartalne" itemValue="true"/>
                </p:selectOneMenu>
                <h:outputText value="stawka pod. (0,19)" rendered="#{WpisView.formaprawna eq 'SPOLKA_Z_O_O'}"/>
                <p:inputNumber value="#{podatnikView.wybranyPodatnikOpodatkowanie.stawkapodatkuospr}" decimalPlaces="2" maxValue="1"  rendered="#{WpisView.formaprawna eq 'SPOLKA_Z_O_O'}"/>
            </p:panelGrid>
            <br/>
            <p:panelGrid columns="2" style="column-width: 350px; width: 500px">
                <p:commandButton action="#{podatnikView.usundoch()}" value="usun parametr" update="@form" type="submit"/>
                <p:commandButton action="#{podatnikView.dodajdoch()}" value="dodaj parametr" update="@form" type="submit"/>
            </p:panelGrid>
        </h:form>
        <br/><br/>
    </p:tab>
</ui:composition> 
