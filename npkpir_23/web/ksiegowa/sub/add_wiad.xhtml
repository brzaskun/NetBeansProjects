
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
      <style>
        .ui-inputfield .ui-inputtext {
            padding: 0px !important;
            margin: 0px !important;
        }

        .ui-datatable-data tr td {
            padding: 0px !important;
            margin: 0px !important;
        }
/*        dzieki temu nie mamy ramek przy wpisywani danych do dokumentu*/
        .ui-inputfield, .ui-widget-content .ui-inputfield, .ui-widget-header .ui-inputfield {
            border: none;
            outline: none;
            box-shadow: none;
        }
        .ui-inputfield.ui-state-focus, .ui-widget-content .ui-inputfield.ui-state-focus, .ui-widget-header .ui-inputfield.ui-state-focus {
            font-weight: 900;
            background: #e4e3e3;
        }
        
        
        
    </style>
    <h:form id="dodWiad">
<!--                te batony zostaja, sa wywolywane przez javascript-->
                <p:commandButton id="dodkol" value="dodajkolumne" actionListener="#{DokumentView.dodajwierszpkpir()}" update=":dodWiad:tabelapkpir" oncomplete="aktywujnetto()" accesskey="p" style="display: none;"/>
                <p:commandButton id="usunkol" value="usunkolumne" actionListener="#{DokumentView.usunwierszpkpir()}" update=":dodWiad:tabelapkpir" oncomplete="aktywujnetto()" accesskey="p" style="display: none;"/>
            <p:panel menuTitle="Wprowadzanie dokumentów klient" header="Wprowadzanie dokumentów klient: #{WpisView.podatnikWpisu} okres: #{WpisView.rokWpisu}/#{WpisView.miesiacWpisu}" 
                 style="width: 1100px; box-shadow: 10px 10px 5px #888; padding: 2%; margin-top: -2%; min-height: 450px;" id="wprowadzanie">
            <p:growl id="mess_add" autoUpdate="true"/>
            <p:focus for="polawprowadzania1"/>
            <p:panelGrid id="polawprowadzania1" columns="2" style="width: 400px;">
                <h:outputLabel value="data wystawienia" style="font-weight: 700"/>
                <h:outputLabel value="data powst.ob." style="font-weight: 700"/>
                 <p:inputText id="dataPole" value="#{DokumentView.selDokument.dataWyst}"   accesskey="s" maxlength="10" style="width: 100px; height: 19px;" size="10"  required="true" requiredMessage="Pole daty nie może byc puste" immediate="false"  onblur="ustawDate(#{WpisView.rokWpisu},#{WpisView.miesiacWpisu});" title="wpisz numer dnia, lub miesiąc i dzień"  >
<!--     archeo     <p:ajax event="blur" listener="{DokumentView.podlaczPierwszaKolumne()}" update=":dodWiad:tabelapkpir"  />-->
                    <p:ajax event="blur" listener="#{DokumentView.zmienokresVAT}"/>
                </p:inputText>
                <p:inputText id="dataSPole" value="#{DokumentView.selDokument.dataSprz}" maxlength="10" style="width: 100px" onblur="ustawDateSprzedazy(#{WpisView.rokWpisu},#{WpisView.miesiacWpisu});" required="true" requiredMessage="Pole daty sprzedaży nie może byc puste" >
                    <p:ajax event="blur" listener="#{DokumentView.zmienokresVAT}"/>
                </p:inputText>
            </p:panelGrid>
            <p:panelGrid id="polawprowadzania" columns="4" style="width: 500px;">
                <h:outputLabel value="kontrahent ( + -> skopiuj)" style="font-weight: 700"/>
                <h:outputLabel value="rodzaj dok" style="font-weight: 700"/>
                <h:outputLabel value="nr własny" style="font-weight: 700;"/>
                <h:outputLabel value="opis transakcji (F9)/nowa kol (+-)" style="font-weight: 700"/>
                <p:autoComplete id="acForce" value="#{DokumentView.selDokument.kontr}" completeMethod="#{klienciConverterView.completeKL}"
                                var="p" itemLabel="#{p.npelna}" itemValue="#{p}" converter="KlientConv" title="wpisz nazwę lub nip kontrahenta"
                                minQueryLength="3" maxResults="12" maxlength="12" converterMessage="Nieudana konwersja Klient" 
                                widgetVar="dialogklient" cache="true" forceSelection="true" queryDelay="10" 
                                required="true" requiredMessage="Pole klienta nie może być puste" onkeyup="sprawdzczykopiowacklienta();" onblur="sprawdzczybrakklienta();">
                    <f:ajax event="blur" execute="@this"/>
                    <p:ajax event="blur" partialSubmit="true" listener="#{DokumentView.pobierzdaneZpoprzedniegoDokumentu}" />
                    <f:facet name="itemtip">  
                        <h:panelGrid  columns="2" cellpadding="5" width="400">  
                            <f:facet name="header">  
                                <h:outputText value="Dane kontrahenta"/>
                            </f:facet>  
                            <h:outputText value="Nazwa: " />  
                            <h:outputText id="npelna" value="#{p.npelna}" />  
                            <h:outputText value="NIP: " />  
                            <h:outputText id="nip" value="#{p.nip}" />  
                            <h:outputText value="Adres " />  
                            <h:outputText id="klumna" value="#{p.miejscowosc} #{p.ulica} #{p.dom} #{p.lokal}" /> 
                        </h:panelGrid>
                    </f:facet>
                </p:autoComplete>
                <h:selectOneMenu id="rodzajTrans" value="#{DokumentView.typdokumentu}" required="true"  valueChangeListener="#{DokumentView.wybranydokument}"
                                 style="width: 180px; word-break: break-all; height: 25px;" 
                                 styleClass="ui-selectonemenu-label ui-inputfield ui-corner-all"
                                 onfocus="$(this).addClass('ui-state-focus');"
                                 onblur="$(this).removeClass('ui-state-focus');">
                    <f:selectItems value="#{DokumentView.rodzajedokKlienta}" var="loop" itemLabel="#{loop.rodzajedokPK.skrotNazwyDok} - #{loop.nazwa}" itemValue="#{loop.rodzajedokPK.skrotNazwyDok}"/>
                    <p:ajax event="keyup" listener="#{DokumentView.pobierzwprowadzonynumer()}" global="false"/>
                    <p:ajax event="blur" listener="#{DokumentView.podepnijListe()}"  update="dodWiad:tabelapkpir" partialSubmit="true" global="false"/>
                    <p:ajax event="blur" partialSubmit="true" listener="#{DokumentView.wygenerujnumerkolejny()}" update=":dodWiad:numerwlasny" oncomplete="aktywujopis();" global="false"/>
                </h:selectOneMenu>
                <p:inputText id="numerwlasny" value="#{DokumentView.selDokument.nrWlDk}" title="wpisz numer własny faktury">
                    <f:validateLength minimum="1" maximum="50"/>
                    <p:ajax event="blur" partialSubmit="true" listener="#{DokumentView.sprawdzCzyNieDuplikatwtrakcie}"/>
                </p:inputText>

                <p:autoComplete id="opis" value="#{DokumentView.selDokument.opis}" completeMethod="#{Opis.complete}"
                                var="p" itemLabel="#{p}" itemValue="#{p}"  title="wpisz opis faktury"
                                minQueryLength="2" maxResults="10" maxlength="40"
                                effect="clip" autocomplete="true"  queryDelay="1" style="width: 200px;">
                    <p:ajax event="change" partialSubmit="true" global="false"/>
                </p:autoComplete>

            </p:panelGrid>

            <p:commandButton id="dodajopis" value="ok" actionListener="#{Opis.dodajOpis}" style="display: none;"/>
            <!--        <span id="log"></span>-->
                              <!-- kolumny podatkowej ksiegi przychodow i rozchodow-->
            <p:panelGrid columns="2" style="width: 90%;" columnClasses="forty-percent, sixty-percent">
              <p:dataTable id="tabelapkpir" value="#{DokumentView.selDokument.listakwot1}" var="row" emptyMessage="jeszcze nie wygenerowano kolumny" >
                    <p:column headerText="kwota faktury netto" style="text-align: right;" width="120">
                        <pe:inputNumber id="kwotaPkpir" value="#{row.netto}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right; width: 120px; height: 19px;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto" > 
                            <p:ajax event="blur" listener="#{DokumentView.dokumentProstySchowajEwidencje}" global="false" oncomplete="dolaczwyliczenieKopiowanie();"/>
                        </pe:inputNumber>
                    </p:column>
                  <p:column headerText="kolumna pkpir" style="text-align: center;" width="170">
                      <h:selectOneMenu id="kolumnaPkpir" value="#{row.nazwakolumny}" style="width: 170px; text-align: center;" styleClass="ui-selectonemenu-label ui-inputfield ui-corner-all"
                                         onfocus="$(this).addClass('ui-state-focus');"
                                        onblur="$(this).removeClass('ui-state-focus');">
                            <f:selectItems value="#{DokumentView.kolumny}"/>
                        </h:selectOneMenu><br/>
                    </p:column>
                </p:dataTable>
                <p:dataTable id="tabelapkpir2" value="#{DokumentView.selDokument}" var="item" >
                    <p:column headerText="dok. prosty" style="text-align: center;" width="60">
                        <h:selectBooleanCheckbox id="dokumentprosty" value="#{item.dokumentProsty}" >
                            <p:ajax event="click" partialSubmit="true" listener="#{DokumentView.dokumentProstySchowajEwidencje()}" global="false"/>
                        </h:selectBooleanCheckbox>
                    </p:column>
                    <p:column headerText="rozliczony" style="text-align: center;" width="60">
                        <h:selectBooleanCheckbox id="rozliczony" value="#{item.rozliczony}" onchange="przekazdate()"  >
                            <p:ajax event="click" partialSubmit="true" global="false"/>
                        </h:selectBooleanCheckbox>
                    </p:column>
                    <p:column headerText="termin płatności">
                        <p:inputText id="dataTPole" value="#{item.terminPlatnosci}" maxlength="10"  required="true" requiredMessage="Brakuje terminu platnosci" title="wpisz pełny termin płatności">
                        </p:inputText>
                    </p:column>
                    <p:column headerText="wartość dokumentu">
                        <pe:inputNumber id="sumbrutto" value="#{DokumentView.sumbrutto}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right; height: 19px;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"/> 
                    </p:column>
                    <p:column headerText="inwestycja">
                        <h:selectOneMenu id="inwestycja" value="#{item.symbolinwestycji}" style="display: none;">
                            <f:selectItems value="#{inwestycjeView.inwestycjesymbole}"/>
                        </h:selectOneMenu>
                    </p:column>
                </p:dataTable>
            </p:panelGrid>
<!--            sprzedawanie srodkow trwalych-->
            <p:contextMenu for="panelewidencji">
                <p:menuitem global="false" value="Sprzedaż" onclick="PF('confirmation').show()" actionListener="#{sTRSprzedazView.sprzedajgrupa(DokumentView.selDokument.dataWyst,DokumentView.selDokument.nrWlDk)}" icon="ui-icon-trash"/>
                <p:menuitem global="false" value="Odkup" onclick="PF('confirmation1').show()" actionListener="#{sTRSprzedazView.sprzedajgrupa(DokumentView.selDokument.dataWyst,DokumentView.selDokument.nrWlDk)}" icon="ui-icon-trash"/>
            </p:contextMenu>
            <p:panel id="panelewidencji" style="max-width: 1100px;">
                <p:dataTable  var="wpis" value="#{STRTableView.obiektDOKjsfSel}" id="srodkiLista" rendered="#{DokumentView.pokazEST}"
                              paginator="true" paginatorAlwaysVisible="true" rows="6"  filteredValue="#{STRTableView.filteredValues}"
                              paginatorTemplate="{FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}" 
                              rowsPerPageTemplate="6,12,18,24,32,50" style="max-width: 1100px; " widgetVar="srodkiListadodWiad"
                              rowKey="#{wpis.id}" selection="#{sTRSprzedazView.wybranesrodkitrwale}"> 

                    <f:facet name="header">  
                        <h:outputText value="Ewidencja srodkow trwalych - wyszukiwanie" /> 
                        <!-- nie dziala nie wiadomo dlaczego-->
<!--                        <p:inputText id="globalFilter1" onkeyup="PF('srodkiListadodWiad').filter();" style="width:250px" placeholder="wyszukiwane wyrażenie" />  -->
                    </f:facet>
                    <p:column selectionMode="multiple" width="20" style="text-align: center;"/>
                    <p:column id="idColumn" headerText="nr kol" width="40" style="text-align: center;">  
                        <h:outputText value="#{wpis.nrsrodka}" style="#{wpis.styl}"/>
                    </p:column>
                    <p:column id="dataColumn" headerText="data zak" filterBy="#{wpis.datazak}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.datazak}" width="80">  

                        <h:outputText value="#{wpis.datazak}" style="#{wpis.styl}">
                            <f:convertDateTime dateStyle="medium"  />
                        </h:outputText>
                    </p:column>
                    <p:column id="data2Column" headerText="data przek" filterBy="#{wpis.dataprzek}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.dataprzek}" width="80">  

                        <h:outputText value="#{wpis.dataprzek}" style="#{wpis.styl}">
                            <f:convertDateTime dateStyle="medium"  />
                        </h:outputText>
                    </p:column>
                    <p:column id="nazwaColumn" headerText="nazwa" filterBy="#{wpis.nazwa}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.nazwa}" >  

                        <h:outputText value="#{wpis.nazwa}"  style="#{wpis.styl}" />
                    </p:column>
                    <p:column id="kstColumn" headerText="KŚT" filterBy="#{wpis.kst}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.kst}" width="50"  style="text-align: center;">  

                        <h:outputText value="#{wpis.kst}"  style="#{wpis.styl}" />
                    </p:column>
                    <p:column id="dowColumn" headerText="nr.fakt" filterBy="#{wpis.nrwldokzak}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.nrwldokzak}" width="50">  

                        <h:outputText value="#{wpis.nrwldokzak}" style="#{wpis.styl}"  />
                    </p:column>
                    <p:column id="rodzTrColumn" headerText="#{mgs.kwota}" filterBy="#{wpis.netto}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.netto}">  

                        <h:outputText value="#{wpis.netto}" style="float: right; #{wpis.styl}">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="vatColumn" headerText="umorz.pocz" filterBy="#{wpis.umorzeniepoczatkowe}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.umorzeniepoczatkowe}">  

                        <h:outputText value="#{wpis.umorzeniepoczatkowe}" style="float: right; #{wpis.styl}">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="stawkaColumn" headerText="odpis stawka" filterBy="#{wpis.stawka}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.stawka}" width="50"  style="text-align: right;">  

                        <h:outputText value="#{wpis.stawka}%" style="#{wpis.styl}">
                            <f:convertNumber maxFractionDigits="2"
                                             groupingUsed="true"
                                             maxIntegerDigits="5"
                                             type="number"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="odpisrokColumn" headerText="odpis rok" filterBy="#{wpis.odpisrok}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.odpisrok}" width="90">  

                        <h:outputText value="#{wpis.odpisrok}" style="float: right; #{wpis.styl}">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="odpismcColumn" headerText="wyksiegowany" filterBy="#{wpis.odpismc}" filterStyle="display : none;" filterMatchMode="contains" sortBy="#{wpis.odpismc}" width="90">  

                        <h:outputText value="#{wpis.datasprzedazy}" style="float: right; #{wpis.styl}">
                        </h:outputText>
                    </p:column>
                </p:dataTable>

            </p:panel>
            <!--pola ewidencji SRODKOW TRWALYCH-->
            <p:panel id="panelwyszukiwarki" style="width: 300px;" >
                <p:panel header="wyszukiwarka środka trw." style="width: 300px;" rendered="#{DokumentView.renderujwysz}"/>
                <p:autoComplete id="acForce1" value="#{DokumentView.srodekkategoria}" completeMethod="#{srodkikstView.complete}"
                                var="pa" itemLabel="#{pa.nazwa}" itemValue="#{pa}"  converter="SrodkiConv"
                                minQueryLength="3" maxResults="15" maxlength="15" itemtipMyPosition="rightbottom"
                                queryDelay="100" size="50" rendered="#{DokumentView.renderujwysz}">
                    <p:ajax event="blur" async="true" listener="#{DokumentView.skopiujSTR()}" oncomplete="dataprzyjecia();"/>
                    <f:facet name="itemtip">  
                        <h:panelGrid  columns="2" cellpadding="5" width="400" >  
                            <f:facet name="header">  
                                <h:outputText value="Dane środka trwałego"/>
                            </f:facet>  
                            <h:outputText value="Nazwa: " />  
                            <h:outputText id="npelna1" value="#{pa.nazwa}"/>  
                            <h:outputText value="Stawka " />  
                            <h:outputText id="nip1" value="#{pa.stawka}" />  
                            <h:outputText value="KŚT " />  
                            <h:outputText id="klumna1" value="#{pa.symbol}" /> 
                        </h:panelGrid>
                    </f:facet>
                </p:autoComplete>
            </p:panel>
            <p:panel id="nowypanelsrodki" style="width: 90%;">
                <p:dataTable id="tabelasrodkitrwaleOT" value="#{DokumentView.selectedSTR}" var="loops" rendered="#{DokumentView.renderujwysz}"> 
                    <p:column headerText="nazwa środka">
                        <p:inputText id="nazwasrodka" value="#{loops.nazwa}"/>
                    </p:column>
                     <p:column headerText="data przyjecia">
                         <p:inputText id="dataprz" value="#{loops.dataprzek}" onblur="ustawDateSrodekTrw();"/>
                    </p:column>
                    <p:column headerText="symbol KST">
                         <p:inputText value="#{loops.kst}"/>
                    </p:column>
                    <p:column headerText="stawka amort">
                         <p:inputText value="#{loops.stawka}"/>
                    </p:column>
                    <p:column headerText="dotychczasowe umorzenie">
                         <pe:inputNumber value="#{loops.umorzeniepoczatkowe}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"/> 
                    </p:column>
                    <p:column headerText="nie podlega umorzeniu">
                         <pe:inputNumber value="#{loops.niepodlegaamortyzacji}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"/> 
                    </p:column>
                    <p:column headerText="środek trw/wyposazenie">
                        <h:selectOneMenu value="#{loops.typ}">
                            <f:selectItem itemLabel="srodek trw." itemValue="srodek trw."/>
                            <f:selectItem itemLabel="wyposazenie" itemValue="wyposazenie"/>
                        </h:selectOneMenu>
                    </p:column>
                </p:dataTable>
            </p:panel>
            <!--pola ewidencji VAT-->

             <p:panel id="panelewidencjivat" >
                <!--                alternatywne pola ewidencji vat-->
                <p:dataTable id="tablicavat" value="#{DokumentView.ewidencjaAddwiad}" var="item" emptyMessage="nie ma zapisów w ewidencji vat" style="width: 80%;" rendered="#{!DokumentView.ukryjEwiencjeVAT}">
                    <p:column headerText="rodzaj ewidencji" style="width: 25%;">
                        <h:outputText value="#{item.opis}"/>
                    </p:column>
                    <p:column headerText="netto" style="width: 20%;">
                        <pe:inputNumber id="netto" value="#{item.netto}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"> 
                            <p:ajax event="change" listener="#{DokumentView.updatenetto(item)}" />
                        </pe:inputNumber>
                    </p:column>
                    <p:column headerText="#{mgs.VAT}" style="width: 20%;">
                        <pe:inputNumber id="vat" value="#{item.vat}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"> 
                            <p:ajax event="change" listener="#{DokumentView.updatevat(item)}" />
                        </pe:inputNumber>
                    </p:column>
                    <p:column headerText="brutto" style="width: 20%;">
                        <pe:inputNumber id="brutto" value="#{item.brutto}" symbol=" zł" required="true" requiredMessage="Brak kwoty - uzupełnij" style="text-align: right; height: 19px;" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000" styleClass="wiersznetto"/> 
                    </p:column>
                    <p:column headerText="op/zw" style="width: 15%;">
                        <h:selectOneMenu value="#{item.opzw}" styleClass="ui-selectonemenu-label ui-inputfield ui-corner-all"
                                 onfocus="$(this).addClass('ui-state-focus');"
                                 onblur="$(this).removeClass('ui-state-focus');"
                                 style="width: 100px;">
                            <f:selectItem itemLabel="sprz.op" itemValue="sprz.op"/>
                            <f:selectItem itemLabel="sprzed.op.izw." itemValue="sprzed.op.izw."/>
                        </h:selectOneMenu>
                    </p:column>
                </p:dataTable>
             </p:panel>
            <!--pola ewidencji VAT-->
            <p:panelGrid id="ostatnipanel" columns="4" style="width: 400px;">

                <h:outputLabel value="v m-c" style="font-weight: 700"/>
                <h:outputLabel value="v rok" style="font-weight: 700"/>
                <h:outputLabel value="uwagi" style="font-weight: 700"/>
                <h:outputLabel value=""/>
                <h:selectOneMenu id="vatm" value="#{DokumentView.selDokument.vatM}"
                                 styleClass="ui-selectonemenu-label ui-inputfield ui-corner-all"
                                 onfocus="$(this).addClass('ui-state-focus');"
                                 onblur="$(this).removeClass('ui-state-focus');">
                    <f:selectItems value="#{Mce.mceList}"/>
                </h:selectOneMenu>
                <h:selectOneMenu id="rokm" value="#{DokumentView.selDokument.vatR}"
                                 styleClass="ui-selectonemenu-label ui-inputfield ui-corner-all"
                                 onfocus="$(this).addClass('ui-state-focus');"
                                 onblur="$(this).removeClass('ui-state-focus');">
                    <f:selectItems value="#{Roki.rokiList}"/>
                </h:selectOneMenu>
                <p:inputText value="#{DokumentView.selDokument.uwagi}" />
                <p:commandButton id="wprowadzenieNowego" accesskey="w" action="#{sesjaView.dodajdokument()}" actionListener="#{DokumentView.dodaj(1)}" value="Dodaj" update="@form, :zobWiad:ostatniUzytkownik" style="width: 150px;"> 
                </p:commandButton>
            </p:panelGrid>
        </p:panel>
    </h:form>
    <!-- informacja o ostatnio wprowadzonym dokumencie-->
    <h:form id="zobWiad">
        <p:panel id="ostatniUzytkownik" header="Ostatnio wprowadzony dokument" style="width: 1300px; height: 400px; box-shadow: 10px 10px 5px #888; padding: 2%; margin-top: 1%;" >
            <div style="padding: 10px;">
                <h:outputText value="zapisy w pkpir" style="font-weight: 600; color: green;"/>
            </div>
            <p:panelGrid columns="13" style="text-align: center">
                <h:outputLabel value="nr kolejny" style="font-weight: 600"/>
                <h:outputLabel value="data wyst" style="font-weight: 600"/>
                <h:outputLabel value="data sprzedaży" style="font-weight: 600"/>
                <h:outputLabel value="#{mgs.kontrahent}" style="font-weight: 600"/>
                <h:outputLabel value="rodzaj dokumentu" style="font-weight: 600"/>
                <h:outputLabel value="nr wł" style="font-weight: 600"/>
                <h:outputLabel value="#{mgs.opis}" style="font-weight: 600"/>
                <h:outputLabel value="kwota i kolumna w pkpir" style="font-weight: 600"/>
                <h:outputLabel value="k m-c" style="font-weight: 600"/>
                <h:outputLabel value="k rok" style="font-weight: 600"/>
                <h:outputLabel value="v m-c" style="font-weight: 600"/>
                <h:outputLabel value="v rok" style="font-weight: 600"/>
                <h:outputLabel value="uwagi" style="font-weight: 600"/>
                <h:outputText  value="#{DokumentView.wysDokument.idDok}"/>
                <h:outputText  value="#{DokumentView.wysDokument.dataWyst}"><f:convertDateTime parent="dd/mm/yyyy"/></h:outputText>
                <h:outputText  value="#{DokumentView.wysDokument.dataSprz}"><f:convertDateTime parent="dd/mm/yyyy"/></h:outputText>
                <h:outputText  id="nazwa" value="#{DokumentView.wysDokument.kontr.npelna}"/>
                <h:outputText  value="#{DokumentView.wysDokument.typdokumentu}"/>
                <h:outputText  value="#{DokumentView.wysDokument.nrWlDk}"/>
                <h:outputText  value="#{DokumentView.wysDokument.opis}"/>
                <p:dataTable var="subwpis" value="#{DokumentView.wysDokument.listakwot1}" emptyMessage="dokument bez zapisu w pkpir"  resizableColumns="true" style="width: 400px;">
                    <p:column id="SubColumnP1"  headerText="netto">  
                        <h:outputText value="#{subwpis.netto}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="SubColumnP2" headerText="kolumna">  
                        <h:outputText value="#{subwpis.nazwakolumny}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>

                <h:outputText  value="#{DokumentView.wysDokument.pkpirM}"/>
                <h:outputText  value="#{DokumentView.wysDokument.pkpirR}"/>
                <h:outputText  value="#{DokumentView.wysDokument.vatM}"/>
                <h:outputText  value="#{DokumentView.wysDokument.vatR}"/>
                <h:outputText  value="#{DokumentView.wysDokument.uwagi}"/>
            </p:panelGrid>
            <p:panel>
                <div style="padding: 10px;">
                    <h:outputText value="zapisy w ewidencji vat" style="font-weight: 600; color: green;"/>
                </div>
                <p:dataTable value="#{DokumentView.wysDokument.ewidencjaVAT1}" var="p" emptyMessage="Dokument prosty - bez VAT">
                    <p:column id="idColumn" headerText="#{wpis.nazwa}">  
                        <f:facet name="header">  
                            <h:outputText value="#{wpis.nazwa}"/>  
                        </f:facet> 
                        <h:outputText value="#{p.ewidencja.nazwa}" />
                    </p:column>
                    <p:column id="idColumn0" headerText="zakup">  
                        <f:facet name="header">  
                            <h:outputText value="pozycja"/>  
                        </f:facet> 
                        <h:outputText value="#{p.ewidencja.rodzajzakupu}" />
                    </p:column>
                    <p:column id="idColumn1" headerText="pozycja">  
                        <f:facet name="header">  
                            <h:outputText value="pozycja"/>  
                        </f:facet> 
                        <h:outputText value="#{p.ewidencja.pole}" />
                    </p:column>
                    <p:column id="idColumn2" headerText="netto">  
                        <f:facet name="header">  
                            <h:outputText value="netto"/>  
                        </f:facet> 
                        <h:outputText value="#{p.netto}"  style="float: right;" >
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="idColumn3" headerText="#{mgs.VAT}">  
                        <f:facet name="header">  
                            <h:outputText value="#{mgs.VAT}"/>  
                        </f:facet> 
                        <h:outputText value="#{p.vat}"  style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column id="idColumn4" headerText="op/zw">  
                        <f:facet name="header">  
                            <h:outputText value="op/zw"/>  
                        </f:facet> 
                        <h:outputText value="#{p.estawka}" />
                    </p:column>
                </p:dataTable>
            </p:panel>
            <!-- rozliczenie płatności-->
            <p:panel>
                <div style="padding: 10px;">
                    <h:outputText value="rozliczenie płatności" style="font-weight: 600"/>
                </div>
                <p:dataTable value="#{DokumentView.wysDokument.rozrachunki1}"
                             var="p">
                    <p:column id="idColumn" headerText="data zapłaty">  
                        <f:facet name="header">  
                            <h:outputText value="data zapłaty"/>  
                        </f:facet> 
                        <h:outputText value="#{p.dataplatnosci}" />
                    </p:column>
                    <p:column id="idColumn0" headerText="kwota zapłaty">  
                        <f:facet name="header">  
                            <h:outputText value="kwota zapłaty"/>  
                        </f:facet> 
                        <h:outputText value="#{p.kwotawplacona}" />
                    </p:column>
                    <p:column id="idColumn1" headerText="do rozliczenia">  
                        <f:facet name="header">  
                            <h:outputText value="do rozliczenia"/>  
                        </f:facet> 
                        <h:outputText value="#{p.dorozliczenia}" />
                    </p:column>
                </p:dataTable>
            </p:panel>>
        </p:panel>
    </h:form>
    <ui:include src="wykazklientow_dialog.xhtml"/>
</ui:composition>   


