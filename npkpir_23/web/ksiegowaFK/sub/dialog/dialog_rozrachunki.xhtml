<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions"
    >


    <p:dialog id="dialogdrugi" header="Rozrachunki" widgetVar="drugi" 
              resizable="false"  onShow="drugionShow();" closeOnEscape="true" onHide="rozrachunkionHide();" >
        <h:form id="rozrachunki">
            <div style="height: 600px;">
                <h:form id="formE" >
                    <p:panelGrid id="paneledycji" columns="4" style="width: 600px;">
                        <h:outputText value="nr dokumentu"/><h:outputText value="#{dokfkView.aktualnywierszdorozrachunkow.dokfk.dokfkPK.podatnik}/#{dokfkView.aktualnywierszdorozrachunkow.dokfk.dokfkPK.rok}/#{dokfkView.aktualnywierszdorozrachunkow.dokfk.dokfkPK.seriadokfk}/#{dokfkView.aktualnywierszdorozrachunkow.dokfk.dokfkPK.nrkolejny}"/>
                        <h:outputText value="opis"/><h:outputText value="#{dokfkView.aktualnywierszdorozrachunkow.opis}"/>
                        <h:outputText value="konto"/><h:outputText value="#{dokfkView.aktualnywierszdorozrachunkow.kontonumer}"/>
                        <h:outputText value="kwota pierwotna"/><h:outputText value="#{dokfkView.aktualnywierszdorozrachunkow.kwotapierwotna}" style="float: right;">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                        <h:outputText value="rozliczono"/><h:outputText value="#{dokfkView.aktualnywierszdorozrachunkow.rozliczonoWn gt 0 ? dokfkView.aktualnywierszdorozrachunkow.rozliczonoWn : dokfkView.aktualnywierszdorozrachunkow.rozliczonoMa}" style="float: right;">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                        <h:outputText value="do rozliczenia"/><h:outputText id="dorozliczenia" value="#{dokfkView.aktualnywierszdorozrachunkow.pozostalodorozliczeniaWn == null ? (dokfkView.aktualnywierszdorozrachunkow.pozostalodorozliczeniaMa == null ? dokfkView.aktualnywierszdorozrachunkow.kwotapierwotna : dokfkView.aktualnywierszdorozrachunkow.pozostalodorozliczeniaMa) : dokfkView.aktualnywierszdorozrachunkow.pozostalodorozliczeniaWn}" style="float: right;">
                                <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:panelGrid>
                </h:form>
                <p:dataTable id="dataList" value="#{dokfkView.rozrachunkiwierszewdokumencie}" var="loop" rowIndexVar="row" style="width: 1000px;"
                             >
                    <f:facet name="header">
                        <h:outputText value="Dokumenty nie rozliczone"/>
                    </f:facet>
                    <p:column headerText="kwota rozliczenia" width="40" style="text-align: right;">
                        <pe:inputNumber value="#{loop.kwotarozrachunku}" symbol=" zł" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/>
                    </p:column>
                     <p:column headerText="zostało do rozliczenia" width="40">
                        <h:outputText id="pozostalo" value="#{loop.wierszsparowany.rozliczonoWn == null ? (loop.wierszsparowany.rozliczonoMa == null ? loop.wierszsparowany.kwotapierwotna : loop.wierszsparowany.pozostalodorozliczeniaMa) : loop.wierszsparowany.rozliczonoWn}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                     <p:column headerText="kwota już rozliczona" width="40">
                         <h:outputText value="#{loop.wierszsparowany.rozliczonoWn gt 0 ? loop.wierszsparowany.rozliczonoWn : loop.wierszsparowany.rozliczonoMa}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="kwota transakcji" width="40">
                        <h:outputText value="#{loop.wierszsparowany.kwotapierwotna}" style="float: right;">
                            <f:convertNumber minFractionDigits="2" locale="PL"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="opis transakcji" width="300">
                        <h:outputText id="opis" value="#{loop.wierszsparowany.opis}" />
                    </p:column>
                    <p:column headerText="nr rozrachunku" width="40">
                        <h:outputText value="#{loop.wierszsparowany.idporzadkowy}"/>
                    </p:column>
                    <p:column headerText="konto przeciwstawne" width="40">
                        <h:outputText value="#{loop.wierszsparowany.kontoprzeciwstawne}"/>
                    </p:column>

                </p:dataTable>
                <p:commandButton value="zapisz" actionListener="${dokfkView.zapisanorozrachunek}" type="submit" oncomplete="drugi.hide();" update=":rozrachunki"/>
            </div>
        </h:form>
        <f:facet name="footer">
            <p:commandButton value="powrót" accesskey="o" onclick="pierwszy.show();
                    drugi.hide();"/>
           
        </f:facet>
    </p:dialog>
</ui:composition>
