<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    >
    <p:dialog id="dialogtrzeci" header="Zestawienie zaksięgowanych dokumentów" widgetVar="zestawieniezaksiegowanych"
              resizable="false"  onShow="ustawdialog('dialogtrzeci','menudokumenty');" closeOnEscape="true" onHide="resetujdialog('dialogtrzeci');PF('wiersze').hide();" >

    
         <h:form id="zestawieniedokumentow">
         <p:contextMenu id="contextmenuwpis" for=":zestawieniedokumentow:dataList">
                 <p:menuitem value="Pokazdokument" icon="ui-icon-circle-plus" update=":formwpisdokument:dataList" actionListener="#{dokfkView.przygotujDokumentEdycja()}" oncomplete="PF('wpisywanie').show();"/>
         </p:contextMenu>
             <div style="height: 600px;">
                 <p:dataTable id="dataList" value="#{dokfkView.wykazZaksiegowanychDokumentow}" var="item" rowIndexVar="row" widgetVar="tablicadokumenty" 
                              selection="#{dokfkView.selected}" rowKey="#{item.dokfkPK}" selectionMode="single" style="width: 1200px;"
                              emptyMessage="Brak zaksięgowanych dokumentów">
                     <p:ajax event="rowSelect" oncomplete="pokazwierszedok();" update=":formwpisdokument, :dialogwiersze" />
                <p:hotkey bind="down"  oncomplete="przejdzwiersz();"/>
                <p:hotkey bind="up"  oncomplete="wrocwiersz();"/>
                <p:column headerText="lp." width="30" style="text-align: center;">
                <h:outputText value="#{row+1}"/>
            </p:column>
            <p:column headerText="data" width="90"  sortBy="#{item.datawystawienia}" filterBy="#{item.datawystawienia}" filterMatchMode="contains" >
                <h:outputText value="#{item.datawystawienia}"/>
            </p:column>
            <p:column headerText="okres" width="90" >
                <h:outputText value="#{item.miesiac}/#{item.dokfkPK.rok}"/>
            </p:column>
            <p:column headerText="symbol" width="100">
                  <h:outputText value="#{item.dokfkPK.seriadokfk}/#{item.dokfkPK.nrkolejnywserii}/#{item.dokfkPK.rok}"/>
            </p:column>
            <p:column headerText="numer" width="100" sortBy="#{item.numerwlasnydokfk}" filterBy="#{wpis.numer}" filterMatchMode="contains" >
                    <h:outputText value="#{item.numerwlasnydokfk}"/>
            </p:column>
                <p:column headerText="opis" width="100" sortBy="#{item.opisdokfk}" filterBy="#{item.opisdokfk}" filterMatchMode="contains" >
                <h:outputText value="#{item.opisdokfk}"/>
            </p:column>
            <p:column headerText="wartość" width="100" sortBy="#{item.wartoscdokumentu}" filterBy="#{item.wartoscdokumentu}" filterMatchMode="contains" >
            <h:outputText value="#{item.wartoscdokumentu}" style="float: right;">
                    <f:convertNumber minFractionDigits="2" locale="PL"/>
            </h:outputText>
            </p:column>
            <p:column headerText="waluta" width="100" sortBy="#{item.walutadokumentu.symbolwaluty}" style="text-align: center;">
                    <h:outputText value="#{item.walutadokumentu.symbolwaluty}"/>
            </p:column>
            <p:column headerText="edycja" width="100" style="text-align: center;" >
                    <p:commandButton value="edit" actionListener="#{dokfkView.przygotujDokumentEdycja(item)}" styleClass="fkbutton" icon="ui-icon-document" update=":formwpisdokument"  oncomplete="PF('wpisywanie').show();" rendered="#{!item.wTrakcieEdycji}"/>
                    <h:outputText value="dok. w trakcie edycji" rendered="#{item.wTrakcieEdycji}"/>
            </p:column>
            <p:column headerText="" width="60" style="text-align: center;">
                <p:commandButton value="usun" actionListener="#{dokfkView.usundokument(item)}" styleClass="fkbutton" icon="ui-icon-trash" update=":zestawieniedokumentow:dataList"/>
            </p:column>
           
        </p:dataTable>
                    </div>

            </h:form>
        
    </p:dialog>
</ui:composition>