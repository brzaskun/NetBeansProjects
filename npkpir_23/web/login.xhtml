
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:bcf="http://brzaskun.com/facelets">
    <f:view locale="#{localeChanger.locale}">
        <f:event type="postAddToView" listener="#{logowanie.sprawdzciasteczka}"/>
        <h:head>
            <meta http-equiv="Accept-Encoding" content="gzip"/>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta http-equiv="Pragma" content="no-cache"/>
            <meta http-equiv="Accept-Encoding" content="gzip"/>
            <meta http-equiv="Expires" content="0" />
            <meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate"/>
            <h:outputStylesheet id="template" name="css/style.css"/>
            <h:outputScript library="js_common" name="language.js"/>
            <h:outputScript library="js_common" name="globales.js"/>
            <title>Biuro Rachunkowe Taxman</title>
        </h:head>
        <h:body>
            <bcf:ajaxs/>
            <div id="fb-root"></div>
            <script>
                (function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id))
                        return;
                    js = d.createElement(s);
                    js.id = id;
                    js.src = '//connect.facebook.net/pl_PL/sdk.js#xfbml=1&amp;version=v2.5';
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
            </script>
            <script>
                navigator.sayswho = (function () {
                    var ua = navigator.userAgent, tem,
                            M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
                    if (/trident/i.test(M[1])) {
                        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
                        return 'IE ' + (tem[1] || '');
                    }
                    if (M[1] === 'Chrome') {
                        tem = ua.match(/\b(OPR|Edge)\/(\d+)/);
                        if (tem != null)
                            return tem.slice(1).join(' ').replace('OPR', 'Opera');
                    }
                    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
                    if ((tem = ua.match(/version\/(\d+)/i)) != null)
                        M.splice(1, 1, tem[1]);
                    return info = M.join(' ');

                })();
                $(document).ready(function () {
                    if ((navigator.sayswho.indexOf('Chrome') === -1) &amp;&amp; (navigator.sayswho.indexOf('Opera') === -1)) {
                        if (navigator.language === 'pl' || navigator.language === 'pl-PL') {
                            alert("Ten program działa poprawnie jedynie w przeglądarce Chrome lub Opera!");
                        } else if (navigator.language === 'de' || navigator.language === 'de-DE') {
                            alert("Diese Software funktioniert nur unter Chrome oder Opera Browser!");
                        } else if (navigator.language === 'en' || navigator.language === 'en-EN') {
                            alert("This Software works only with Chrome or Opera Browser!");
                        }
                    }
                })


            </script>
            
            <!--                <p:notificationBar position="top" effect="slide" widgetVar="bar" styleClass="top" style="border: none;">  
                                <p style="text-align: center;"><h:outputText value="#{mgs.witamy}" style="color: activecaption; font-size:24px; " /></p>  
                            </p:notificationBar> -->
            <p:panel style="text-align: center; min-height: 150px;">
                <div class="fb-page" data-href="https://www.facebook.com/BiuroRachunkowe.Szczecin/?ref=hl" data-width="500" data-height="70" 
                     data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" data-show-posts="true"
                     style="text-align: center;"></div>
            </p:panel>
            <p:panel style="margin-left: auto; margin-right: auto; width: 600px; border: none" >
                <p:growl life="3600"  id="logowanie"  autoUpdate="true"/>
                <h:form id="logowanieprzyciskigorne">
                <p:panelGrid columns="3" style="margin-top: 5px; margin-left: auto; margin-right: auto; width: 400px; border-style: hidden !important;">
                    <p:column >
                        <p:commandButton value="#{mgs.pomoc}" action="pomoclogowanie" style="width: 140px;"/>
                    </p:column>
                    <p:column>
                        <p:commandButton value="#{mgs['zapomialem.hasla']}" action="zapomnialem" style="width: 140px;"/>
                    </p:column>
                    <p:column>
                        <p:commandButton value="#{mgs.rejestracja}" action="rejestruj" style="width: 140px;"/>
                    </p:column>
                </p:panelGrid>
                    </h:form>
            </p:panel>
            <h:form id="formlog1">
                <style>
                    .aktywny .ui-widget-header {
                        color:red;
                    }
                </style> 
                <p:panel style="margin-top: 2%; margin-left: auto; margin-right: auto; width: 380px"
                         header="#{facesContext.viewRoot.locale.language.equals('pl') ? statusProgramuView.aktualnystatus.tekst : (facesContext.viewRoot.locale.language.equals('de') ? statusProgramuView.aktualnystatus.tekst_de : statusProgramuView.aktualnystatus.tekst_en)}"
                         styleClass="#{statusProgramuView.aktualnystatus ne null ? 'aktywny':null}">
                    <p:focus id="focus" context="logowaniepanel"/>
                    <p:panelGrid id="logowaniepanel" columns="2" style="margin-left: auto; margin-right: auto; margin-top: 4%; width: 350px; text-align: center;"  rendered="#{logowanie.liczniklogowan gt 0}">
                        <h:outputText id="loginnazwa" value="#{mgs.login}"/>
                        <h:inputText value="#{logowanie.uzytkownik}" accesskey="s" required="true" style="width: 150px;" requiredMessage="Wpisz login!" 
                                      >
                            <p:ajax event="change" listener="#{logowanie.ustawLocale(logowanie.uzytkownik)}" partialSubmit="true" global="false"  
                                    oncomplete="r('formlog1:haslo').focus();" 
                                    update="formlog1:loginnazwa formlog1:loginhaslo formlog1:logowaniebutton infologowanie logowanieprzyciskigorne"/>
                        </h:inputText>
                        <h:outputText id="loginhaslo" value="#{mgs.haslo}"/>
                        <h:inputSecret id="haslo" value="#{logowanie.haslo}" required="true" style="width: 150px;" requiredMessage="Wpisz hasło!" autocomplete="true" redisplay="true"/>
                    </p:panelGrid>
                    <br/>
                    <p:panelGrid id="logowaniebutton" columns="2" style="margin-left: auto; margin-right: auto; width: 350px; text-align: center; border: none !important;">
                        <style>
                            .loginbutton  button:first-child {
                                width: 150px;
                            };
                        </style>
                        <p:splitButton value="#{mgs.zaloguj}" action="#{logowanie.login()}" ajax="false"
                                       rendered="#{logowanie.liczniklogowan gt 0}" styleClass="loginbutton">
                            <p:menuitem value="#{mgs.zapamietajmnie}" action="#{logowanie.savelogin()}"/>
                            <p:menuitem value="#{mgs.zapomnijmnie}" action="#{logowanie.zapomnijmnie()}"/>
                        </p:splitButton>
                        <h:outputText value="Logowanie do systemu z tego numeru IP zostalo zablokowane na 24 godziny ze względów bezpieczeństwa. Podczas ostatniego loginu wielokrotnie podano złe dane logujące. Skontaktuj się z adminem lub odczekaj 24h." rendered="#{logowanie.liczniklogowan eq 0}"/>
                    </p:panelGrid>
                    <!--                        <p:commandButton value="#{mgs.wyloguj}" action="{Logowanie.logout()}" update=":formlog1:logowanie" ajax="false"/>-->
                </p:panel>
            </h:form>
                   <p:panel style="margin-left: auto; margin-right: auto; width: 400px; border: none; text-align: right;" >
                <h:form>
                    <p:commandButton styleClass="languagebutton" value="pl" actionListener="#{localeChanger.polishAction}" type="submit" update="@all"/>
                    <p:commandButton styleClass="languagebutton" value="en" actionListener="#{localeChanger.englishAction}" type="submit" update="@all"/>
                    <p:commandButton styleClass="languagebutton" value="de" actionListener="#{localeChanger.deutschAction}" type="submit" update="@all"/>
                    <p:commandButton styleClass="languagebutton" value="cz" actionListener="#{localeChanger.czechAction}" type="submit" update="@all"/>
                </h:form>
            </p:panel>
            <h:form id="infologowanie" >
                <p:panel style="margin-left: auto; margin-right: auto; width: 300px; border: none; text-align: center; font-size: smaller;" >
                    <h:outputFormat value="#{mgs.twojeIP1}" style="color: gray;">
                        <f:param value="#{logowanie.ipusera}"/>
                    </h:outputFormat>
                    <br/>
                    <h:outputFormat value="#{mgs.twojeIP2}">
                        <f:param value="#{logowanie.liczniklogowan}"/>
                    </h:outputFormat>
                </p:panel>
            </h:form>

            <!--eefe-->
        </h:body>
    </f:view>
</html>
