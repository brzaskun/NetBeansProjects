
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <p:accordionPanel id="akordeon">
        <p:tab title="Definiowanie ewidencji VAT">  
            <h:form id="form0" >
                <h:outputText value="definiowanie ewidencji VAT" style="font-size: 15px"/>
                <p:growl id="msg1" showDetail="true"/>
                <p:dataTable id="tablica1" value="#{evewidencjaView.lista}"  var="loop" paginatorAlwaysVisible="true" paginator="true" 
                             pageLinks="12" rows="10" selection="#{evewidencjaView.wybrany}" selectionMode="single" rowKey="#{loop.nazwa}"
                             sortBy="#{loop.nrpolanetto}"
                             editable="true" resizableColumns="true" paginatorPosition="top" style="width: 1200px;" emptyMessage="nie zdefiniowano ewidencji">
                    <p:ajax event="rowSelect" listener="#{evewidencjaView.przygotujdoedycji}" global="false" update="akordeon:parametryewidencji:parametr"/>
                    <p:column headerText="nazwa ewidencji" width="200" filterBy="#{loop.nazwa}">
                        <h:outputText id="in1" value="#{loop.nazwa}"/>
                    </p:column>
                    <p:column headerText="lp" width="30" sortBy="#{loop.nrpolanetto}"><h:outputText id="in3" value="#{loop.nrpolanetto}"/></p:column>
                    <p:column headerText="nazwa pola w deklaracji" width="350" sortBy="#{loop.pole}"><h:outputText id="in2" value="#{loop.pole}"/></p:column>
                    <p:column headerText="rodzaj transkacji" width="150" sortBy="#{loop.transakcja}"><h:outputText id="in5" value="#{loop.transakcja}"/></p:column>
                    <p:column headerText="rodzaj zakupu" sortBy="#{loop.rodzajzakupu}"><h:outputText id="in6" value="#{loop.rodzajzakupu}"/></p:column>
                    <p:column headerText="tylko netto"><h:outputText id="in7" value="#{loop.tylkoNetto eq true ? 'tak' : null}"/></p:column>
                    <p:column headerText="typ ewidencji" width="70" style="text-align: center;" sortBy="#{loop.typewidencji}"><h:outputText id="in8" value="#{loop.typewidencji eq 'sz' ? '+/-' : loop.typewidencji eq 's' ? '+' : '-'}"/></p:column>
                    <p:column id="deleteColumn" headerText="usuń" width="70" style="text-align: center;">
                        <p:commandButton action="#{evewidencjaView.usun()}" id="delete" icon="ui-icon ui-icon-trash" update="@form" type="submit" />
                    </p:column>
                </p:dataTable>
            </h:form>
            <h:form id="parametryewidencji">
                <p:growl id="msg1" showDetail="true"/>
                <p:focus for="parametr"/><br/>
                <h:outputText value="dodaj nową deklarację"/><br/>
                <p:panelGrid id="parametr" columns="2" >
                    <h:outputText value="nazwa ewidencji"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.nazwa}" style="width: 400px;" >
                        <f:selectItems value="#{evopisView.lista}"/>
                    </p:selectOneMenu>
                    <h:outputText value="pole w deklaracji"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.pole}" style="width: 400px;">
                        <f:selectItems value="#{evpozycjaView.lista}"/>
                    </p:selectOneMenu>
                    <h:outputText value="nr kolejny"/>
                    <p:inputText value="#{evewidencjaView.selected.nrpolanetto}"/>
                    <h:outputText value="rodzaj transkacji"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.transakcja}" style="width: 400px;">
                        <f:selectItems value="#{Trans.transListView}"/>
                    </p:selectOneMenu>
                    <h:outputText value="rodzaj zakupu"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.rodzajzakupu}" style="width: 400px;">
                        <f:selectItems value="#{eRodzajZakupu.rodzajZakupuView}"/>
                    </p:selectOneMenu>
                    <h:outputText value="tylko netto"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.tylkoNetto}" style="width: 400px;">
                        <f:selectItem itemLabel="tak" itemValue="true"/>
                        <f:selectItem itemLabel="nie" itemValue="false"/>
                    </p:selectOneMenu>
                    <h:outputText value="ujęcie ewidencji"/>
                    <p:selectOneMenu value="#{evewidencjaView.selected.typewidencji}" style="width: 400px;">
                        <f:selectItem itemLabel="należny" itemValue="s"/>
                        <f:selectItem itemLabel="naliczony" itemValue="z"/>
                        <f:selectItem itemLabel="należny/naliczony" itemValue="sz"/>
                    </p:selectOneMenu>
                </p:panelGrid>
                    <p:commandButton action="#{evewidencjaView.dodaj()}" value="dodaj" update="akordeon:form0:tablica1, akordeon:parametryewidencji:parametr" type="submit" style="width: 120px; margin: 10px;"/>
                    <p:commandButton action="#{evewidencjaView.edytuj()}" value="edytuj" update="akordeon:form0:tablica1, akordeon:parametryewidencji:parametr" type="submit" style="width: 120px; margin: 10px;"/>
            </h:form>
        </p:tab>
        <p:tab title="Internacjonalizacja"> 
            <h:form>
                <p:commandButton action="#{evewidencjaView.zachowajnowenazwy()}" value="zachowaj" update="@form" type="submit" style="width: 120px; margin: 10px;"/>
                <p:dataTable id="tablica1" value="#{evewidencjaView.lista}"  var="loop" paginatorAlwaysVisible="true" paginator="true" 
                             pageLinks="12" rows="10" selection="#{evewidencjaView.selected}" selectionMode="single" rowKey="#{loop.nazwa}"
                             editable="true" resizableColumns="true" paginatorPosition="top" style="width: 600px;">
                    <p:column headerText="nazwa ewidencji">
                        <h:outputText id="in1" value="#{loop.nazwa}"/></p:column>
                    <p:column headerText="nazwa w języku niemieckim" width="300">
                        <h:inputText id="in2" value="#{loop.de}" style="width: 300px;"/></p:column>
                </p:dataTable>
            </h:form>
        </p:tab>
        <p:tab title="Lista nazw ewidencji VAT">  
            <h:form id="form1" >
                <h:outputText value="Nazwy ewidencji VAT" style="font-size: 15px"/>
                <p:growl id="msg1" showDetail="true"/>
                <p:dataTable id="tablica1" value="#{evopisView.lista}"  var="loop" paginatorAlwaysVisible="true" paginator="true" 
                             pageLinks="12" rows="10"  rowKey="#{loop.opis}" sortBy="#{loop.opis}" sortOrder="ascending"
                             editable="true" resizableColumns="true" paginatorPosition="top"  style="width: 400px;"
                             >
                    <p:column width="300">
                        <h:outputText id="in1" value="#{loop.opis}"/>
                    </p:column>
                    <p:column id="deleteColumn" headerText="usuń" style="text-align: center;">
                        <p:commandButton action="#{evopisView.usun(loop)}" id="delete" icon="ui-icon ui-icon-trash" update="@form, akordeon:form1, akordeon:parametryewidencji" type="submit" />
                    </p:column>
                </p:dataTable>
            </h:form>
            <h:form>
                <p:focus for="parametr"/><br/>
                <h:outputText value="dodaj nowy opis ewidencji"/><br/>
                <p:panelGrid id="parametr" columns="1" >
                    <p:inputText value="#{evopisView.selected.opis}" style="width: 380px;"/>
                    <p:commandButton action="#{evopisView.dodaj()}" value="dodaj" update="@form, akordeon:form1, akordeon:parametryewidencji" style="width: 120px; margin: 10px;"/>
                </p:panelGrid>
            </h:form>

        </p:tab>
        <p:tab title="Segment deklaracji VAT">  
            <h:form id="form2" >
                <h:outputText value="Definiowanie wierszy deklaracji VAT" style="font-size: 15px"/>
                <p:growl id="msg1" showDetail="true"/>
                <p:dataTable id="tablica1" value="#{evpozycjaView.lista}"  var="loop" paginatorAlwaysVisible="true" paginator="true" 
                             rows="10" selection="#{evpozycjaView.selected}" selectionMode="single" rowKey="#{loop.nazwapola}" style="width: 980px;"
                             editable="true" resizableColumns="true" paginatorPosition="top" sortBy="#{loop.nazwapola}" sortOrder="ascending">
                    <p:ajax event="rowEdit" listener="#{evpozycjaView.edytuj}" />
                    <p:column headerText="nazwa pola" width="700">
                        <p:cellEditor>
                            <f:facet name="output">  
                                <h:outputText value="#{loop.nazwapola}" />
                            </f:facet>
                            <f:facet name="input">  
                                <p:inputText value="#{loop.nazwapola}" style="width: 700px;"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
<!--                    <p:column id="editColumn" style="text-align: center; width: 40px;">
                        <p:rowEditor />
                    </p:column>-->
                    <p:column id="deleteColumn" headerText="usuń" style="text-align: center; width: 40px;">
                        <p:commandButton action="#{evpozycjaView.usun(loop)}" id="delete" icon="ui-icon ui-icon-trash" update="@form, :akordeon:form2, akordeon:parametryewidencji" type="submit"/>
                    </p:column>
                </p:dataTable>
            </h:form>
            <h:form>
                <p:growl id="msg1" showDetail="true"/>
                <p:focus for="parametr"/><br/>
                <h:outputText value="dodaj nowy opis wiersza deklaracji"/><br/>
                <p:panelGrid id="parametr" columns="2" >
                    <p:inputText value="#{evpozycjaView.selected.nazwapola}" style="width: 700px;"/>
                </p:panelGrid>
                <p:commandButton action="#{evpozycjaView.dodaj()}" value="dodaj" update="@form, :akordeon:form2, akordeon:parametryewidencji" type="submit" style="width: 120px; margin: 10px;"/>
            </h:form>
        </p:tab>
    </p:accordionPanel>
</ui:composition>   

