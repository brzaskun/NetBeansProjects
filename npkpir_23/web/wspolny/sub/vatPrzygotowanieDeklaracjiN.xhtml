<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:bcf="http://brzaskun.com/facelets"
    xmlns:pe="http://primefaces.org/ui/extensions"
    >
<!--     <f:event type="preRenderView" listener="#{podpisView.sprawdzczymozna(WpisView)}"/>-->
            <h:form id="formdekl">
            <p:panelGrid id="przyciskivat" columns="6" style="border-style: solid; border-color: lightgray;">
                <p:commandButton id="przycisk2" value="oblicz"  actionListener="#{vat7DKView.obliczNowa()}" update=":formdekl deklaracjauwagavatzz deklaracjauwagavatzt" style="width: 150px" title="Najpierw wciśnij oblicz vat7. Potem dopisz ewentualne kwoty z ręki."/>
<!--                <p:commandButton id="przycisk2a" value="sprawdź kartę"  update="formdekl:przyciskivat" style="width: 150px"
                                 rendered="#{WpisView.podatnikObiekt.podpiscertyfikowany and !podpisView.jestkarta}"/>-->
                <p:commandButton id="przycisk3" value="zapisz"  actionListener="#{vat7DKView.zapiszdeklaracje}"
                                 update=":formdekl deklaracjauwagavatzz deklaracjauwagavatzt" 
                                 rendered="#{vat7DKView.pokazuproszczona}"
                                 style="width: 150px; margin-left: 10px;" title="Najpierw wciśnij 'oblicz'. Potem dopisz ewentualne kwoty z ręki."/>
                <p:commandButton  value="zapisz"  actionListener="#{vat7DKView.zapiszdeklaracje}"
                                 update=":formdekl deklaracjauwagavatzz deklaracjauwagavatzt formX" 
                                 rendered="#{vat7DKView.pokazpelna}"
                                 style="width: 150px; margin-left: 10px;" title="Najpierw wciśnij 'oblicz'. Potem dopisz ewentualne kwoty z ręki."/>
<!--                <h:outputText value="do zapisu wymagana jest obecność karty z podpisem certyfikowanym!" 
                              rendered="#{WpisView.podatnikObiekt.podpiscertyfikowany and !podpisView.jestkarta}" style="color: red;"/>-->
<!--            <h:outputText value="Wymuś zapis jako deklarację pierwotną."/>
            <p:selectBooleanCheckbox value="#{vat7DKView.pierwotnazamiastkorekty}" style="width: 120px" immediate="true"/>-->
              </p:panelGrid>
            <p:messages autoUpdate="true" id="messages"/>
            <p:panel header="Dane do bieżącej deklaracji VAT-7 miesięcznej. Schema: #{vat7DKView.pasujacaSchema.nazwaschemy}"/>
            <p:panelGrid columns="1"  style="width: 90%;" rendered="#{vat7DKView.flaga ne 1}">
                <p:dataTable value="#{vat7DKView.sumaschemewidencjilista}" var="loop" sortBy="#{loop.schemaEwidencja.polenetto}" style="width: 800px;"
                             emptyMessage="nie pobrano danych" >
                    <f:facet name="header">
                        <h:outputText value="rozliczenie podatku należnego"/>
                    </f:facet>
                    <p:column width="400">
                        <h:outputText value="#{loop.schemaEwidencja.evewidencja.nazwa}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.schemaEwidencja.polenetto}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl0 value="#{loop.EVatwpisSuma.netto}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.schemaEwidencja.polevat}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl0 value="#{loop.EVatwpisSuma.vat}"/>
                    </p:column>
                </p:dataTable>
                <p:panelGrid style="text-align: center;width: 790px;">
                    <f:facet name="header">
                        <p:row>
                            <p:column>
                            </p:column>
                            <p:column>
                            </p:column>
                            <p:column>
                            </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column>
                            <h:outputText value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.nazwapozycji}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl0 value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.sumanetto}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl0 value="#{vat7DKView.schemawierszsumarycznylista.get(0).deklaracjaVatWierszSumaryczny.sumavat}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                    <p:dataTable value="#{vat7DKView.schemawierszsumarycznylista}" var="loop" sortBy="#{loop.polenetto}" style="width: 800px;"
                                 first="1" emptyMessage="" id="naliczony">
                    <f:facet name="header">
                        <h:outputText value="rozliczenie podatku naliczonego"/>
                    </f:facet>
                    <p:column width="400">
                        <h:outputText value="#{loop.deklaracjaVatWierszSumaryczny.nazwapozycji}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.polenetto}" rendered="#{loop.netto1vat2 != 2}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl0 value="#{loop.deklaracjaVatWierszSumaryczny.sumanetto}" rendered="#{loop.netto1vat2 != 2}"/>
                    </p:column>
                    <p:column width="30" style="text-align: center;">
                        <h:outputText value="#{loop.polevat}"/>
                    </p:column>
                    <p:column>
                        <bcf:outputpl0 value="#{loop.deklaracjaVatWierszSumaryczny.sumavat}" />
                    </p:column>
                </p:dataTable>
            </p:panelGrid>
            <p:panelGrid columns="2"  style="width: 800px;"   rendered="#{vat7DKView.flaga eq 0}">
                <h:outputText value="przeniesienie z pop.deklaracji"/>
                <pe:inputNumber value="#{vat7DKView.przeniesieniezpoprzedniejdeklaracji}" decimalPlaces="0"/>
                <h:outputText value="kwota wydatkowana na zakup kasy rejestrującej"/>
                <pe:inputNumber value="#{vat7DKView.kwotanakaserej}" decimalPlaces="0" />
                <h:outputText value="zwrot na rachunek w terminie 25 dni"/>
                <pe:inputNumber value="#{vat7DKView.zwrot25dni}" decimalPlaces="0"/>
                <h:outputText value="zwrot na rachunek w terminie 60 dni"/>
                <pe:inputNumber value="#{vat7DKView.zwrot60dni}" decimalPlaces="0"/>
                <h:outputText value="zwrot na rachunek w terminie 180 dni"/>
                <pe:inputNumber value="#{vat7DKView.zwrot180dni}" decimalPlaces="0"/>
            </p:panelGrid>
        </h:form>
    <h:form id="deklaracjauwagavatzt"  >
        <h:outputText value="Wystąpiono o kwotę do zwrotu a nie ma sprzedaży opodatkowanej. Należy wypełnić załącznik VAT-ZT" 
                      style="font-weight: 900; padding: 10px;"
                      rendered="#{vat7DKView.flagazt}"/>
    </h:form>
    <h:form id="deklaracjauwagavatzz"   rendered="#{vat7DKView.flaga eq 0}">
        <h:outputText value="Wystąpiono o kwotę do zwrotu na rachunek bankowy w terminie 25 dni. Należy wypełnić załącznik VAT-ZZ" 
                      style="font-weight: 900; padding: 10px;"
                      rendered="#{vat7DKView.pokazinfovatzz}"/>
    </h:form>
</ui:composition>   


