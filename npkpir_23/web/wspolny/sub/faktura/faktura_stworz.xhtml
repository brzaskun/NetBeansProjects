<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ft="http://primefaces.prime.com.tr/facestrace"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <p:tab id="nowa" title="Sporządź nową fakturę" >
        <style>

            .kwotarozrachunku .pe-inputNumber{
                width: 80px !important;
            }
            
            .wpisywaniekontrfk .ui-autocomplete-input {
                width: 230px;
            }
        </style>
        <h:form id="formprzygotuj">
            <p:outputPanel style="padding: 5px;">
                <p:commandButton id="przygotuj" value="faktura stand." actionListener="#{fakturaView.przygotujfakture()}" 
                                 oncomplete="aktywujpolewyboruklientanafakturze();" update=":akordeon:formstworz"
                                 style="margin-bottom: 5px; margin-top: 5px; width: 140px;" />
                <p:commandButton value="faktura korekta" actionListener="#{fakturaView.przygotujfakturekorekte()}" 
                                 style="margin-bottom: 5px; width: 140px; margin-left: 5px;" oncomplete="aktywujpolewyboruklientanafakturze();" update=":akordeon:formstworz"/>
                <p:commandButton value="faktura xxl" actionListener="#{fakturaView.przygotujfakturexxl()}" 
                                 style="margin-bottom: 5px; width: 140px; margin-left: 5px;" oncomplete="aktywujpolewyboruklientanafakturze();" update=":akordeon:formstworz"/>
                <p:commandButton value="faktura xxl korekta" actionListener="#{fakturaView.przygotujfakturekorektexxl()}" 
                                 style="margin-bottom: 5px; width: 140px; margin-left: 5px;" oncomplete="aktywujpolewyboruklientanafakturze();" update=":akordeon:formstworz"/>
            </p:outputPanel>
        </h:form>
        <h:form id="formstworz">
            <p:outputPanel id="panelfaktury"  rendered="#{fakturaView.pokazfakture ? true : false}">
                <div class="ui-grid ui-grid-responsive" style="height: 300px; max-width: 900px;">
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="miejsce wystawienia faktury: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inplace id="miejsce" editor="true" saveLabel="zachowaj wprowadzoną wartość" cancelLabel="wycofaj wprowadzone zmiany">  
                                <p:inputText value="#{fakturaView.selected.miejscewystawienia}" required="true" label="text" style="font-weight: bolder;"/>  
                            </p:inplace>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="wystawiający fakturę: " />
                        </div>
                        <div class="ui-grid-col-2">   
                            <p:inplace id="wystawiajacyfakt" editor="true" saveLabel="zachowaj wprowadzoną wartość" cancelLabel="wycofaj wprowadzone zmiany">  
                                <p:inputText value="#{fakturaView.selected.podpis}" label="text" style="font-weight: bolder;"/>  
                            </p:inplace>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="waluta faktury: " />
                        </div>
                        <div class="ui-grid-col-2">   
                            <h:selectOneMenu value="#{fakturaView.selected.walutafaktury}" styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                             $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                             $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="PLN" itemValue="PLN"/>
                                <f:selectItem itemLabel="EUR" itemValue="EUR"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="data wystawienia faktury: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inputText id="datawystawienia" value="#{fakturaView.selected.datawystawienia}" required="true" label="text" style="font-weight: bolder;"
                                         onblur="weryfikujsporzadzfakture(this)" placeholder="rrrr-mm-dd" valueChangeListener="#{fakturaView.dopasujterminplatnosci}">
                                <p:ajax event="blur" global="false" partialSubmit="true"/>
                            </p:inputText>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="data, albo miesiąc i rok dokonania czynności: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inputText value="#{fakturaView.selected.datasprzedazy}" required="true" label="text" style="font-weight: bolder;"
                                         onblur="weryfikujsporzadzfakture(this)" placeholder="rrrr-mm-dd"/>  
                        </div>
                    </div>
                     <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="dni do zapłaty: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inputText id="dnizaplaty" value="#{fakturaView.selected.dnizaplaty}" required="true" label="text" style="font-weight: bolder;" valueChangeListener="#{fakturaView.dopasujterminplatnoscidni}">
                                <p:ajax event="blur" global="false" partialSubmit="true"/>
                            </p:inputText>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="termin płatności: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inputText id="terminzaplaty" value="#{fakturaView.selected.terminzaplaty}" required="true" label="text" style="font-weight: bolder;"
                                         onblur="weryfikujsporzadzfakture(this)" placeholder="rrrr-mm-dd"/>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="nr faktury: "/>
                        </div>
                        <div class="ui-grid-col-2">
                            <p:inplace id="nrfaktury" editor="true" saveLabel="zachowaj wprowadzoną wartość" cancelLabel="wycofaj wprowadzone zmiany">  
                                <p:inputText value="#{fakturaView.selected.fakturaPK.numerkolejny}" required="true" label="text" style="font-weight: bolder;"/>  
                            </p:inplace>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputText value="nr zamówienia" rendered="#{fakturadodelementyView.czydodatkowyelementjestAktywny('nr zamówienia')}"/>
                        </div>
                        <div class="ui-grid-col-2" style="height: 40px;">
                            <p:inputText value="#{fakturaView.selected.numerzamowienia}" rendered="#{fakturadodelementyView.czydodatkowyelementjestAktywny('nr zamówienia')}">
                                <p:ajax global="false" event="focus" onstart="sprawdzczynazwaskroconafakturaniejestshown();"/>
                            </p:inputText>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="sposób zapłaty: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <h:selectOneMenu value="#{fakturaView.selected.sposobzaplaty}" styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                             $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                             $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="przelew" itemValue="przelew"/>
                                <f:selectItem itemLabel="gotówka" itemValue="gotówka"/>
                            </h:selectOneMenu>
                        </div>
                        <div class="ui-grid-col-2">
                            <h:outputLabel value="konto bankowe: " />
                        </div>
                        <div class="ui-grid-col-4">
                            <p:inplace id="kontobankowe" editor="true" saveLabel="zachowaj wprowadzoną wartość" cancelLabel="wycofaj wprowadzone zmiany">  
                                <p:inputText value="#{fakturaView.selected.nrkontabankowego}" required="true" label="text" style="font-weight: bolder;" requiredMessage="Brakuje wpisanego numeru konta bankowego"/>  
                            </p:inplace>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputLabel id="danekontrahentaout" value="dane kontrahenta: " />
                        </div>
                        <div class="ui-grid-col-2">
                            <p:autoComplete id="acForce" value="#{fakturaView.selected.kontrahent}" completeMethod="#{klienciConverterView.completeKL}"
                                            var="p" itemLabel="#{p.npelna}" itemValue="#{p}" converter="KlientConv" title="wpisz nazwę lub nip kontrahenta"
                                            minQueryLength="3" maxResults="10" cache="true" converterMessage="Nieudana konwersja Klient"
                                            autocomplete="true" widgetVar="tworzenieklientapolenazwy" binding="#{fakturaView.kontrahentstworz}"
                                            requiredMessage="Nie wybrany odbiorca faktury" queryDelay="10" styleClass="wpisywaniekontrfk" 
                                            >
                                <p:ajax event="blur" listener="#{fakturaView.wgenerujnumerfaktury}" partialSubmit="true" oncomplete="sprawdzczybrakklientafaktura();"  global="false"/>
                                <p:ajax event="query"  global="false"/>
                                <f:facet name="itemtip">  
                                    <h:panelGrid  columns="2" cellpadding="5" width="400">  
                                        <f:facet name="header">  
                                            <h:outputText value="Dane kontrahenta"/>
                                        </f:facet>  
                                        <h:outputText value="Nazwa: " />  
                                        <h:outputText id="npelna" value="#{p.npelna}" />  
                                        <h:outputText value="NIP: " />  
                                        <h:outputText id="nip" value="#{p.nip}" />  
                                        <h:outputText value="Adres " />  
                                        <h:outputText id="klumna" value="#{p.miejscowosc} #{p.ulica} #{p.dom} #{p.lokal}" />
                                        <h:outputText value="Email " />  
                                        <h:outputText id="kemail" value="#{p.email}" /> 
                                    </h:panelGrid>
                                </f:facet>
                                <f:param name="passedValue" value="#{p}" />
                            </p:autoComplete>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputText value="opis faktury"/>
                        </div>
                        <div class="ui-grid-col-8" style="height: 40px;">
                            <p:inputText value="#{fakturaView.selected.nazwa}"  style="width: 600px;">
                                <p:ajax global="false" event="focus" onstart="sprawdzczynazwaskroconafakturaniejestshown();"/>
                            </p:inputText>
                        </div>
                    </div>
                    <div class="ui-grid-row" style="height: 40px;">
                        <div class="ui-grid-col-2">
                            <h:outputText value="przyczyna korekty" rendered="#{fakturaView.fakturakorekta}"/>
                        </div>
                        <div class="ui-grid-col-6" style="height: 40px;">
                            <p:inputText value="#{fakturaView.selected.przyczynakorekty}"  rendered="#{fakturaView.fakturakorekta}" style="width: 400px;">
                                <p:ajax global="false" event="focus" onstart="sprawdzczynazwaskroconafakturaniejestshown();"/>
                            </p:inputText>
                        </div>
                    </div>
                    
                </div>
                <p:outputPanel id="panel" style="margin-top: 15px;">
                    <p:dataTable id="rzad" value="#{fakturaView.selected.pozycjenafakturze}" var="row" rowIndexVar="rowStat" style="width: 790px;"
                                 binding="#{fakturaView.dataTablepozycjenafakturze}">
                        <f:facet name="header" >
                            <h:outputText value="przed korektą"  rendered="#{fakturaView.fakturakorekta}"/>
                        </f:facet>
                        <p:column headerText="nazwa" width="230" style="text-align: center;">
                            <p:inputText id="nazwa" value="#{row.nazwa}" style="width: 220px;"
                                         styleClass="komorka"  label="text" title="nazwa towaru lub usługi" ><p:watermark for="nazwa" value="nazwa towaru lub usługi" />
                                <p:ajax global="false" event="focus" onstart="sprawdzczynazwaskroconafakturaniejestshown();"/>
                            </p:inputText>   
                        </p:column>
                        <p:column headerText="pkwiu" width="80" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="pkwiu" value="#{row.PKWiU}" label="text" style="width: 70px;" title="jednostka miary"><p:watermark for="pkwiu" value="sym.PKWiU" /></p:inputText>    
                        </p:column>
                        <p:column headerText="pkwiu" width="80" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.pkwiu eq true ? true : false) : false}">
                            <p:inputText id="pkwiuxxl" value="#{row.PKWiU}" label="text" style="width: 70px;" title="jednostka miary"><p:watermark for="pkwiuxxl" value="sym.PKWiU" /></p:inputText>    
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <h:selectOneMenu id="jednmiary" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="szt." itemValue="szt."/>
                                <f:selectItem itemLabel="godz." itemValue="godz."/>
                                <f:selectItem itemLabel="kg" itemValue="kg"/>
                                <f:selectItem itemLabel="km" itemValue="km"/>
                                <f:selectItem itemLabel="kpl" itemValue="kpl"/>
                                <f:selectItem itemLabel="m-c" itemValue="m-c"/>
                                <f:selectItem itemLabel="osb." itemValue="osb."/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.jednostka eq true ? true : false) : false}">
                            <h:selectOneMenu id="jednmiaryxxl" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="szt." itemValue="szt."/>
                                <f:selectItem itemLabel="godz." itemValue="godz."/>
                                <f:selectItem itemLabel="kg" itemValue="kg"/>
                                <f:selectItem itemLabel="km" itemValue="km"/>
                                <f:selectItem itemLabel="kpl" itemValue="kpl"/>
                                <f:selectItem itemLabel="m-c" itemValue="m-c"/>
                                <f:selectItem itemLabel="osb." itemValue="osb."/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="ilosc" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;"><p:watermark for="ilosc" value="ilość" /></p:inputText>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.ilosc eq true ? true : false) : false}">
                            <p:inputText id="iloscxxl" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;"><p:watermark for="ilosc" value="ilość" /></p:inputText>
                        </p:column>
                        <p:column headerText="cena jedn.netto" width="90" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <pe:inputNumber id="cena" value="#{row.cena}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="cena jedn.netto" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.cena eq true ? true : false) : false}">
                            <pe:inputNumber id="cenaxxl" value="#{row.cena}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis0}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis0 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena0" value="#{row.cenajedn0}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis1}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis1 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena1" value="#{row.cenajedn1}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis2}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis2 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena2" value="#{row.cenajedn2}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis3}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis3 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena3" value="#{row.cenajedn3}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis4}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis4 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena4" value="#{row.cenajedn4}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis5}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis5 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena5" value="#{row.cenajedn5}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="stawka VAT" width="70" style="text-align: center;">
                            <h:selectOneMenu id="podatek" value="#{row.podatek}" title="stawka podatku VAT" style="width: 60px;" 
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="23%" itemValue="23"/>
                                <f:selectItem itemLabel="8%" itemValue="8"/>
                                <f:selectItem itemLabel="5%" itemValue="5"/>
                                <f:selectItem itemLabel="0%" itemValue="0"/>
                                <f:selectItem itemLabel="np" itemValue="-1"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column style="text-align: center;">
                            <p:commandButton icon="ui-icon-trash" actionListener="#{fakturaView.usunwierszSrodek(row)}" update="akordeon:formstworz:panel" global="false"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
                <p:outputPanel  style="margin-top: 25px;">
                    <p:commandButton id="dodkol" value="dodaj wiersz" actionListener="#{fakturaView.dodajwiersz()}" 
                                     oncomplete="wybierzrzadfaktury();" style="margin-bottom: 25px; width: 120px;" partialSubmit="true"/>
                    <p:commandButton id="usunkol" value="usuń wiersz" actionListener="#{fakturaView.usunwiersz()}" partialSubmit="true"
                                     style="margin-left: 25px; width: 120px;"
                                     />
                </p:outputPanel>
                <!--                panel korekty-->
                <p:outputPanel id="panelkorekty" style="margin-top: 15px;" rendered="#{fakturaView.fakturakorekta}">
                    <p:dataTable id="rzadkorekty" value="#{fakturaView.selected.pozycjepokorekcie}" var="row" rowIndexVar="rowStat" style="width: 740px;"
                                 binding="#{fakturaView.dataTablepozycjenafakturzekorekta}">
                        <f:facet name="header">
                            <h:outputText value="po korekcie"/>
                        </f:facet>
                        <p:column headerText="nazwa" width="230">
                            <p:inputText id="nazwak" value="#{row.nazwa}" style="width: 220px; text-align: center;"
                                         styleClass="komorkak"  label="text" title="nazwa towaru lub usługi" ><p:watermark for="nazwak" value="nazwa towaru lub usługi" />
                                <p:ajax global="false" event="focus" />
                            </p:inputText>   
                        </p:column>
                        <p:column headerText="pkwiu" width="80" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="pkwiuk" value="#{row.PKWiU}" label="text" style="width: 70px;" title="jednostka miary"><p:watermark for="pkwiuk" value="sym.PKWiU" /></p:inputText>    
                        </p:column>
                        <p:column headerText="pkwiu" width="80" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.pkwiu eq true ? true : false) : false}">
                            <p:inputText id="pkwiuxxlk" value="#{row.PKWiU}" label="text" style="width: 70px;" title="jednostka miary"><p:watermark for="pkwiuxxlk" value="sym.PKWiU" /></p:inputText>    
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <h:selectOneMenu id="jednmiaryk" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="szt." itemValue="szt."/>
                                <f:selectItem itemLabel="godz." itemValue="godz."/>
                                <f:selectItem itemLabel="kg" itemValue="kg"/>
                                <f:selectItem itemLabel="km" itemValue="km"/>
                                <f:selectItem itemLabel="kpl" itemValue="kpl"/>
                                <f:selectItem itemLabel="m-c" itemValue="m-c"/>
                                <f:selectItem itemLabel="osb." itemValue="osb."/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="jedn. miary" width="65" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.jednostka eq true ? true : false) : false}">
                            <h:selectOneMenu id="jednmiaryxxl" value="#{row.jednostka}" title="stawka podatku VAT" style="width: 60px;"
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="szt." itemValue="szt."/>
                                <f:selectItem itemLabel="godz." itemValue="godz."/>
                                <f:selectItem itemLabel="kg" itemValue="kg"/>
                                <f:selectItem itemLabel="km" itemValue="km"/>
                                <f:selectItem itemLabel="kpl" itemValue="kpl"/>
                                <f:selectItem itemLabel="m-c" itemValue="m-c"/>
                                <f:selectItem itemLabel="osb." itemValue="osb."/>
                                <f:selectItem itemLabel="Mg" itemValue="Mg"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <p:inputText id="ilosck" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;"><p:watermark for="ilosck" value="ilość" /></p:inputText>
                        </p:column>
                        <p:column headerText="ilość" width="60" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.ilosc eq true ? true : false) : false}">
                            <p:inputText id="iloscxxlk" value="#{row.ilosc}" label="text" title="ilość" style="text-align:  right; width: 50px;"><p:watermark for="ilosck" value="ilość" /></p:inputText>
                        </p:column>
                        <p:column headerText="cena jedn.netto" width="90" style="text-align: center;" rendered="#{!fakturaView.fakturaxxl}">
                            <pe:inputNumber id="cenak" value="#{row.cena}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="cena jedn.netto" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.cena eq true ? true : false) : false}">
                            <pe:inputNumber id="cenaxxlk" value="#{row.cena}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis0}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis0 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena0k" value="#{row.cenajedn0}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis1}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis1 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena1k" value="#{row.cenajedn1}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis2}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis2 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena2k" value="#{row.cenajedn2}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis3}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis3 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena3k" value="#{row.cenajedn3}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis4}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis4 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena4k" value="#{row.cenajedn4}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="#{fakturaXXLKolumnaView.selected.nettoopis5}" width="90" style="text-align: center;" rendered="#{fakturaView.fakturaxxl eq true ? (fakturaXXLKolumnaView.selected.nettoopis5 ne '' ? true : false) : false}">
                            <pe:inputNumber id="cena5k" value="#{row.cenajedn5}" required="true" styleClass="kwotarozrachunku"
                                            requiredMessage="Brak kwoty - uzupełnij" symbolPosition="s" decimalSeparator="." thousandSeparator=" " decimalPlaces="2" minValue="-10000000"/> 
                        </p:column>
                        <p:column headerText="stawka VAT" width="70">
                            <h:selectOneMenu id="podatekk" value="#{row.podatek}" title="stawka podatku VAT" style="width: 60px;" 
                                             styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
                                             onfocus="$(this).removeClass('ui-state-default');
                                                     $(this).addClass('ui-state-focus');"
                                             onblur="$(this).removeClass('ui-state-focus');
                                                     $(this).addClass('ui-state-default');" >
                                <f:selectItem itemLabel="23%" itemValue="23"/>
                                <f:selectItem itemLabel="8%" itemValue="8"/>
                                <f:selectItem itemLabel="5%" itemValue="5"/>
                                <f:selectItem itemLabel="0%" itemValue="0"/>
                            </h:selectOneMenu>
                        </p:column>
                        <p:column style="text-align: center;">
                            <p:commandButton icon="ui-icon-trash" actionListener="#{fakturaView.usunwierszSrodekk(row)}" update="akordeon:formstworz:panelkorekty" global="false"/>
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
                <p:outputPanel  style="margin-top: 25px;"  rendered="#{fakturaView.fakturakorekta}">
                    <p:commandButton id="dodkolk" value="dodaj wiersz" actionListener="#{fakturaView.dodajwierszk()}" 
                                     oncomplete="wybierzrzadfakturykorekta();" style="margin-bottom: 25px; width: 120px;" partialSubmit="true"/>
                    <p:commandButton id="usunkolk" value="usuń wiersz" actionListener="#{fakturaView.usunwierszk()}" partialSubmit="true"
                                     style="margin-left: 25px; width: 120px;"
                                     />
                </p:outputPanel>
                <p:messages id="messagesinline"/>
                <p:outputPanel  style="margin-top: 15px;">
                    <p:commandButton id="zachowajfakt" value="zachowaj fakture" actionListener="#{fakturaView.dodaj()}" title="zapisz fakturę w bazie danych"
                                     update=":akordeon:formstworz, :akordeon:formsporzadzone" style="margin-bottom: 25px; width: 120px; height: 45px;" 
                                     rendered="#{fakturaView.zapis0edycja1 eq false}"/>
                    <p:commandButton id="edytujfakt" value="edytuj fakture" actionListener="#{fakturaView.edytuj()}" title="zapisz fakturę w bazie danych"
                                     update=":akordeon:formstworz, :akordeon:formsporzadzone" style="margin-bottom: 25px; width: 120px; height: 45px;"
                                     rendered="#{fakturaView.zapis0edycja1 eq true}"/>
                    <p:commandButton style="margin-left: 25px; width: 120px; height: 45px;" id="dodajwzorcowywiersz" value="wzorcowy wiersz" 
                                     title="zachowaj pierwszy wiersz jako wzorcowy" actionListener="#{fakturaView.zachowajwierszwzorcowy()}"/>
                    <p:commandButton style="margin-left: 25px; width: 120px; height: 45px;" actionListener="#{pdfFaktura.drukujPodgladfaktury(fakturaView.selected, WpisView)}" 
                                     value="podgląd bieżącej faktury" 
                                     title="podejrzyj fakturę w pdf" />
                </p:outputPanel>
            </p:outputPanel>
        </h:form>
    </p:tab>  
</ui:composition>   


