<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"

    xmlns:bcf="http://brzaskun.com/facelets"
    >
    <p:panel header="paski wynagrodzeń" rendered="#{pasekwynagrodzenView.ileszczegolow eq 'normalna'}">
        <style>
            .listaplac .ui-widget-content.ui-datatable-odd.ui-datatable-selectable {
                border-width: 2px !important;
                border-color: #006775 !important;
            }
            .listaplac .ui-widget-content.ui-datatable-even.ui-datatable-selectable {
                border-width: 2px !important;
                border-color: #006775 !important;
            }
        </style>
            <p:dataTable id="datalist1" value="#{pasekwynagrodzenView.lista}" var="itempasek" emptyMessage="Brak listy za dany okres" styleClass="listaplac"
                     selectionMode="single" selection="#{pasekwynagrodzenView.selectedlista}" rowIndexVar="indexpasek"
                     rowKey="#{itempasek.kalendarzmiesiac.hashCode()}" sortBy="#{itempasek.kalendarzmiesiac.angaz.pracownik.nazwiskoImie}"
                     style="height: 430px; overflow-y: scroll;"
                     >
            <p:column width="20" style="text-align: center;">
                <p:rowToggler />
            </p:column>
            <p:column>
                <p:panelGrid styleClass="pasekwync">
                    <p:row>
                        <p:column width="80" style="text-align: center;">
                            <h:outputText value="koszt prac."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{itempasek.wiekpasek}" style="color: #009688;"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="z zus"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="z zus bez pod."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="bez społ."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="bez zus"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="bez zus i pod."/>
                        </p:column>
                        <p:column style="background-color: #bbc7cd">
                            <h:outputText value="razem brutto" />
                        </p:column>
                        <p:column>
                            <h:outputText value="podst.społ."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="chorobowe"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="emerytalne"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="rentowe"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="razem społ. prac."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="brutto-zus"/>
                        </p:column>
                        <p:column width="20" style="text-align: center;">
                            <h:outputText value="#{indexpasek+1}"/>
                            <h:outputText value="student" rendered="#{itempasek.kalendarzmiesiac.angaz.student}" style="color: #009688;"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column width="40" style="text-align: center;">
                            <bcf:outputpl value="#{itempasek.kosztpracodawcy}" rendered="#{itempasek.importowany eq false}"/>
                            <h:outputText value="/import" style="color:blue;" rendered="#{itempasek.importowany eq true}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="nierezydent" rendered="#{itempasek.nierezydent}" style="color: #009688;"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.bruttozus}" />
                        </p:column>
                         <p:column>
                             <bcf:outputpl value="#{itempasek.bruttozusbezpodatek}" />
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.bruttobezspolecznych}" />
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.bruttobezzus}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.bruttobezzusbezpodatek}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.brutto}"/>
                        </p:column>
                        <p:column >
                            <bcf:outputpl value="#{itempasek.podstawaskladkizus}"/>
                        </p:column>
                        <p:column >
                            <bcf:outputpl value="#{itempasek.pracchorobowe}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.pracemerytalne}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.pracrentowe}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.razemspolecznepracownik}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.bruttominusspoleczne}"/>
                        </p:column>
                        <p:column width="20" style="text-align: center;">
                            <p:commandButton icon="pi pi-print" actionListener="#{pasekwynagrodzenView.drukuj(itempasek)}" global="false"/>
                            <p:commandButton icon="pi pi-fast-forward" actionListener="#{pasekwynagrodzenView.przelicz(itempasek)}" global="false" update="PasekwynagrodzenListForm"/>
                        </p:column>
                    </p:row>
                    <!--                        <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="fgsp"/>
                                                </f:facet>
                                                <bcf:outputpl value="#{itempasek.fgsp}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="fp"/>
                                                </f:facet>
                                                <bcf:outputpl value="#{itempasek.fp}"/>
                                            </p:column>-->
                    <p:row>
                        <p:column>
                            <h:outputText value="#{itempasek.rok}/#{itempasek.mc}"/>
                        </p:column>
<!--                        <p:column>
                            <h:outputText value="ulga dla kl.sr"/>
                        </p:column>-->
                        <p:column>
                            <h:outputText value="koszty uzyskania"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="podstawa opodatk."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="podatek wstępny"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="kwota wolna"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="podstawa zdrow."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="zdrowotne"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="podatek"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="podatek zagranica"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="netto"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="potracenia"/>
                        </p:column>
                        <p:column style="background-color: #bbc7cd">
                            <h:outputText value="do wypł."/>
                        </p:column>
                        <p:column>
                            <h:outputText value="FP"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="FGŚP"/>
                        </p:column>

                    </p:row>
                    <p:row>
                        <p:column>
                            <h:outputText value="#{itempasek.nazwiskoImie}" style="color: #009688"/>
                        </p:column>
                        
<!--                        <p:column>
                            <bcf:outputpl value="#{itempasek.ulgadlaklasysredniejSuma}"/>
                        </p:column>-->
                        <p:column>
                            <bcf:outputpl value="#{itempasek.kosztyuzyskania}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.podstawaopodatkowania}"/>
                        </p:column>
                        
                        <p:column>
                            <bcf:outputpl value="#{itempasek.podatekwstepny}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.kwotawolna}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.podstawaubezpzdrowotne}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.praczdrowotne}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.podatekdochodowy}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.podatekdochodowyzagranica}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.nettoprzedpotraceniami}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.potracenia}"/>
                        </p:column>
                        <p:column style="text-align: right;">
                            <bcf:outputpl value="#{itempasek.netto}" style="color: #009688;"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.fp}"/>
                        </p:column>
                        <p:column>
                            <bcf:outputpl value="#{itempasek.fgsp}"/>
                        </p:column>
                        <p:column width="20" style="text-align: center;">
                            <p:commandButton icon="pi pi-trash" actionListener="#{pasekwynagrodzenView.usun(itempasek)}" global="false" update="@form NieobecnoscListForm DefinicjalistaplacCreateForm2"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </p:column>
            <p:rowExpansion>
                <p:dataTable id="datalist1" value="#{itempasek.getPobierzskladniki(pasekwynagrodzenView.wybranalistaplac)}" var="itempasekszcz"
                             rowIndexVar="indexpasekszcz"
                             style="height: 200px; overflow-y: scroll;width: 1500px;"
                             >
                    <p:column style="text-align: center;color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};" headerText="lp" width="40">
                        <h:outputText value="#{itempasekszcz.lp}"/>
                    </p:column>
                   <p:column headerText="kod" width="25" style="text-align: center;color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.kod}"/>
                    </p:column>
                    <p:column headerText="zus" width="25" style="text-align: center;color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.kodzus}"/>
                    </p:column>
                    <p:column headerText="składnik" width="320" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.nazwa}"/>
                    </p:column>
                    <p:column headerText="imp.uwagi" width="60" style="text-align: center;color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="za urlop" rendered="#{itempasekszcz.urlopSP}"/>
                         <h:outputText value="redukcja" rendered="#{itempasekszcz.redukcjaSP}"/>
                         <h:outputText value="potrącenie" style="color:red;" rendered="#{itempasekszcz.potracenie}"/>
                         <h:outputText value="#{itempasekszcz.procentzwolnienia},%"  rendered="#{itempasekszcz.procentzwolnienia ne 0.0}"/>
                         <h:outputText value="#{itempasekszcz.uwagi}" rendered="#{itempasekszcz.uwagi ne null}"/>
                    </p:column>
                    <p:column headerText="dni" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.dniobowiazku}/#{itempasekszcz.dniprzepracowane}"/>
                    </p:column>
                    <p:column headerText="godziny" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.godzinyobowiazku}/#{itempasekszcz.godzinyprzepracowane}"/>
                    </p:column>
                    <p:column headerText="data od" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.dataod}"/>
                    </p:column>
                    <p:column headerText="data do" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <h:outputText value="#{itempasekszcz.datado}"/>
                    </p:column>
                    <p:column headerText="waluta" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.wynagrodzeniezmiennawaluta}"/>
                    </p:column>
                    <p:column headerText="pln" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.wynagrodzeniezmienna}"/>
                    </p:column>
                    <p:column headerText="st/h" width="40"  style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.stawkanagodzinewaluta}"/>
                    </p:column>
                     <p:column headerText="st/h" width="40"  style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.stawkanagodzine}"/>
                    </p:column>
                    <p:column headerText="st/dz" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.stawkadzienna}"/>
                    </p:column>
                    <p:column headerText="kwota" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.kwota}"/>
                    </p:column>
                    <p:column headerText="redukcja" width="60" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.redukcja}"/>
                    </p:column>
                    <p:column headerText="waluta" width="30" style="color: #{itempasekszcz.kwota eq 0.0?'grey':'initial'};">
                        <bcf:outputpl value="#{itempasekszcz.waluta}"/>
                    </p:column>
                </p:dataTable>
            </p:rowExpansion>

        </p:dataTable>
    </p:panel>
</ui:composition>
