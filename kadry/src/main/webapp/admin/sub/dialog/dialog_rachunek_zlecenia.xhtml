<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"

    xmlns:bcf="http://brzaskun.com/facelets"
xmlns:pe="http://primefaces.org/ui/extensions">
     <script>
        var zmienwyglad = function(){
            $('.czekpole.ui-chkbox div').removeClass('ui-state-disabled');
        };
    </script>

    <p:dialog id="dialograchunekzlecenia" header="Wystawianie rachunku do umowy zlecenia" widgetVar="dialograchunekzlecenia"  
              resizable="false"  onShow="ustawdialog('dialograchunekzlecenia','centertile',1650,800);zmienwyglad()" closeOnEscape="true" onHide="resetujdialog('dialograchunekzlecenia');" 
              fitViewport="true">
        <p:ajax event="open" listener="#{rachunekZlecenieView.init()}" update="RachunekZleceniaForm" global="false"/>
        <p:outputPanel>
            <h:form id="RachunekZleceniaForm">
                <p:panel header="Miesięczne rozliczenie umowy zlecenia nr #{rachunekZlecenieView.umowabiezaca.nrkolejny}" style="width: 700px;"/>
                <h:outputText value="Przygotowano nowy rachunek do zatwierdzenia" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id eq null}"/>
                <h:outputText value="Pobrano uprzednio przygotowany rachunek." rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id ne null and rachunekZlecenieView.rachunekdoumowyzlecenia.pasekwynagrodzen eq null}" style="color: blue;"/>
                <h:outputText value="Pobrano uprzednio przygotowany rachunek. Rachunek rozliczono w liście płac" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id ne null and rachunekZlecenieView.rachunekdoumowyzlecenia.pasekwynagrodzen ne null}"  style="color: red;"/>
                <p:panelGrid columns="4" rendered="#{rachunekZlecenieView.umowabiezaca ne null}">
                    <p:outputLabel value="data umowy od:"/>
                    <h:outputText value="#{rachunekZlecenieView.umowabiezaca.dataod}" styleClass="ww"/>
                    <p:outputLabel value="data umowy do:"/>
                    <h:outputText value="#{rachunekZlecenieView.umowabiezaca.datado}" rendered="#{rachunekZlecenieView.umowabiezaca.datado ne ''}" styleClass="ww"/>
                    <h:outputText value="czas nieokreślony" rendered="#{rachunekZlecenieView.umowabiezaca.datado eq null or rachunekZlecenieView.umowabiezaca.datado eq ''}"/>
                    <p:outputLabel value="rodzaj wynagrodzenia:"/>
                    <h:outputText value="#{rachunekZlecenieView.umowabiezaca.pobierzwynagrodzenieString()}" styleClass="ww"/>
                </p:panelGrid>
                <p:panelGrid columns="1" style="margin-top: 10px;">
                    <h:outputText value="Braku zawartej umowy zlecenia z " styleClass="ww" rendered="#{rachunekZlecenieView.umowabiezaca eq null}"/>
                    <h:outputText value="Jest zawarta umowa, ale nie dotyczy bieżacego okresu" styleClass="ww" rendered="#{rachunekZlecenieView.trzebazrobicrachunek eq false}"/>
                    <h:outputText value="Jest zawarta umowa. Nalezy rozliczyć bieżacy okres" styleClass="ww" rendered="#{rachunekZlecenieView.trzebazrobicrachunek eq true}"/>
                </p:panelGrid>
                <p:panelGrid columns="2">
                    <p:outputLabel value="data sporządzenia rach:"/>
                    <p:inputText value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.datawystawienia}" size="10" placeholder="____-__-__"/>
                    <p:outputLabel value="data od:"/>
                    <h:outputText value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.dataod}"/>
                    <p:outputLabel value="data do:"/>
                    <h:outputText value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.datado}"/>
                    <p:outputLabel value="wynagrodzenie miesięczne:"/>
                    <bcf:outputpl value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.wynagrodzeniemiesieczne}"/>
                    <p:outputLabel value="wynagrodzenie godzinowe:"/>
                    <bcf:outputpl value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.wynagrodzeniegodzinowe}"/>
                </p:panelGrid>
                <p:panelGrid columns="2" style="margin-top: 10px;">
                    <p:outputLabel value="ilośc godzin wg kalendarza:"/>
                    <p:inputNumber value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.iloscgodzin}" decimalSeparator=","   inputStyle="text-align: right;" decimalPlaces="2">
                        <p:ajax event="change" partialSubmit="true" listener="#{rachunekZlecenieView.przeliczrachunek()}" update="RachunekZleceniaForm:lolo"/>
                    </p:inputNumber>
                    <p:outputLabel value="koszt uzyskania procent:"/>
                    <bcf:outputplprocent value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.procentkosztowuzyskaniaDisplay}"/>
                    <p:outputLabel value="koszt uzyskania kwota:"/>
                    <p:inputNumber value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.koszt}" decimalSeparator=","   inputStyle="text-align: right;" decimalPlaces="2"/>
                    <p:outputLabel value="kwota brutto:"/>
                    <p:inputNumber value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.kwota}" id="lolo"  decimalPlaces="1" decimalSeparator="," inputStyle="text-align: right"/>
                </p:panelGrid>
                <p:panelGrid columns="2" style="margin-top: 10px;">
                    <p:outputLabel value="naliczać społeczne:"/>
                    <p:selectBooleanCheckbox value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.spoleczne}" styleClass="czekpole"/>
                    <p:outputLabel value="naliczać chorobowe:"/>
                    <p:selectBooleanCheckbox value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.chorobowa}" styleClass="czekpole"/>
                    <p:outputLabel value="naliczać zdrowotną:"/>
                    <p:selectBooleanCheckbox value="#{rachunekZlecenieView.rachunekdoumowyzlecenia.zdrowotna}" styleClass="czekpole"/>
                    <p:outputLabel value="naliczać podatek:"/>
                    <h:outputText value="podatek zryczałtowany - nierezydent" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.umowa.nierezydent eq true}"/>
                    <h:outputText value="podatek wg skali" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.umowa.nierezydent eq false}"/>
                </p:panelGrid>
                <p:panelGrid columns="1">
                    <p:commandButton value="zaksięguj" actionListener="#{rachunekZlecenieView.zaksieguj()}" update="@form" styleClass="buttonnorm" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id eq null}"/>
                    <p:commandButton value="usuń" actionListener="#{rachunekZlecenieView.usun()}" update="@form" styleClass="buttonnorm2" rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id ne null and rachunekZlecenieView.rachunekdoumowyzlecenia.pasekwynagrodzen eq null}"/>
                    <h:outputText value="Rachunek ujęty na liście płac. Nie można usunąć rachunku." rendered="#{rachunekZlecenieView.rachunekdoumowyzlecenia.id ne null and rachunekZlecenieView.rachunekdoumowyzlecenia.pasekwynagrodzen ne null}"/>
                </p:panelGrid>
            </h:form>
        </p:outputPanel>
    </p:dialog>
</ui:composition>

